<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Êû∂Èõª„Éä„Éì | MIXEDÊ†™Âºè‰ºöÁ§æ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700;900&family=M+PLUS+Rounded+1c:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #1a5fb4;
            --primary-light: #3584e4;
            --secondary: #e01b24;
            --accent-yellow: #f5c211;
            --accent-green: #26a269;
            --accent-purple: #9141ac;
            --bg-main: #f6f5f4;
            --bg-white: #ffffff;
            --text-dark: #241f31;
            --text-gray: #5e5c64;
            --border: #deddda;
            --shadow: rgba(0,0,0,0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: var(--bg-main);
            color: var(--text-dark);
            line-height: 1.7;
            font-size: 16px;
            min-height: 100vh;
        }

        /* ========== „Éë„Çπ„ÉØ„Éº„Éâ‰øùË≠∑ÁîªÈù¢ ========== */
        .login-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a5fb4 0%, #3584e4 50%, #62a0ea 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .login-screen.hidden {
            display: none;
        }

        .login-box {
            background: white;
            padding: 2.5rem 2rem;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            text-align: center;
            width: 90%;
            max-width: 380px;
            animation: slideUp 0.5s ease-out;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .login-logo {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            font-size: 2.5rem;
            color: white;
            box-shadow: 0 8px 20px rgba(26, 95, 180, 0.3);
        }

        .login-company {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .login-title {
            font-size: 1rem;
            color: var(--text-gray);
            margin-bottom: 2rem;
        }

        .login-input-group {
            margin-bottom: 1rem;
        }

        .login-input {
            width: 100%;
            padding: 1rem;
            font-size: 1rem;
            border: 2px solid var(--border);
            border-radius: 10px;
            outline: none;
            transition: border-color 0.3s, box-shadow 0.3s;
            font-family: 'Noto Sans JP', sans-serif;
        }

        .login-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(26, 95, 180, 0.1);
        }

        .login-input.error {
            border-color: var(--secondary);
            animation: shake 0.4s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            50% { transform: translateX(8px); }
            75% { transform: translateX(-8px); }
        }

        .login-btn {
            width: 100%;
            padding: 1rem;
            font-size: 1rem;
            font-weight: 700;
            color: white;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            font-family: 'Noto Sans JP', sans-serif;
        }

        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(26, 95, 180, 0.4);
        }

        .login-error {
            color: var(--secondary);
            font-size: 0.85rem;
            margin-top: 1rem;
            display: none;
        }

        .login-error.show {
            display: block;
        }

        .app-content {
            display: none;
        }

        .app-content.visible {
            display: block;
        }

        /* ========== „Éò„ÉÉ„ÉÄ„Éº ========== */
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            padding: 1rem;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 20px var(--shadow);
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .header h1 {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            font-size: 1.3rem;
            font-weight: 700;
        }

        /* „Éö„Éº„Ç∏Âàá„ÇäÊõø„Åà„Çø„Éñ */
        .page-tabs {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            margin-top: 0.5rem;
        }

        .page-tab {
            padding: 0.5rem 1rem;
            background: rgba(255,255,255,0.2);
            color: white;
            text-decoration: none;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            transition: all 0.2s;
        }

        .page-tab:hover {
            background: rgba(255,255,255,0.3);
        }

        .page-tab.active {
            background: white;
            color: var(--primary);
        }

        /* ========== Êû∂ÈõªËÄÖÈÅ∏ÊäûÁîªÈù¢ ========== */
        .caller-select-screen {
            display: none;
            padding: 1rem;
            max-width: 500px;
            margin: 0 auto;
        }

        .caller-select-screen.visible {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }

        .caller-select-card {
            background: white;
            border-radius: 20px;
            padding: 2rem 1.5rem;
            box-shadow: 0 4px 20px var(--shadow);
        }

        .caller-select-title {
            text-align: center;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .caller-select-subtitle {
            text-align: center;
            font-size: 0.9rem;
            color: var(--text-gray);
            margin-bottom: 1.5rem;
        }

        .caller-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .caller-btn {
            padding: 1rem;
            border: 2px solid var(--border);
            border-radius: 12px;
            background: white;
            font-size: 1rem;
            font-weight: 700;
            color: var(--text-dark);
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Noto Sans JP', sans-serif;
        }

        .caller-btn:hover {
            border-color: var(--primary);
            background: #f0f6ff;
        }

        .caller-btn.selected {
            border-color: var(--primary);
            background: var(--primary);
            color: white;
        }

        .caller-btn.add-new {
            border-style: dashed;
            color: var(--text-gray);
        }

        .caller-btn.add-new:hover {
            border-color: var(--accent-green);
            color: var(--accent-green);
        }

        .caller-input-section {
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border);
        }

        .start-call-btn {
            width: 100%;
            padding: 1.25rem;
            font-size: 1.2rem;
            font-weight: 700;
            color: white;
            background: linear-gradient(135deg, var(--accent-green) 0%, #2ec27e 100%);
            border: none;
            border-radius: 14px;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 1.5rem;
            font-family: 'Noto Sans JP', sans-serif;
        }

        .start-call-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(38, 162, 105, 0.4);
        }

        .start-call-btn:disabled {
            background: var(--border);
            color: var(--text-gray);
            cursor: not-allowed;
        }

        /* ========== ÈÄ≤Êçó„Éê„ÉºÔºàÊîπÂñÑÁâàÔºâ ========== */
        .progress-container {
            background: var(--bg-white);
            padding: 1rem 1rem 0.75rem;
            border-bottom: 2px solid var(--border);
        }

        .progress-phase {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .progress-phase-icon {
            font-size: 1.2rem;
        }

        .progress-phase-text {
            font-size: 1rem;
            font-weight: 700;
            color: var(--primary);
        }

        .progress-task {
            font-size: 0.85rem;
            color: var(--text-gray);
            margin-bottom: 0.75rem;
            padding: 0.5rem 0.75rem;
            background: #f0f6ff;
            border-radius: 8px;
            border-left: 3px solid var(--primary);
        }

        .progress-task strong {
            color: var(--text-dark);
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
            font-size: 0.85rem;
        }

        .step-label {
            font-weight: 700;
            color: var(--primary);
            font-size: 0.9rem;
        }

        .step-remaining {
            font-size: 0.8rem;
            color: var(--text-gray);
        }

        .progress-bar {
            height: 12px;
            background: var(--border);
            border-radius: 6px;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary) 0%, var(--accent-green) 100%);
            border-radius: 6px;
            transition: width 0.4s ease;
        }

        /* ========== „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ ========== */
        .main {
            max-width: 600px;
            margin: 0 auto;
            padding: 1rem;
            padding-bottom: 160px;
        }

        /* „Çπ„ÉÜ„ÉÉ„Éó„Ç´„Éº„Éâ */
        .step-card {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: 0 2px 15px var(--shadow);
            animation: stepFadeIn 0.3s ease-out;
        }

        @keyframes stepFadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .step-card.hidden {
            display: none;
        }

        /* ========== „Éà„Éº„ÇØ„Çπ„ÇØ„É™„Éó„ÉàÔºàË™≠„Åø‰∏ä„ÅíÈÉ®ÂàÜÔºâ========== */
        .talk-script {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            border-radius: 16px;
            padding: 1.25rem;
            margin: 1rem 0;
            position: relative;
        }

        .talk-script-label {
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            background: var(--primary);
            color: white;
            padding: 0.3rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            position: absolute;
            top: -10px;
            left: 1rem;
        }

        .talk-script-content {
            font-size: 1.1rem;
            line-height: 1.9;
            color: var(--text-dark);
            padding-top: 0.5rem;
        }

        .talk-script-content .highlight {
            background: linear-gradient(transparent 60%, #fef08a 60%);
            font-weight: 700;
            padding: 0 2px;
        }

        .talk-script-content ruby {
            ruby-position: over;
        }

        .talk-script-content rt {
            font-size: 0.6rem;
            color: var(--text-gray);
        }

        /* ========== „Éï„É≠„Éº„ÉÜ„Ç£„É≥„Ç∞Âõ∞„Å£„Åü„Éú„Çø„É≥ ========== */
        .floating-help-btn {
            position: fixed;
            bottom: 90px;
            right: 16px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(238, 90, 36, 0.4);
            z-index: 98;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .floating-help-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 25px rgba(238, 90, 36, 0.5);
        }

        .floating-help-btn:active {
            transform: scale(0.95);
        }

        .floating-help-btn.hidden {
            display: none;
        }

        /* „Éò„É´„Éó„Éë„Éç„É´ */
        .help-panel {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-radius: 20px 20px 0 0;
            box-shadow: 0 -4px 30px rgba(0,0,0,0.2);
            z-index: 200;
            transform: translateY(100%);
            transition: transform 0.3s ease-out;
            max-height: 60vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .help-panel.show {
            transform: translateY(0);
        }

        .help-panel-header {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }

        .help-panel-header h3 {
            font-size: 1.1rem;
            font-weight: 700;
        }

        .help-panel-close {
            background: rgba(255,255,255,0.25);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.3rem;
            cursor: pointer;
        }

        .help-panel-body {
            padding: 1rem;
            overflow-y: auto;
            flex: 1;
        }

        .help-panel-buttons {
            display: grid;
            gap: 0.75rem;
        }

        .step-title {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--primary);
        }

        /* „Éà„Éº„ÇØË°®Á§∫„Ç®„É™„Ç¢ */
        .talk-display {
            background: #f8f7f6;
            border-left: 4px solid var(--primary);
            padding: 1.2rem;
            margin: 1rem 0;
            border-radius: 0 12px 12px 0;
            font-size: 1.05rem;
            line-height: 1.9;
        }

        .talk-display .highlight {
            background: linear-gradient(transparent 60%, #fef08a 60%);
            font-weight: 500;
        }

        .talk-display.warning {
            border-left-color: var(--accent-yellow);
            background: #fffbeb;
        }

        .talk-display.tip {
            border-left-color: var(--accent-green);
            background: #f4fbf7;
        }

        .talk-note {
            font-size: 0.9rem;
            color: var(--text-gray);
            margin-top: 0.5rem;
        }

        /* ÈÅ∏ÊäûËÇ¢„Éú„Çø„É≥ */
        .choices {
            display: grid;
            gap: 0.875rem;
            margin: 1.5rem 0;
        }

        .choices.two-col {
            grid-template-columns: 1fr 1fr;
        }

        .choice-btn {
            min-height: 60px;
            padding: 1rem;
            background: var(--bg-white);
            border: 2px solid var(--border);
            border-radius: 14px;
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-dark);
            cursor: pointer;
            transition: all 0.15s ease-out;
            text-align: center;
            font-family: 'Noto Sans JP', sans-serif;
            position: relative;
            overflow: hidden;
        }

        .choice-btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(26, 95, 180, 0.15);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }

        .choice-btn:hover {
            border-color: var(--primary);
            background: #f0f6ff;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.12);
        }

        .choice-btn:active {
            transform: scale(0.95) translateY(0);
            box-shadow: none;
            transition: transform 0.1s;
        }

        .choice-btn:active::after {
            width: 250px;
            height: 250px;
        }

        .choice-btn .recommend-badge {
            position: absolute;
            top: -2px;
            right: -2px;
            background: var(--accent-yellow);
            color: #5d4e00;
            font-size: 0.65rem;
            font-weight: 700;
            padding: 0.2rem 0.5rem;
            border-radius: 0 12px 0 8px;
        }

        .choice-btn.primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            border: none;
            box-shadow: 0 4px 12px rgba(26, 95, 180, 0.3);
        }

        .choice-btn.primary:hover {
            box-shadow: 0 6px 20px rgba(26, 95, 180, 0.4);
            background: linear-gradient(135deg, #1557a0 0%, var(--primary) 100%);
        }

        .choice-btn.primary:hover {
            box-shadow: 0 4px 15px rgba(26, 95, 180, 0.4);
        }

        .choice-btn.success {
            background: linear-gradient(135deg, var(--accent-green) 0%, #2ec27e 100%);
            color: white;
            border: none;
        }

        .choice-btn.warning {
            background: linear-gradient(135deg, #e5a50a 0%, var(--accent-yellow) 100%);
            color: white;
            border: none;
        }

        .choice-btn.danger {
            background: linear-gradient(135deg, #c01c28 0%, var(--secondary) 100%);
            color: white;
            border: none;
        }

        .choice-btn .btn-sub {
            display: block;
            font-size: 0.8rem;
            opacity: 0.8;
            margin-top: 0.3rem;
        }

        /* Âàá„ÇäËøî„Åó„Éò„É´„Éó„Ç®„É™„Ç¢ */
        .help-area {
            margin-top: 1.5rem;
            padding-top: 1rem;
            border-top: 1px dashed var(--border);
        }

        .help-title {
            font-size: 0.9rem;
            color: var(--text-gray);
            margin-bottom: 0.75rem;
        }

        .help-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .help-btn {
            padding: 0.6rem 1rem;
            background: #fff5f5;
            border: 1px solid #ffe0e0;
            border-radius: 20px;
            font-size: 0.85rem;
            color: var(--secondary);
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Noto Sans JP', sans-serif;
        }

        .help-btn:hover {
            background: #ffe0e0;
        }

        /* ========== „É¢„Éº„ÉÄ„É´ ========== */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            display: flex;
            align-items: flex-end;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
            cursor: pointer;
        }

        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: var(--bg-white);
            width: 100%;
            max-width: 600px;
            max-height: 85vh;
            border-radius: 20px 20px 0 0;
            overflow: hidden;
            transform: translateY(100%);
            transition: transform 0.3s ease-out;
            cursor: default;
            display: flex;
            flex-direction: column;
        }

        .modal-overlay.show .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }

        .modal-header h3 {
            font-size: 1rem;
            font-weight: 700;
            flex: 1;
        }

        .modal-close {
            background: rgba(255,255,255,0.3);
            border: none;
            color: white;
            min-width: 50px;
            min-height: 50px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.75rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 0.75rem;
        }

        .modal-close:hover {
            background: rgba(255,255,255,0.5);
            transform: scale(1.1);
        }

        .modal-close:active {
            transform: scale(0.9);
        }

        .modal-body {
            padding: 1.5rem;
            overflow-y: auto;
            flex: 1;
        }

        .modal-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--border);
            flex-shrink: 0;
            background: var(--bg-main);
        }

        .modal-close-btn {
            width: 100%;
            min-height: 54px;
            padding: 1rem;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Noto Sans JP', sans-serif;
        }

        .modal-close-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(26, 95, 180, 0.4);
        }

        .modal-close-btn:active {
            transform: scale(0.98);
        }

        .modal-action-link {
            display: block;
            text-align: center;
            margin-top: 0.75rem;
            padding: 0.75rem;
            background: linear-gradient(135deg, var(--accent-green) 0%, #2ec27e 100%);
            color: white;
            text-decoration: none;
            border-radius: 12px;
            font-size: 0.95rem;
            font-weight: 700;
            cursor: pointer;
            border: none;
            width: 100%;
            font-family: 'Noto Sans JP', sans-serif;
        }

        .modal-action-link:hover {
            box-shadow: 0 4px 15px rgba(38, 162, 105, 0.4);
        }

        .modal-talk {
            background: #f8f7f6;
            border-left: 4px solid var(--accent-green);
            padding: 1rem;
            border-radius: 0 8px 8px 0;
            margin-bottom: 1rem;
            line-height: 1.8;
        }

        .modal-talk .highlight {
            background: linear-gradient(transparent 60%, #fef08a 60%);
            font-weight: 500;
        }

        .modal-note {
            font-size: 0.85rem;
            color: var(--text-gray);
            padding: 0.75rem;
            background: #fffbeb;
            border-radius: 8px;
            margin-top: 0.5rem;
        }

        /* ========== „Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥„Éê„Éº ========== */
        .nav-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, var(--bg-white) 0%, var(--bg-white) 90%, rgba(255,255,255,0.9) 100%);
            border-top: 1px solid var(--border);
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 0.75rem;
            z-index: 99;
            box-shadow: 0 -4px 20px var(--shadow);
        }

        .nav-btn {
            min-width: 120px;
            min-height: 52px;
            padding: 0.875rem 1.25rem;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Noto Sans JP', sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .nav-btn.back {
            background: linear-gradient(135deg, #5e5c64 0%, #77767b 100%);
            color: white;
            flex: 1;
        }

        .nav-btn.back:hover {
            background: linear-gradient(135deg, #4a484d 0%, #5e5c64 100%);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .nav-btn.back:disabled {
            background: var(--border);
            color: var(--text-gray);
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .nav-btn.forward {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            flex: 1;
        }

        .nav-btn.forward:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(26, 95, 180, 0.4);
        }

        .nav-btn.forward:disabled {
            background: var(--border);
            color: var(--text-gray);
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .nav-btn.reset {
            min-width: auto;
            padding: 0.75rem;
            background: rgba(224, 27, 36, 0.1);
            color: var(--secondary);
            font-size: 0.85rem;
            font-weight: 500;
        }

        .nav-btn.reset:hover {
            background: rgba(224, 27, 36, 0.2);
        }

        .btn-count {
            font-size: 0.75rem;
            opacity: 0.8;
            margin-left: 0.25rem;
        }

        @media (max-width: 400px) {
            .nav-btn {
                min-width: 90px;
                font-size: 1rem;
                padding: 0.75rem 1rem;
            }
            .nav-btn.reset {
                font-size: 0.75rem;
                padding: 0.5rem;
            }
        }

        /* ========== ÁµÇ‰∫ÜÁîªÈù¢ ========== */
        .end-screen {
            text-align: center;
            padding: 2rem 1rem;
        }

        .end-screen.success {
            background: linear-gradient(135deg, var(--accent-green) 0%, #2ec27e 100%);
            color: white;
            border-radius: 16px;
        }

        .end-screen .icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .end-screen h2 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .checklist {
            background: rgba(255,255,255,0.2);
            border-radius: 12px;
            padding: 1rem;
            margin: 1rem 0;
            text-align: left;
        }

        .checklist-item {
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .checklist-item:last-child {
            border-bottom: none;
        }

        .end-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 1.5rem;
        }

        .end-btn {
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Noto Sans JP', sans-serif;
        }

        .end-btn.primary {
            background: white;
            color: var(--accent-green);
        }

        .end-btn.secondary {
            background: rgba(255,255,255,0.2);
            color: white;
        }

        /* „Éà„Éº„ÇØ„Éë„Çø„Éº„É≥Âàá„ÇäÊõø„Åà */
        .pattern-toggle {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .pattern-btn {
            flex: 1;
            padding: 0.5rem;
            background: var(--bg-main);
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Noto Sans JP', sans-serif;
        }

        .pattern-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .pattern-content {
            display: none;
        }

        .pattern-content.active {
            display: block;
        }

        /* ========== Á¢∫Ë™ç„É¢„Éº„ÉÄ„É´ ========== */
        .confirm-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            z-index: 3000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s;
        }

        .confirm-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .confirm-box {
            background: white;
            border-radius: 20px;
            width: 90%;
            max-width: 360px;
            padding: 2rem 1.5rem;
            text-align: center;
            transform: scale(0.9);
            transition: transform 0.2s;
        }

        .confirm-modal.show .confirm-box {
            transform: scale(1);
        }

        .confirm-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .confirm-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 0.5rem;
        }

        .confirm-message {
            font-size: 0.95rem;
            color: var(--text-gray);
            margin-bottom: 1.5rem;
        }

        .confirm-buttons {
            display: flex;
            gap: 0.75rem;
        }

        .confirm-btn {
            flex: 1;
            padding: 0.875rem;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            font-family: 'Noto Sans JP', sans-serif;
            transition: all 0.2s;
        }

        .confirm-btn.cancel {
            background: var(--bg-main);
            color: var(--text-dark);
        }

        .confirm-btn.danger {
            background: linear-gradient(135deg, var(--secondary) 0%, #c71c1c 100%);
            color: white;
        }

        /* ========== „ÉÅ„É•„Éº„Éà„É™„Ç¢„É´ ========== */
        .tutorial-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 5000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }

        .tutorial-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .tutorial-card {
            background: white;
            border-radius: 20px;
            width: 90%;
            max-width: 400px;
            padding: 2rem 1.5rem;
            text-align: center;
        }

        .tutorial-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 1.5rem;
        }

        .tutorial-legend {
            display: grid;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            text-align: left;
        }

        .tutorial-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            background: var(--bg-main);
            border-radius: 10px;
        }

        .tutorial-color {
            width: 30px;
            height: 30px;
            border-radius: 8px;
            flex-shrink: 0;
        }

        .tutorial-color.blue {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
        }

        .tutorial-color.green {
            background: linear-gradient(135deg, var(--accent-green) 0%, #2ec27e 100%);
        }

        .tutorial-color.red {
            background: linear-gradient(135deg, var(--secondary) 0%, #c71c1c 100%);
        }

        .tutorial-color.white {
            background: white;
            border: 2px solid var(--border);
        }

        .tutorial-text {
            font-size: 0.9rem;
        }

        .tutorial-close-btn {
            width: 100%;
            padding: 1rem;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            font-family: 'Noto Sans JP', sans-serif;
        }

        /* „Çπ„Éû„ÉõÂØæÂøú */
        @media (max-width: 600px) {
            .header h1 {
                font-size: 1.1rem;
            }

            .choices.two-col {
                grid-template-columns: 1fr;
            }

            .choice-btn {
                padding: 1rem;
            }

            .login-box {
                padding: 2rem 1.5rem;
            }

            .login-logo {
                width: 70px;
                height: 70px;
                font-size: 2rem;
            }
        }

        /* ========== Êû∂Èõª„É≠„Ç∞Ê©üËÉΩ ========== */
        .log-btn {
            position: fixed;
            top: 10px;
            right: 10px;
            z-index: 101;
            background: linear-gradient(135deg, var(--accent-purple) 0%, #c061cb 100%);
            color: white;
            border: none;
            padding: 0.6rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(145, 65, 172, 0.3);
            transition: all 0.2s;
            font-family: 'Noto Sans JP', sans-serif;
        }

        .log-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(145, 65, 172, 0.4);
        }

        .log-btn .badge {
            background: white;
            color: var(--accent-purple);
            padding: 0.1rem 0.4rem;
            border-radius: 10px;
            font-size: 0.7rem;
            margin-left: 0.3rem;
        }

        /* Êû∂ÈõªÈñãÂßã„Éï„Ç©„Éº„É† */
        .call-start-form {
            background: linear-gradient(135deg, #f0f6ff 0%, #e8f5e9 100%);
            border: 2px solid var(--primary-light);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }

        .call-start-form h3 {
            color: var(--primary);
            font-size: 1rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .form-row {
            margin-bottom: 1rem;
        }

        .form-row:last-child {
            margin-bottom: 0;
        }

        .form-label {
            display: block;
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 0.4rem;
        }

        .form-label .required {
            color: var(--secondary);
            margin-left: 0.25rem;
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 1rem;
            font-family: 'Noto Sans JP', sans-serif;
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(26, 95, 180, 0.1);
        }

        .form-row-inline {
            display: flex;
            gap: 0.5rem;
            align-items: flex-end;
        }

        .form-row-inline .form-input {
            flex: 1;
        }

        .form-btn-small {
            padding: 0.75rem;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .form-btn-small.add {
            background: var(--accent-green);
            color: white;
        }

        .form-btn-small.delete {
            background: var(--secondary);
            color: white;
        }

        /* „ÉÅ„Çß„ÉÉ„ÇØ„Éú„ÉÉ„ÇØ„Çπ„Éª„É©„Ç∏„Ç™ */
        .form-checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
        }

        .form-checkbox-label {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.5rem 0.75rem;
            background: white;
            border: 2px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.9rem;
        }

        .form-checkbox-label:has(input:checked) {
            border-color: var(--primary);
            background: #f0f6ff;
        }

        .form-checkbox-label input {
            width: 18px;
            height: 18px;
            accent-color: var(--primary);
        }

        /* „É≠„Ç∞‰∏ÄË¶ß„É¢„Éº„ÉÄ„É´ */
        .log-list-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }

        .log-list-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .log-list-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            width: 95%;
            max-width: 500px;
            max-height: 90vh;
            background: var(--bg-white);
            border-radius: 20px;
            overflow: hidden;
            transition: transform 0.3s;
            display: flex;
            flex-direction: column;
        }

        .log-list-modal.show .log-list-container {
            transform: translate(-50%, -50%) scale(1);
        }

        .log-list-header {
            background: linear-gradient(135deg, var(--accent-purple) 0%, #c061cb 100%);
            color: white;
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .log-list-header h3 {
            font-size: 1.1rem;
            font-weight: 700;
        }

        .log-list-close {
            background: rgba(255,255,255,0.25);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.3rem;
            cursor: pointer;
        }

        .log-list-toolbar {
            padding: 0.75rem 1rem;
            background: var(--bg-main);
            border-bottom: 1px solid var(--border);
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .log-filter-select {
            padding: 0.5rem;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 0.85rem;
            background: white;
        }

        .log-list-body {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
        }

        .log-item {
            background: white;
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .log-item:hover {
            border-color: var(--primary);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .log-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .log-item-date {
            font-size: 0.8rem;
            color: var(--text-gray);
        }

        .log-item-result {
            font-size: 0.75rem;
            padding: 0.2rem 0.6rem;
            border-radius: 10px;
            font-weight: 700;
        }

        .log-item-result.success {
            background: #d3f9d8;
            color: #1b5e20;
        }

        .log-item-result.recall {
            background: #fff3e0;
            color: #ef6c00;
        }

        .log-item-result.not-target {
            background: #f3e5f5;
            color: #7b1fa2;
        }

        .log-item-company {
            font-weight: 700;
            font-size: 1rem;
            margin-bottom: 0.25rem;
        }

        .log-item-caller {
            font-size: 0.85rem;
            color: var(--text-gray);
        }

        .log-list-footer {
            padding: 1rem;
            border-top: 1px solid var(--border);
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .log-action-btn {
            flex: 1;
            min-width: 120px;
            padding: 0.75rem;
            border: none;
            border-radius: 10px;
            font-size: 0.9rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Noto Sans JP', sans-serif;
        }

        .log-action-btn.download {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
        }

        .log-action-btn.delete-all {
            background: rgba(224, 27, 36, 0.1);
            color: var(--secondary);
        }

        /* „É≠„Ç∞Ë©≥Á¥∞„É¢„Éº„ÉÄ„É´ */
        .log-detail-content {
            padding: 1.5rem;
        }

        .log-detail-section {
            margin-bottom: 1.5rem;
        }

        .log-detail-section h4 {
            font-size: 0.9rem;
            color: var(--text-gray);
            margin-bottom: 0.5rem;
            padding-bottom: 0.25rem;
            border-bottom: 1px solid var(--border);
        }

        .log-detail-row {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            font-size: 0.95rem;
        }

        .log-detail-row .label {
            color: var(--text-gray);
        }

        .log-detail-row .value {
            font-weight: 500;
            text-align: right;
            max-width: 60%;
        }

        .log-detail-memo {
            background: var(--bg-main);
            padding: 0.75rem;
            border-radius: 8px;
            font-size: 0.9rem;
            line-height: 1.6;
            white-space: pre-wrap;
        }

        .log-detail-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .log-detail-btn {
            flex: 1;
            padding: 0.75rem;
            border: none;
            border-radius: 10px;
            font-size: 0.9rem;
            font-weight: 700;
            cursor: pointer;
            font-family: 'Noto Sans JP', sans-serif;
        }

        .log-detail-btn.image {
            background: linear-gradient(135deg, var(--accent-green) 0%, #2ec27e 100%);
            color: white;
        }

        .log-detail-btn.delete {
            background: rgba(224, 27, 36, 0.1);
            color: var(--secondary);
        }

        /* ÁîªÂÉèÂá∫ÂäõÁî®„ÅÆ„Ç≠„É£„Éó„ÉÅ„É£„Ç®„É™„Ç¢ÔºàÈùûË°®Á§∫Ôºâ */
        .log-capture {
            position: fixed;
            left: -9999px;
            top: 0;
            width: 400px;
            background: white;
            padding: 1.5rem;
            font-family: 'Noto Sans JP', sans-serif;
        }

        .log-capture-header {
            text-align: center;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--primary);
        }

        .log-capture-header h2 {
            color: var(--primary);
            font-size: 1.2rem;
        }

        .log-capture-header .date {
            color: var(--text-gray);
            font-size: 0.85rem;
        }

        .log-capture-body {
            font-size: 0.9rem;
        }

        .log-capture-row {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px dotted var(--border);
        }

        .log-capture-footer {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 2px solid var(--primary);
            text-align: center;
            font-size: 0.8rem;
            color: var(--text-gray);
        }

        .empty-logs {
            text-align: center;
            padding: 3rem 1rem;
            color: var(--text-gray);
        }

        .empty-logs .icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        @media (max-width: 600px) {
            .log-btn {
                padding: 0.5rem 0.75rem;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <!-- „Éë„Çπ„ÉØ„Éº„Éâ‰øùË≠∑ÁîªÈù¢ -->
    <div id="loginScreen" class="login-screen">
        <div class="login-box">
            <div class="login-logo">üéØ</div>
            <div class="login-company">MIXEDÊ†™Âºè‰ºöÁ§æ</div>
            <div class="login-title">Êû∂Èõª„Éä„Éì</div>
            <div class="login-input-group">
                <input type="password" id="passwordInput" class="login-input" placeholder="„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ" autocomplete="off">
            </div>
            <button id="loginBtn" class="login-btn">„É≠„Ç∞„Ç§„É≥</button>
            <div id="loginError" class="login-error">„Éë„Çπ„ÉØ„Éº„Éâ„ÅåÊ≠£„Åó„Åè„ÅÇ„Çä„Åæ„Åõ„Çì</div>
        </div>
    </div>

    <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
    <div id="appContent" class="app-content">
        <header class="header">
            <div class="header-top">
                <h1>üéØ Êû∂Èõª„Éä„Éì</h1>
            </div>
            <div class="page-tabs">
                <a href="index.html" class="page-tab">üìñ „Éû„Éã„É•„Ç¢„É´</a>
                <a href="navi.html" class="page-tab active">üéØ Êû∂Èõª„Éä„Éì</a>
            </div>
        </header>

        <!-- Êû∂ÈõªËÄÖÈÅ∏ÊäûÁîªÈù¢ -->
        <div class="caller-select-screen" id="callerSelectScreen">
            <div class="caller-select-card">
                <div class="caller-select-title">üìû Êû∂Èõª„ÇíÈñãÂßã„Åô„Çã</div>
                <div class="caller-select-subtitle">Êû∂ÈõªËÄÖ„ÇíÈÅ∏Êäû„Åó„ÄÅ‰ºöÁ§æÊÉÖÂ†±„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ</div>

                <label class="form-label">Êû∂ÈõªËÄÖ„ÇíÈÅ∏Êäû<span class="required">*</span></label>
                <div class="caller-buttons" id="callerButtons">
                    <!-- ÂãïÁöÑ„Å´ÁîüÊàê -->
                </div>

                <div class="caller-input-section">
                    <div class="form-row">
                        <label class="form-label">‰ºöÁ§æÂêç<span class="required">*</span></label>
                        <input type="text" class="form-input" id="companyNameInput" placeholder="‰æãÔºöÊ†™Âºè‰ºöÁ§æ‚óã‚óã">
                    </div>
                    <div class="form-row">
                        <label class="form-label">ÈõªË©±Áï™Âè∑</label>
                        <input type="tel" class="form-input" id="phoneNumberInput" placeholder="‰æãÔºö06-1234-5678">
                    </div>
                </div>

                <button class="start-call-btn" id="startCallBtn" disabled>Êû∂ÈõªÈñãÂßã ‚Üí</button>
            </div>
        </div>

        <!-- „Çπ„ÉÜ„ÉÉ„ÉóÁîªÈù¢ -->
        <div id="stepScreen" style="display: none;">
            <div class="progress-container" id="progressContainer">
                <div class="progress-phase">
                    <span class="progress-phase-icon" id="phaseIcon">üìç</span>
                    <span class="progress-phase-text" id="phaseText">Â∞éÂÖ•„Éï„Çß„Éº„Ç∫</span>
                </div>
                <div class="progress-task" id="progressTask">
                    <strong>‰ªä„ÇÑ„Çã„Åì„Å®:</strong> <span id="taskText">Âèó‰ªò„ÇíÁ™ÅÁ†¥„Åô„Çã</span>
                </div>
                <div class="progress-info">
                    <span class="step-label" id="stepLabel">STEP 1ÔºàÊÆã„ÇäÁ¥Ñ9ÁîªÈù¢Ôºâ</span>
                    <span class="step-remaining" id="stepRemaining"></span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 10%"></div>
                </div>
            </div>

            <main class="main" id="mainContent">
                <!-- „Çπ„ÉÜ„ÉÉ„Éó„ÅØJavaScript„ÅßÂãïÁöÑ„Å´ÁîüÊàê -->
            </main>
        </div>

        <!-- „Éï„É≠„Éº„ÉÜ„Ç£„É≥„Ç∞Âõ∞„Å£„Åü„Éú„Çø„É≥ -->
        <button class="floating-help-btn hidden" id="floatingHelpBtn">üÜò</button>

        <!-- „Éò„É´„Éó„Éë„Éç„É´ -->
        <div class="help-panel" id="helpPanel">
            <div class="help-panel-header">
                <h3>üÜò Âõ∞„Å£„Åü„Å®„Åç„ÅÆÂàá„ÇäËøî„Åó</h3>
                <button class="help-panel-close" id="helpPanelClose">√ó</button>
            </div>
            <div class="help-panel-body">
                <div class="help-panel-buttons" id="helpPanelButtons">
                    <!-- ÂãïÁöÑ„Å´ÁîüÊàê -->
                </div>
            </div>
        </div>

        <nav class="nav-bar" id="navBar" style="display: none;">
            <button class="nav-btn back" id="backBtn" disabled>‚Üê Êàª„Çã</button>
            <button class="nav-btn reset" id="resetBtn">üîÑ ÊúÄÂàù„Åã„Çâ</button>
            <button class="nav-btn forward" id="forwardBtn" disabled>ÈÄ≤„ÇÄ ‚Üí</button>
        </nav>
    </div>

    <!-- Á¢∫Ë™ç„É¢„Éº„ÉÄ„É´ -->
    <div class="confirm-modal" id="confirmModal">
        <div class="confirm-box">
            <div class="confirm-icon" id="confirmIcon">‚ö†Ô∏è</div>
            <div class="confirm-title" id="confirmTitle">Á¢∫Ë™ç</div>
            <div class="confirm-message" id="confirmMessage">Êú¨ÂΩì„Å´ÁµÇ‰∫Ü„Åó„Åæ„Åô„ÅãÔºü</div>
            <div class="confirm-buttons">
                <button class="confirm-btn cancel" id="confirmCancel">„ÅÑ„ÅÑ„Åà</button>
                <button class="confirm-btn danger" id="confirmOk">„ÅØ„ÅÑ</button>
            </div>
        </div>
    </div>

    <!-- „ÉÅ„É•„Éº„Éà„É™„Ç¢„É´ -->
    <div class="tutorial-overlay" id="tutorialOverlay">
        <div class="tutorial-card">
            <div class="tutorial-title">„Éú„Çø„É≥„ÅÆËâ≤„ÅÆÊÑèÂë≥</div>
            <div class="tutorial-legend">
                <div class="tutorial-item">
                    <div class="tutorial-color blue"></div>
                    <div class="tutorial-text"><strong>ÈùíËâ≤</strong> = „Åä„Åô„Åô„ÇÅ„ÉªÊ¨°„Å´ÈÄ≤„ÇÄ</div>
                </div>
                <div class="tutorial-item">
                    <div class="tutorial-color green"></div>
                    <div class="tutorial-text"><strong>Á∑ëËâ≤</strong> = ÊàêÂäü„ÉªËâØ„ÅÑÂèçÂøú</div>
                </div>
                <div class="tutorial-item">
                    <div class="tutorial-color red"></div>
                    <div class="tutorial-text"><strong>Ëµ§Ëâ≤</strong> = ÁµÇ‰∫Ü„ÉªÊ≥®ÊÑè„ÅåÂøÖË¶Å</div>
                </div>
                <div class="tutorial-item">
                    <div class="tutorial-color white"></div>
                    <div class="tutorial-text"><strong>ÁôΩËâ≤</strong> = „Åù„ÅÆ‰ªñ„ÅÆÈÅ∏ÊäûËÇ¢</div>
                </div>
            </div>
            <button class="tutorial-close-btn" id="tutorialClose">„Çè„Åã„Çä„Åæ„Åó„Åü</button>
        </div>
    </div>

    <!-- „É¢„Éº„ÉÄ„É´ -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Âàá„ÇäËøî„Åó„Éà„Éº„ÇØ</h3>
                <button class="modal-close" id="modalClose">√ó</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- ÂãïÁöÑ„Å´ÂÜÖÂÆπ„ÇíÊåøÂÖ• -->
            </div>
            <div class="modal-footer">
                <button class="modal-close-btn" id="modalCloseBtn">‚úì Èñâ„Åò„Çã</button>
                <button class="modal-action-link" id="modalActionBtn" style="display: none;">üéâ „Ç¢„ÉùÁç≤Âæó„Å∏ÈÄ≤„ÇÄ</button>
            </div>
        </div>
    </div>

    <!-- „É≠„Ç∞„Éú„Çø„É≥ÔºàÁîªÈù¢Âè≥‰∏äÂõ∫ÂÆöÔºâ -->
    <button class="log-btn" id="logBtn" style="display: none;">
        üìã „É≠„Ç∞<span class="badge" id="logBadge">0</span>
    </button>

    <!-- „É≠„Ç∞‰∏ÄË¶ß„É¢„Éº„ÉÄ„É´ -->
    <div class="log-list-modal" id="logListModal">
        <div class="log-list-container">
            <div class="log-list-header">
                <h3>üìã Êû∂Èõª„É≠„Ç∞‰∏ÄË¶ß</h3>
                <button class="log-list-close" id="logListClose">√ó</button>
            </div>
            <div class="log-list-toolbar">
                <select class="log-filter-select" id="logFilterCaller">
                    <option value="">ÂÖ®„Å¶„ÅÆÊû∂ÈõªËÄÖ</option>
                </select>
                <select class="log-filter-select" id="logFilterResult">
                    <option value="">ÂÖ®„Å¶„ÅÆÁµêÊûú</option>
                    <option value="success">„Ç¢„ÉùÁç≤Âæó</option>
                    <option value="recall">ÂÜçÊû∂Èõª</option>
                    <option value="not-target">ÂØæË±°Â§ñ</option>
                </select>
                <select class="log-filter-select" id="logFilterDate">
                    <option value="">ÂÖ®ÊúüÈñì</option>
                    <option value="today">‰ªäÊó•</option>
                    <option value="yesterday">Êò®Êó•</option>
                    <option value="3days">3Êó•Èñì</option>
                    <option value="week">1ÈÄ±Èñì</option>
                </select>
            </div>
            <div class="log-list-body" id="logListBody">
                <!-- „É≠„Ç∞‰∏ÄË¶ß„ÅØJavaScript„ÅßÂãïÁöÑÁîüÊàê -->
            </div>
            <div class="log-list-footer">
                <button class="log-action-btn download" id="logDownloadCsv">üì• CSV„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ</button>
                <button class="log-action-btn delete-all" id="logDeleteAll">üóëÔ∏è ÂÖ®ÂâäÈô§</button>
            </div>
        </div>
    </div>

    <!-- „É≠„Ç∞Ë©≥Á¥∞„É¢„Éº„ÉÄ„É´ -->
    <div class="log-list-modal" id="logDetailModal">
        <div class="log-list-container">
            <div class="log-list-header">
                <h3>üìÑ „É≠„Ç∞Ë©≥Á¥∞</h3>
                <button class="log-list-close" id="logDetailClose">√ó</button>
            </div>
            <div class="log-detail-content" id="logDetailContent">
                <!-- ÂãïÁöÑ„Å´ÁîüÊàê -->
            </div>
        </div>
    </div>

    <!-- ÁîªÂÉèÂá∫ÂäõÁî®„Ç≠„É£„Éó„ÉÅ„É£„Ç®„É™„Ç¢ -->
    <div class="log-capture" id="logCapture">
        <div class="log-capture-header">
            <h2>üìû Êû∂ÈõªË®òÈå≤</h2>
            <div class="date" id="captureDate"></div>
        </div>
        <div class="log-capture-body" id="captureBody">
            <!-- ÂãïÁöÑ„Å´ÁîüÊàê -->
        </div>
        <div class="log-capture-footer">
            MIXEDÊ†™Âºè‰ºöÁ§æ Êû∂Èõª„Éä„Éì
        </div>
    </div>

    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script>
        // ========== „Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥„Ç∑„Çπ„ÉÜ„É† ==========
        const STEPS = {
            'step1': {
                title: 'STEP 1: Â∞éÂÖ•ÔºàÂèó‰ªòÁ™ÅÁ†¥Ôºâ',
                name: 'Â∞éÂÖ•ÔºàÂèó‰ªòÁ™ÅÁ†¥Ôºâ',
                progress: 10,
                content: `
                    <div class="talk-display">
                        „ÅäÂøô„Åó„ÅÑ„Å®„Åì„ÇçÊÅê„ÇåÂÖ•„Çä„Åæ„Åô„ÄÇ<br>
                        <span class="highlight">„Ç∞„Éº„Ç∞„É´„Éû„ÉÉ„ÉóÊíÆÂΩ±‰ºöÁ§æ „Éü„ÉÉ„ÇØ„Çπ„ÅÆ‚óã‚óã</span>„Åß„Åô„ÄÇ<br><br>
                        „Äá„ÄáÔºà‰ºöÁ§æÂêçÔºâ„ÅÆ<span class="highlight">‰ª£Ë°®ËÄÖÊßò</span>„ÅØ„ÅÑ„Çâ„Å£„Åó„ÇÉ„ÅÑ„Åæ„Åô„Åß„Åó„Çá„ÅÜ„ÅãÔºü
                    </div>
                    <div class="talk-display warning">
                        <strong>‚ö†Ô∏è „Åì„Åì„Åß‰ºöÁ§æÂêç„Çí„Åó„Å£„Åã„ÇäÁ¢∫Ë™ç„Åô„Çã</strong><br>
                        <span class="talk-note">ÈõªË©±Â∏≥„ÅÆÊÉÖÂ†±„Å®ÂÆüÈöõ„ÅÆ‰ºöÁ§æÂêç„ÅåÈÅï„ÅÜÂ†¥Âêà„Åå„ÅÇ„Çä„Åæ„Åô</span>
                    </div>
                `,
                choices: [
                    { text: '‰ª£Ë°®ËÄÖ„Å´„Å§„Å™„Åå„Å£„Åü', sub: '‚Üí ÊôÇÈñìÁ¢∫Ë™ç„Å∏', next: 'step2', class: 'primary' },
                    { text: '‰∏çÂú®„Å®Ë®Ä„Çè„Çå„Åü', sub: '‚Üí ÂÜçÊû∂ÈõªÁ¢∫Ë™ç', next: 'step1b', class: '' },
                    { text: '‰Ωï„ÅÆ‰ª∂Ôºü„Å®ËÅû„Åã„Çå„Åü', sub: '‚Üí Âàá„ÇäËøî„ÅóË°®Á§∫', action: 'showHelp', helpId: 'whatCall', class: '' },
                    { text: 'Âñ∂Ê•≠„ÅØ„ÅÑ„Çâ„Å™„ÅÑ', sub: '‚Üí ÂÜçÊû∂Èõª„É™„Çπ„Éà„Å∏', next: 'endRecall', class: 'danger' }
                ],
                helps: [
                    { id: 'whatCall', label: '„Äå‰Ωï„ÅÆ‰ª∂Ôºü„Äç', title: '„ÄåÔºàÂèó‰ªòÔºâ‰Ωï„ÅÆ‰ª∂„Åß„Åó„Çá„ÅÜ„ÅãÔºü„Äç„Å∏„ÅÆÂàá„ÇäËøî„Åó', content: `
                        <div class="modal-talk">
                            <span class="highlight">„Ç∞„Éº„Ç∞„É´Êé≤Ëºâ„ÅÆ‰ª∂</span>„Å´„Å™„Çä„Åæ„Åô„ÅÆ„Åß„ÄÅ„Åî‰∏çÂú®„Åß„Åó„Åü„Çâ„Åæ„ÅüÊîπ„ÇÅ„Åæ„Åô„ÄÇÂ§±Á§º„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ
                        </div>
                        <div class="modal-note">
                            ‚Äª„Åù„Çå„Åß„ÇÇ„Åó„Å§„Åì„ÅèËÅû„ÅÑ„Å¶„Åè„ÇãÂ†¥Âêà<br>
                            ‚ÜíÔºà‰ºÅÊ•≠ÊÉÖÂ†±„ÅÆÂèñ„ÇäÊâ±„ÅÑ„Å´„Å™„Çä„Åæ„Åó„Å¶Ôºâ‰ª£Ë°®ËÄÖÊßòÂÆõ„ÅÆ‰ª∂„Å´„Å™„Çä„Åæ„Åô„ÅÆ„Åß„ÄÅÊÄ•„Åé„Åß„ÅØ„Å™„ÅÑ„ÅÆ„Åß„Åæ„ÅüÊîπ„ÇÅ„Åæ„Åô„ÄÇÂ§±Á§º„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ
                        </div>
                    `},
                    { id: 'whatList', label: '„Äå‰ΩïË¶ã„Å¶„Åã„Åë„Å¶„ÇãÔºü„Äç', title: '„Äå‰ΩïË¶ã„Å¶„Åã„Åë„Å¶„Çã„Çì„Åß„Åô„ÅãÔºü„Äç„Å∏„ÅÆÂàá„ÇäËøî„Åó', content: `
                        <div class="modal-talk">
                            <span class="highlight">ÈõªÂ≠êÈõªË©±Â∏≥„Åã„ÇâÈ†ÜÁï™„Å´</span>„ÅîÈÄ£Áµ°„Åï„Åõ„Å¶È†Ç„ÅÑ„Å¶„Åä„Çä„Åæ„Åô„ÄÇ
                        </div>
                        <div class="modal-note">
                            ‚Äª„Äå„É™„Çπ„Éà„Äç„Å®Ë®Ä„ÅÜ„ÅÆ„ÅØNGÔºÅ<br>
                            ‚ÄªÈùûÊé≤Ëºâ„É™„Çπ„Éà„ÅÆÂ†¥ÂêàÔºö„ÄåÂ∏ÇÂ§ñÂ±ÄÁï™„Åã„ÇâÈ†ÜÁï™„Å´„ÅîÈÄ£Áµ°„Åï„Åõ„Å¶È†Ç„ÅÑ„Å¶„Åä„Çä„Åæ„Åô„Äç
                        </div>
                    `}
                ]
            },
            'step1b': {
                title: 'STEP 1-B: ‰∏çÂú®ÂØæÂøú',
                name: '‰∏çÂú®ÂØæÂøú',
                progress: 10,
                content: `
                    <div class="talk-display">
                        „Ç∞„Éº„Ç∞„É´Êé≤Ëºâ„ÅÆ‰ª∂„Åß„ÅÆ„ÅîÈÄ£Áµ°„Å´„Å™„Çä„Åæ„Åô„Åå<br>
                        <span class="highlight">„ÅäÊòº„ÅãÂ§ïÊñπÈ†É</span>„Å´„ÅØÊàª„Çâ„Çå„Åæ„Åô„ÅãÔºü
                    </div>
                    <div class="talk-display warning">
                        <span class="talk-note">‚Äª‰∫åËÄÖÊäû‰∏Ä„ÅßËÅû„ÅèÔºà„Ç™„Éº„Éó„É≥„Å´ËÅû„Åã„Å™„ÅÑÔºâ</span>
                    </div>
                `,
                choices: [
                    { text: 'ÊôÇÈñì„ÇíÊïô„Åà„Å¶„Åè„Çå„Åü', sub: '‚Üí ÂÜçÊû∂Èõª‰∫àÁ¥Ñ', next: 'endRecallScheduled', class: 'success' },
                    { text: '„Çè„Åã„Çâ„Å™„ÅÑ/Êïô„Åà„Å¶„Åè„Çå„Å™„ÅÑ', sub: '‚Üí ÁµÇ‰∫Ü', next: 'endRecall', class: '' }
                ],
                helps: []
            },
            'step2': {
                title: 'STEP 2: ÊôÇÈñìÁ¢∫Ë™ç',
                name: 'ÊôÇÈñìÁ¢∫Ë™ç',
                progress: 20,
                content: `
                    <div class="talk-display">
                        Google„Éû„ÉÉ„Éó„ÅÆ„ÅäÂÜôÁúü„ÅÆ‰ª∂„Åß„ÅäÈõªË©±„Åï„Åõ„Å¶„ÅÑ„Åü„Å†„ÅÑ„Åü„ÅÆ„Åß„Åô„Åå„ÄÅ<br>
                        <span class="highlight">Âè™‰ªä„ÅäÊôÇÈñìÂ∞ë„ÅóÂ§ß‰∏àÂ§´„Åß„Åó„Çá„ÅÜ„ÅãÔºü</span>
                    </div>
                `,
                choices: [
                    { text: 'Â§ß‰∏àÂ§´/„Å©„ÅÜ„Åû', sub: '‚Üí GoogleÊ°àÂÜÖ„Å∏', next: 'step3', class: 'primary' },
                    { text: '‰ªäÂøô„Åó„ÅÑ', sub: '‚Üí ÊôÇÈñìÁ¢∫Ë™ç', action: 'showHelp', helpId: 'busy', class: '' }
                ],
                helps: [
                    { id: 'busy', label: '„Äå‰ªäÂøô„Åó„ÅÑ„Äç', title: '„Äå‰ªäÂøô„Åó„ÅÑ„Äç„Å∏„ÅÆÂØæÂøú', content: `
                        <div class="modal-talk">
                            „ÅäÂøô„Åó„ÅÑ„Å®„Åì„ÇçÂ§±Á§º„ÅÑ„Åü„Åó„Åæ„Åó„Åü„ÄÇ<br>
                            Êîπ„ÇÅ„Å¶„ÅîÈÄ£Áµ°„Åï„Åõ„Å¶„ÅÑ„Åü„Å†„Åç„Åü„ÅÑ„ÅÆ„Åß„Åô„Åå„ÄÅ<br>
                            <span class="highlight">Êú¨Êó•„ÅÆÂ§ïÊñπ„Åã„ÄÅÊòéÊó•</span>„ÅÆ„ÅîÈÉΩÂêà„ÅÑ„Åã„Åå„Åß„Åó„Çá„ÅÜ„ÅãÔºü
                        </div>
                        <div class="modal-note">‚Üí ÊôÇÈñì„ÇíÁ¢∫Ë™ç„Åó„Å¶ÂÜçÊû∂Èõª‰∫àÁ¥Ñ„Å∏</div>
                    `}
                ]
            },
            'step3': {
                title: 'STEP 3: GoogleÊíÆÂΩ±Ê°àÂÜÖ',
                name: 'GoogleÊíÆÂΩ±Ê°àÂÜÖ',
                progress: 30,
                content: `
                    <div class="talk-display">
                        ‰ªä„Ç∞„Éº„Ç∞„É´„Éû„ÉÉ„Éó„Å´Êé≤Ëºâ„Åô„Çã‰∫ãÊ•≠ÊâÄ„ÅÆÂÜôÁúü„Çí<br>
                        È†Ü„ÄÖ„Å´ÊíÆÂΩ±„Åó„Å¶„Åä„Çä„Åæ„Åó„Å¶„ÄÅ„ÇÇ„Å°„Çç„Çì<span class="highlight">ÁÑ°Êñô</span>„Å™„ÅÆ„Åß„Åô„Åå„ÄÅ<br>
                        ÈÄöÂ∏∏ÈÄö„Çä <span class="highlight">ÁúãÊùø„ÇÑÂ§ñË¶≥„Å†„Åë</span> „ÅÆÊíÆÂΩ±„Åß„Çà„Çç„Åó„ÅÑ„Åß„Åó„Çá„ÅÜ„ÅãÔºü<br><br>
                        ÔºàÂÜÖË¶≥„ÇÇÂ∏åÊúõ„Åï„Çå„Åæ„Åô„ÅãÔºüÔºâ
                    </div>
                `,
                choices: [
                    { text: 'Â§ñË¶≥„Å†„Åë„ÅßOK', sub: '‚Üí ÈõªÊ∞óÊ°àÂÜÖ„Å∏', next: 'step4', class: 'primary' },
                    { text: '‰∏≠„ÇÇÊíÆ„Å£„Å¶„Åª„Åó„ÅÑ', sub: '‚Üí ÈõªÊ∞óÊ°àÂÜÖ„Å∏', next: 'step4', class: 'success' },
                    { text: 'Google„ÅØ„ÅÑ„Çâ„Å™„ÅÑ„Çà', sub: '‚Üí Âà•ÊèêÊ°à„Å∏', next: 'step3b', class: '' },
                    { text: '„Åù„Çå‰ΩïÔºüË©≥„Åó„Åè', sub: '‚Üí Ë™¨ÊòéË°®Á§∫', action: 'showHelp', helpId: 'whatGoogle', class: '' }
                ],
                helps: [
                    { id: 'whatGoogle', label: '„Äå„Çπ„Éà„É™„Éº„Éà„Éì„É•„Éº„Å®ÈÅï„ÅÜ„ÅÆÔºü„Äç', title: '„Çπ„Éà„É™„Éº„Éà„Éì„É•„Éº„Å®„ÅÆÈÅï„ÅÑ', content: `
                        <div class="modal-talk">
                            <strong>„Äê„Çπ„Éà„É™„Éº„Éà„Éì„É•„Éº„Äë</strong><br>
                            ‰ªä„ÄÅÂú∞Âõ≥„ÅÆÊ®™„Å´Âª∫Áâ©„ÅÆÁõÆÂç∞„Å®„Åó„Å¶„ÅäÂÜôÁúü„ÅåËºâ„Å£„Å¶„ÅÑ„Çã„ÅÆ„Åß„Åô„Åå„ÄÅ„Åù„Å°„Çâ„ÅØËªä„Å´„Çà„ÇãÈÄö„Çä„Åô„Åå„Çä„ÅÆËá™ÂãïÊíÆÂΩ±„Å®„Å™„Çä„Åæ„Åô„ÄÇ<br><br>
                            <strong>„Äê„Ç§„É≥„Éâ„Ç¢„Éì„É•„ÉºÔºà‰ªäÂõûÔºâ„Äë</strong><br>
                            ‰ªäÂõû„ÅØ‰ª£Ë°®ËÄÖÊßò„ÅäÁ´ã„Å°Âêà„ÅÑ„ÅÆÂÖÉ„ÄÅ„ÅäÂ•Ω„Åç„Å™ÁÆáÊâÄ„ÇÑËßíÂ∫¶„Åã„Çâ<span class="highlight">ÊúÄÂ§ß8„Ç´„ÉÉ„Éà„Åæ„Åß</span>„ÅäÊíÆ„Çä„Åï„Åõ„Å¶„ÅÑ„Åü„Å†„Åë„Åæ„Åô‚ô™
                        </div>
                    `},
                    { id: 'whoAreYou', label: '„Äå„Åä„Åü„Åè„Çâ‰ΩïËÄÖÔºü„Äç', title: '„Äå„Åä„Åü„Åè„Çâ‰ΩïËÄÖ„Å™„ÇìÔºü„Äç„Å∏„ÅÆÂàá„ÇäËøî„Åó', content: `
                        <div class="modal-talk">
                            <span class="highlight">„Ç∞„Éº„Ç∞„É´Ë™çÂÆö„ÅÆ„Ç´„É°„É©„Éû„É≥„ÅåÂú®Á±ç„Åó„Å¶„ÅÑ„ÇãÊíÆÂΩ±‰ºöÁ§æ</span>„Åß„Åô„ÄÇ
                        </div>
                    `}
                ]
            },
            'step3b': {
                title: 'STEP 3-B: Âà•ÊèêÊ°àÔºàÈõªÊ∞ó„Éª„Éç„ÉÉ„ÉàÔºâ',
                name: 'Google‰∏çË¶ÅÊôÇ„ÅÆÊèêÊ°à',
                progress: 30,
                content: `
                    <div class="talk-display">
                        „Åì„Å°„Çâ„ÅÆ„Åª„Åã„Å´„ÇÇÂºäÁ§æ„Åï„Åæ„Åñ„Åæ„Å™„Ç≠„É£„É≥„Éö„Éº„É≥‰∏≠„Åß„Åó„Å¶„ÄÅ<br>
                        <span class="highlight">ÈõªÂäõ‰ºöÁ§æ„Åï„Çì„Å®ÈÄö‰ø°‰ºöÁ§æ„Åï„Çì„Å´„ÅîÂçîË≥õ</span>„ÅÑ„Åü„Å†„ÅÑ„Å¶„ÅÑ„Çã‰∏≠„Åß<br>
                        ÈõªÊ∞ó „Åæ„Åü„ÅØ „ÅäÈõªË©±ÂõûÁ∑öÔºà„Ç§„É≥„Çø„Éº„Éç„ÉÉ„ÉàÔºâ„ÅÆ<br>
                        <span class="highlight">‰∫ãÊ•≠ÊâÄÂâ≤Âºï„ÅÆÁÑ°ÊñôË®∫Êñ≠</span>Âèó„Åë„Å¶„ÅÑ„Åü„Å†„Åë„Çã„Ç≠„É£„É≥„Éö„Éº„É≥„ÅÆ„ÅîÁî®ÊÑè„ÇÇ„Åî„Åñ„ÅÑ„Åæ„Åô(^^)<br><br>
                        ÊñôÈáë„Çí„Åç„Å°„Çì„Å®„ÅîË™¨Êòé„Åï„Åõ„Å¶„ÅÑ„Åü„Å†„Åç„Åæ„Åó„Å¶„ÄÅ<br>
                        „ÅäÂÆâ„Åè„Å™„Å£„Å¶„ÅîÁ¥çÂæó„ÅÑ„Åü„Å†„Åë„ÅüÂ†¥Âêà„Å´„ÅØ„ÄÅ<br>
                        <span class="highlight">„Ç≠„É£„ÉÉ„Ç∑„É•„Éê„ÉÉ„ÇØ„Éó„É¨„Çº„É≥„Éà</span>„ÇÇ„Åî„Åñ„ÅÑ„Åæ„Åô‚ô™
                    </div>
                `,
                choices: [
                    { text: 'ËààÂë≥„ÅÇ„Çã/ËÅû„ÅÑ„Å¶„Åø„Çã', sub: '‚Üí ÈõªÂäõÂà§Âà•„Å∏', next: 'step5', class: 'primary' },
                    { text: '„Åù„Çå„ÇÇ„ÅÑ„Çâ„Å™„ÅÑ', sub: '‚Üí ÁµÇ‰∫Ü', next: 'endNotTarget', class: 'danger' },
                    { text: 'CB„ÅÑ„Åè„Çâ„ÇÇ„Çâ„Åà„ÇãÔºü', sub: '‚Üí Âàá„ÇäËøî„ÅóË°®Á§∫', action: 'showHelp', helpId: 'cashback', class: '' }
                ],
                helps: [
                    { id: 'cashback', label: '„ÄåCB„ÅÑ„Åè„ÇâÔºü„Äç', title: '„Äå„Ç≠„É£„ÉÉ„Ç∑„É•„Éê„ÉÉ„ÇØ„ÅÑ„Åè„Çâ„ÇÇ„Çâ„Åà„ÇãÔºü„Äç', content: `
                        <div class="modal-talk">
                            „ÅîÂà©Áî®Áä∂Ê≥Å„ÇÑÊúà„ÄÖ„ÅÆ‰ΩøÁî®Èáè„Å´„Çà„Å£„Å¶Â§â„Çè„Å£„Å¶„Åç„Åæ„Åô„Åå„Éª„Éª„Éª<br>
                            <span class="highlight">1‰∏á5ÂçÉÂÜÜÔΩûÊúÄÂ§ß7‰∏áÂÜÜ„Åè„Çâ„ÅÑ</span>„ÅÆ„Ç≠„É£„ÉÉ„Ç∑„É•„Éê„ÉÉ„ÇØ„ÇíÂèó„Åë„Çâ„Çå„Å¶„ÅÑ„Çã„ÅäÂÆ¢Êßò„ÅåÂ§ö„ÅÑ„Åß„Åô„Çà‚ô™<br><br>
                            ÈõªÊ∞ó„Éç„ÉÉ„Éà„Å®„ÇÇ„Å´„ÄÅÂÆüÈöõÂàá„ÇäÊõø„Åà„Çã„Å®‰ªä„Çà„Çä„Å©„Çå„Åè„Çâ„ÅÑ„ÅäÂÆâ„Åè„Å™„Çã„Åã„ÄÅCB„ÅØ„ÅÑ„Åè„Çâ„ÇÇ„Çâ„Åà„Çã„ÅÆ„Åã„Å£„Å¶„ÅÑ„ÅÜ„Å®„Åì„Çç„ÇíË©≥„Åó„Åè„ÅîË™¨Êòé„Åï„Åõ„Å¶„ÅÑ„Åü„Å†„Åç„Åü„ÅÑ„ÅÆ„Åß„ÄÅ<span class="highlight">ÊòéÁ¥∞„Çí„ÅîÊ∫ñÂÇô„ÅÑ„Åü„Å†„Åç„ÄÅË®™Âïè„ÅÆ„ÅäÊôÇÈñì„Çí‰Ωú„Å£„Å¶„ÅÑ„Åü„Å†„Åë„Åü„Çâ</span>„Å®ÊÄù„ÅÑ„Åæ„Åô(*^^*)
                        </div>
                    `}
                ]
            },
            'step4': {
                title: 'STEP 4: ÈõªÊ∞ó„Éª„Éç„ÉÉ„ÉàË¶ãÁ©ç„ÇÇ„ÇäË™òÂ∞é',
                name: 'ÈõªÊ∞ó„Éª„Éç„ÉÉ„ÉàÊ°àÂÜÖ',
                progress: 40,
                content: `
                    <div class="pattern-toggle">
                        <button class="pattern-btn active" onclick="showPattern(1)">„Éë„Çø„Éº„É≥‚ë† „Ç∑„É≥„Éó„É´</button>
                        <button class="pattern-btn" onclick="showPattern(2)">„Éë„Çø„Éº„É≥‚ë° Ë©≥Á¥∞</button>
                    </div>
                    <div class="pattern-content active" id="pattern1">
                        <div class="talk-display">
                            ÊíÆÂΩ±„ÅØ„Ç∞„Éº„Ç∞„É´Ë™çÂÆö„ÅÆ„Ç´„É°„É©„Éû„É≥„Åå„Åä‰º∫„ÅÑ„Åô„Çã„Çì„Åß„Åô„Åå„ÄÅ<br>
                            ‰ªäÂõû„ÅØ<span class="highlight">Ë≤ªÁî®„Åã„Åã„Çâ„Å™„ÅÑ„ÅîÊ°àÂÜÖ</span>„Åß„Åó„Å¶„ÄÅ<br><br>
                            ÁöÜ„Åï„Çì„Å´ÊíÆÂΩ±„ÅÆÈöõ„Å´‰∏ÄÁÇπ„Å†„Åë„ÅÑ„Å£„Åó„Çá„Å´„Åä‰ºù„Åà„Åó„Å¶„Åü„ÅÆ„Åå„ÄÅ<br>
                            ‰ªä„Åô„Åî„ÅèÈ´ò„Åè„Å™„Å£„Å¶„ÇãÈõªÊ∞ó„ÅÆ<span class="highlight">ÈõªÊ∞ó‰ª£ÊîØÊè¥„ÅÆË¶ãÁ©ç„Å†„Åë</span><br>
                            ÈõªÂäõ‰ºöÁ§æ„Åï„Çì„Å®ÂçîÂäõ„Åó„Å¶„ÅäÂá∫„Åó„Åó„Å¶„Åü„Çì„Åß„Åô„Å≠ÔºÅ
                        </div>
                    </div>
                    <div class="pattern-content" id="pattern2">
                        <div class="talk-display">
                            ÊíÆÂΩ±„ÅØ„Ç∞„Éº„Ç∞„É´Ë™çÂÆö„ÅÆ„Ç´„É°„É©„Éû„É≥„Åå„Åä‰º∫„ÅÑ„Åô„Çã„Çì„Åß„Åô„Åå„ÄÅ<br>
                            ‰ªäÂõû„Åì„Å°„Çâ„ÅÆ„Ç≠„É£„É≥„Éö„Éº„É≥Ëá™‰Ωì„Åå„ÄÅ<span class="highlight">ÈõªÂäõ‰ºöÁ§æ„Åï„Çì„Å®ÈÄö‰ø°‰ºöÁ§æ„Åï„Çì„Å®ÂçîÂäõ„Åó„Å¶„ÅÆ</span>„ÅîÊ°àÂÜÖ„Å´„Å™„Çä„Åæ„Åô„ÅÆ„Åß<br>
                            Ë≤ªÁî®„ÅØ<span class="highlight">1ÂÜÜ„ÇÇ„Åã„Åã„Çâ„Å™„ÅÑ</span>„Åß„Åô‚ô™<br><br>
                            „Åù„Åì„Åß „Åø„Å™„Åï„Åæ„Å´‰∏ÄÁÇπ„Å†„Åë„ÅîÂçîÂäõ„ÅÑ„Åü„Å†„Åç„Åü„ÅÑ„ÅÆ„Åå„ÄÅ<br>
                            ÊíÆÂΩ±„Åß„Åä‰º∫„ÅÑ„Åó„ÅüÈöõ„Å´ÈõªÊ∞óÊñôÈáë or „Ç§„É≥„Çø„Éº„Éç„ÉÉ„ÉàÔºà„ÅäÈõªË©±ÂõûÁ∑öÔºâ„ÅÆ<br>
                            <span class="highlight">"Ë§áÊï∞Á§æ"ÁÑ°ÊñôË¶ãÁ©ç„ÇÇ„Çä</span> „ÇíÂèñ„Çâ„Åõ„Å¶„ÅÑ„Åü„Å†„ÅÑ„Å¶„Åä„Çä„Åæ„ÅôÔºÅ
                        </div>
                    </div>
                    <div class="talk-display warning">
                        <strong>‚ö†Ô∏è „Åì„ÅÆ„Çø„Ç§„Éü„É≥„Ç∞„ÅßÊ±∫Ë£ÅÁ¢∫Ë™ç„Çí„Åô„Çã</strong><br>
                        <span class="talk-note">„ÄåÈõªÊ∞ó„ÇÑ„Éç„ÉÉ„Éà„ÅÆÂ•ëÁ¥ÑÂ§âÊõ¥„ÅØ„ÅîËá™Ë∫´„Åß„ÅîÂà§Êñ≠„Åß„Åç„Åæ„Åô„ÅãÔºü„Äç</span>
                    </div>
                `,
                choices: [
                    { text: '„Çè„Åã„Å£„Åü/ÈÄ≤„ÇÅ„Å¶', sub: '‚Üí „Éç„ÉÉ„ÉàÁ¢∫Ë™ç„Å∏', next: 'step4b', class: 'primary' },
                    { text: '„Å™„Çì„ÅßÈõªÊ∞óÔºü', sub: '‚Üí Âàá„ÇäËøî„ÅóË°®Á§∫', action: 'showHelp', helpId: 'whyElectric', class: '' },
                    { text: 'Ê±∫Ë£ÅÊ®©„Åå„Å™„ÅÑ', sub: '‚Üí Ê±∫Ë£ÅËÄÖÁ¢∫Ë™ç', action: 'showHelp', helpId: 'noAuth', class: '' },
                    { text: 'ÁµêÂ±ÄÈõªÊ∞ó„ÅÆÂñ∂Ê•≠„Åß„Åó„ÇáÔºü', sub: '‚Üí Âàá„ÇäËøî„ÅóË°®Á§∫', action: 'showHelp', helpId: 'justElectric', class: '' }
                ],
                helps: [
                    { id: 'whyElectric', label: '„Äå„Å™„Çì„ÅßÈõªÊ∞óÔºü„Äç', title: '„Äå„Å™„Çì„ÅßÈõªÊ∞ó„ÅÆË©±„Å™„ÅÆÔºü„Äç„Å∏„ÅÆÂàá„ÇäËøî„Åó', content: `
                        <div class="modal-talk">
                            ‰ªäÂõû„ÅÆÊíÆÂΩ±„Ç≠„É£„É≥„Éö„Éº„É≥Ëá™‰Ωì„Åå„ÄÅ<span class="highlight">ÈõªÂäõ‰ºöÁ§æ„Åï„Çì„Å®ÈÄö‰ø°‰ºöÁ§æ„Åï„Çì„Å®ÂçîÂäõ„Åó„Å¶</span>„ÅîÊ°àÂÜÖ„Åï„Åõ„Å¶„ÅÑ„Åü„Å†„ÅÑ„Å¶„ÅÑ„Çã„ÇÇ„ÅÆ„Åß„Åó„Å¶„ÄÅÁöÜ„Åï„Åæ„Å´<span class="highlight">ÈõªÊ∞ó‰ª£„ÅÆÁÑ°ÊñôË¶ãÁ©ç„Çä</span>„ÇíÂèñ„Çâ„Åõ„Å¶„ÅÑ„Åü„Å†„ÅÑ„Å¶„Åä„Çä„Åæ„Åô„ÄÇ<br><br>
                            „Åù„Çå„Å´„Çà„Å£„Å¶ÊíÆÂΩ±Ë≤ªÁî®„Çí<span class="highlight">ÂÆåÂÖ®ÁÑ°Êñô</span>„Åß„ÅîÊèê‰æõ„Åß„Åç„Çã„Çà„ÅÜ„Å´„Å™„Å£„Å¶„Åä„Çä„Åæ„Åô‚ô™
                        </div>
                        <div class="modal-note">
                            „Éù„Ç§„É≥„ÉàÔºöÊíÆÂΩ±„ÇíÁÑ°Êñô„Å´„Åô„Çã„Åü„ÇÅ„ÅÆÂçîË≥õ„Å®„ÅÑ„ÅÜÂΩ¢„ÅßË™¨Êòé„Åô„Çã
                        </div>
                    `},
                    { id: 'noAuth', label: '„ÄåÊ±∫Ë£ÅÊ®©„Åå„Å™„ÅÑ„Äç', title: '„ÄåÊ±∫Ë£ÅÊ®©„Åå„Å™„ÅÑ„Äç„Å∏„ÅÆÂØæÂøú', content: `
                        <div class="modal-talk">
                            „Å°„Å™„Åø„Å´„ÄÅÈõªÊ∞ó„ÇÑ„Éç„ÉÉ„Éà„ÅÆ„ÅîÂ•ëÁ¥Ñ„ÅØ<span class="highlight">„Å©„Å™„Åü„Åå„ÅîÂà§Êñ≠</span>„Åï„Çå„Åæ„Åô„ÅãÔºü<br><br>
                            Ôºà„Ç™„Éº„Éä„ÉºÊßò/Á§æÈï∑Êßò/Êú¨ÈÉ®„Å™„Å©Ôºâ<br><br>
                            „Åù„ÅÆÊñπ„ÅØÊú¨Êó•„ÅÑ„Çâ„Å£„Åó„ÇÉ„ÅÑ„Åæ„Åô„ÅãÔºü„Åæ„Åü„ÅØ„ÄÅ„ÅäÈõªË©±„ÅßÁ¢∫Ë™ç„ÅÑ„Åü„Å†„Åè„Åì„Å®„ÅØÂèØËÉΩ„Åß„Åó„Çá„ÅÜ„ÅãÔºü
                        </div>
                        <div class="modal-note">
                            „ÉªÊ±∫Ë£ÅËÄÖ„ÅåÂà•„Å´„ÅÑ„ÇãÂ†¥Âêà ‚Üí „Åù„ÅÆÊñπ„Å´Áπã„ÅÑ„Åß„ÇÇ„Çâ„ÅÜ or ÂÜçÊû∂Èõª‰∫àÁ¥Ñ<br>
                            „ÉªÊú¨ÈÉ®Ê±∫Ë£Å„ÅÆÂ†¥Âêà ‚Üí „ÄåÊú¨ÈÉ®Êßò„Å∏„ÅÆÁ¢∫Ë™ç„ÅÆ‰ªïÊñπ„Çí„Åä‰ºù„Åà„Åó„Åæ„Åô„Å≠„Äç
                        </div>
                    `},
                    { id: 'justElectric', label: '„ÄåÁµêÂ±ÄÈõªÊ∞ó„Åß„Åó„ÇáÔºü„Äç', title: '„ÄåÁµêÂ±ÄÁõÆÁöÑ„ÅØÈõªÊ∞ó„Åß„Åó„ÇáÔºü„Äç', content: `
                        <div class="modal-talk">
                            „ÅÑ„Åà„ÅÑ„Åà(ÊÑü„ÅòËâØ„Åè)„ÄÅÁßÅÂÖ±„ÅØ<span class="highlight">ÊíÆÂΩ±‰ºöÁ§æ</span>„Å™„ÅÆ„Åß„ÄÅÊíÆÂΩ±„Çí„Åï„Åõ„Å¶„ÅÑ„Åü„Å†„Åç„Åü„ÅÑ„Çì„Åß„Åô„Åå„ÄÅÊíÆÂΩ±Ëá™‰Ωì„ÅåÈÄöÂ∏∏„ÅØË≤ªÁî®„Åå„Åã„Åã„Çã„ÇÇ„ÅÆ„Å†„Å£„Åü„ÅÆ„Åß„ÄÅ„ÅäÂÆ¢Êßò„Åã„Çâ„Åô„Çã„Å®„Äå„É™„Çπ„ÇØ„Å†„Äç„Å®„ÅÑ„ÅÜ„ÅäÂ£∞„ÅåÊ≤¢Â±±„ÅÇ„Å£„Åü„Çì„Åß„Åô„Å≠„ÄÇ<br><br>
                            „Å™„ÅÆ„Åß„ÅäÂÆ¢Êßò„Å´„ÅØ‰∏ÄÂàáË≤ªÁî®„Åå„Åã„Åã„Çâ„Å™„ÅÑ„Çà„ÅÜ„Å´<span class="highlight">ÈõªÊ∞ó„ÅÆ‰ºöÁ§æ„Åï„Çì„Å®ÂçîÂäõ„Åó„Å¶„ÅîÊ°àÂÜÖ</span>„Çí„Åï„Åõ„Å¶„ÅÑ„Åü„Å†„ÅÑ„Å¶„Çã„Çì„Åß„Åô„Å≠„ÄÇ
                        </div>
                        <div class="modal-note">
                            Q.„Äå„Å™„Çì„Åß„Åù„Çì„Å™„Åì„Å®„Åß„Åç„Çã„ÅÆÔºü„Äç<br>
                            A. ÁßÅ„Å©„ÇÇ„ÅØ<span class="highlight">Á¥π‰ªãÊñô„ÇíÈõªÂäõ‰ºöÁ§æ„Åï„Çì„ÇÑÈÄö‰ø°‰ºöÁ§æ„Åï„Çì„Åã„ÇâÈ†Ç„ÅÑ„Å¶</span>„Åæ„Åó„Å¶„ÄÅ„Åù„Å°„Çâ„Çí„Ç∞„Éº„Ç∞„É´ÊíÆÂΩ±„Å´ÂÖÖ„Å¶„Çã„Åì„Å®„Åå„Åß„Åç„Çã„ÅÆ„Åß„ÄÅË≤ªÁî®„ÇíÊéõ„Åë„Åö„Å´ÊíÆÂΩ±„ÅåÂá∫Êù•„Çã„Çà„ÅÜ„Å´„Å™„Å£„Å¶„Åä„Çä„Åæ„Åô‚òÜ
                        </div>
                    `},
                    { id: 'cameraElectric', label: '„Äå„Ç´„É°„É©„Éû„É≥„ÅåÈõªÊ∞óË™¨ÊòéÔºü„Äç', title: '„Äå„Ç´„É°„É©„Éû„É≥„ÅåÈõªÊ∞ó„ÇÑ„Éç„ÉÉ„Éà„ÅÆË™¨Êòé„Çí„Åô„Çã„ÅÆÔºü„Äç', content: `
                        <div class="modal-talk">
                            „Åä„Å£„Åó„ÇÉ„ÇãÈÄö„Çä„Åß„ÅôÔºÅ<br>
                            <span class="highlight">„Ç®„É™„Ç¢ÊãÖÂΩì1Âêç</span>„Åå„Åä‰º∫„ÅÑ„Åï„Åõ„Å¶„ÅÑ„Åü„Å†„ÅÑ„Å¶„Åæ„Åô„ÄÇ<br><br>
                            „Ç∞„Éº„Ç∞„É´Ë™çÂÆö„ÅÆ„Ç´„É°„É©„Éû„É≥„Åß„Åô„Åå<span class="highlight">ÈõªÂäõ‰ºöÁ§æ„ÇÑÈÄö‰ø°‰ºöÁ§æ„ÅÆÂèñÊ¨°Ê•≠Âãô„ÇÇ„Åï„Åõ„Å¶„ÅÑ„Åü„Å†„ÅÑ„Å¶„ÅÑ„Çã</span>„ÅÆ„Åß„ÄÅ„Åù„Å°„Çâ„ÅÆÈÉ®ÂàÜ„ÇÇ„ÅîË™¨Êòé„ÅåÂèØËÉΩ„Å®„Å™„Çä„Åæ„Åô„ÄÇ
                        </div>
                    `}
                ]
            },
            'step4b': {
                title: 'STEP 4-B: „Éç„ÉÉ„ÉàÂà©Áî®Á¢∫Ë™ç',
                name: '„Éç„ÉÉ„ÉàÂà©Áî®Á¢∫Ë™ç',
                progress: 45,
                content: `
                    <div class="talk-display">
                        Êõ¥Êñ∞„Åô„Çã„Åì„Å®„Åß‰∫ãÊ•≠ÊâÄÊßò„ÅÆÊÉÖÂ†±„ÅåÊ≠£Á¢∫„Å´Êé≤Ëºâ„Åï„Çå„Åæ„Åô„ÄÇ<br>
                        <span class="highlight">„Å°„Å™„Åø„Å´„Ç§„É≥„Çø„Éº„Éç„ÉÉ„Éà„ÅÆ„ÅîÂà©Áî®„ÅØ„Åî„Åñ„ÅÑ„Åæ„Åô„ÅãÔºü</span>
                    </div>
                    <div class="talk-display tip">
                        <span class="talk-note">‚ÄªÂà©Áî®„Å™„Åè„Å¶„ÇÇ„ÄÅ„Éç„ÉÉ„ÉàÂõûÁ∑ö„ÅÆÂ•ëÁ¥Ñ„Åå„ÅÇ„Çã„ÅãÂê¶„Åã„ÅåÈáçË¶ÅÔºÅ</span>
                    </div>
                `,
                choices: [
                    { text: '„Éç„ÉÉ„Éà‰Ωø„Å£„Å¶„Çã', sub: '‚Üí ÈõªÂäõÂà§Âà•„Å∏ÔºàÈõªÊ∞ó+„Éç„ÉÉ„ÉàÔºâ', next: 'step5', class: 'primary' },
                    { text: '„Éç„ÉÉ„Éà„ÅØ‰Ωø„Å£„Å¶„Å™„ÅÑ', sub: '‚Üí ÈõªÂäõÂà§Âà•„Å∏ÔºàÈõªÊ∞ó„ÅÆ„ÅøÔºâ', next: 'step5', class: '' }
                ],
                helps: []
            },
            'step5': {
                title: 'STEP 5: ÈõªÂäõ‰ºöÁ§æÂà§Âà•',
                name: 'ÈõªÂäõ‰ºöÁ§æÂà§Âà•',
                progress: 50,
                content: `
                    <div class="talk-display">
                        „Å°„Å™„Åø„Å´„ÄÅ‰ª£Ë°®ËÄÖÊßò„ÅÆ„Å®„Åì„Çç„ÅØ<br>
                        <span class="highlight">Èñ¢Ë•øÈõªÂäõ‰ª•Â§ñ„ÅÆ„Å®„Åì„Çç„ÅßÂâ≤Âºï„Å£„Å¶Âèó„Åë„Çâ„Çå„Å¶„Åæ„Åô„ÅãÔºü</span>
                    </div>
                `,
                choices: [
                    { text: 'Èñ¢Ë•øÈõªÂäõ„ÅÆ„Åæ„Åæ', sub: '‚Üí Èñ¢ÈõªÂêë„Åë„Éí„Ç¢„É™„É≥„Ç∞', next: 'step6a', class: 'primary' },
                    { text: '‰ªñ„ÅÆÈõªÂäõ‰ºöÁ§æ„Å´Â§â„Åà„Å¶„Çã', sub: '‚Üí Êñ∞ÈõªÂäõÂêë„Åë„Éí„Ç¢„É™„É≥„Ç∞', next: 'step6b', class: '' },
                    { text: '„Çè„Åã„Çâ„Å™„ÅÑ/Ë¶ö„Åà„Å¶„Å™„ÅÑ', sub: '‚Üí Èñ¢ÈõªÂêë„Åë„ÅßÈÄ≤Ë°å', next: 'step6a', class: '' }
                ],
                helps: []
            },
            'step6a': {
                title: 'STEP 6-A: Èñ¢Ë•øÈõªÂäõ„É¶„Éº„Ç∂„ÉºÂêë„Åë',
                name: 'Èñ¢ÈõªÂêë„Åë„Éí„Ç¢„É™„É≥„Ç∞',
                progress: 60,
                content: `
                    <div class="talk-display">
                        „Åù„ÅÜ„Åß„Åô„Çà„Å≠ÔºÅ„Å†„Å£„Åü„Çâ„Å°„Çá„ÅÜ„Å©„Çà„Åã„Å£„Åü„Åß„ÅôÔºÅ<br>
                        ‰ªä„ÄÅ<span class="highlight">Èñ¢Ë•øÈõªÂäõ„Åä‰Ωø„ÅÑ„ÅÆÊñπ„Å´„ÅîÊ°àÂÜÖ</span>„Åß„Åó„Å¶„ÄÅ<br><br>
                        ÈõªÊ∞óÊñôÈáë„Å´Èñ¢„Åó„Åæ„Åó„Å¶„ÅØ„ÄÅÂéªÂπ¥„ÅÆÂ§èÂ†¥„Åã„ÇâÈõªÊ∞ó‰ª£„Åå„ÅÇ„Åå„Å£„Å¶„ÅÑ„Çã„Åü„ÇÅ„ÄÅ<br>
                        „Å°„Çá„ÅÜ„Å©<span class="highlight">"ÂÆâ„ÅÑ„Å≠ÔºÅ"</span>„Å®„ÅîÂÆüÊÑü„ÅÑ„Åü„Å†„Åë„ÇãÊôÇÊúü„Å™„Çì„Åß„Åô„Å≠ÔºÅ<br><br>
                        „Å©„ÅÆÈõªÂäõ‰ºöÁ§æ„ÅÆ„Çµ„Éº„Éì„Çπ„ÇÑ„Éó„É©„É≥„ÅåÂæ°Á§æÊßò„Å´Âêà„ÅÜ„Åã„ÄÅ<br>
                        ÂºäÁ§æ„Åß„ÅØ<span class="highlight">Ë§áÊï∞Á§æ„ÅßÊ®™‰∏¶„Å≥„Å´„Åó„Å¶ÊñôÈáë„ÇíÊØîËºÉ</span>„Åó„Å¶„ÅÑ„Åü„Å†„Åë„Åæ„Åó„Å¶ÔΩû
                    </div>
                    <div class="talk-display tip">
                        <strong>‚ùì „Éí„Ç¢„É™„É≥„Ç∞</strong><br>
                        2.3ÁÇπ„Åª„Å©Á¢∫Ë™ç„Å™„ÅÆ„Åß„Åô„Åå„ÄÅ<br>
                        ÈõªÊ∞ó„ÅÆÂà©Áî®ÊñôÈáë„ÅØ„ÄÅ<span class="highlight">ÊØéÊúà„Å†„ÅÑ„Åü„ÅÑ„Åä„ÅÑ„Åè„Çâ„Åè„Çâ„ÅÑ„ÅäÊîØÊâï„ÅÑ„Åß„Åó„Çá„ÅÜ„ÅãÔºü</span>
                    </div>
                `,
                choices: [
                    { text: '1‰∏áÂÜÜ‰ª•‰∏ä', sub: '‚Üí „Ç™„Éº„É´ÈõªÂåñÁ¢∫Ë™ç', next: 'step6c', class: 'primary' },
                    { text: '1‰∏áÂÜÜ‰ª•‰∏ã', sub: '‚Üí ÂãïÂäõÁ¢∫Ë™ç', next: 'step6d', class: '' },
                    { text: '10‰∏áÂÜÜ‰ª•‰∏ä/„Åã„Å™„ÇäÈ´ò„ÅÑ', sub: '‚Üí È´òÂúßÁ¢∫Ë™ç', next: 'step6e', class: 'warning' },
                    { text: '„Çè„Åã„Çâ„Å™„ÅÑ', sub: '‚Üí ÂΩì„Å¶Ëæº„Åø„Éí„Ç¢„É™„É≥„Ç∞', action: 'showHelp', helpId: 'guessPrice', class: '' }
                ],
                helps: [
                    { id: 'guessPrice', label: 'ÂΩì„Å¶Ëæº„Åø„Éí„Ç¢„É™„É≥„Ç∞', title: 'ÈõªÊ∞ó‰ª£„ÇíÊääÊè°„Åó„Å¶„ÅÑ„Å™„ÅÑ‰∫∫„Å∏„ÅÆÂΩì„Å¶Ëæº„Åø', content: `
                        <div class="modal-talk">
                            „Å†„ÅÑ„Åü„ÅÑ„ÅßÂ§ß‰∏àÂ§´„Å™„ÅÆ„Åß„Åô„Åå„ÄÅ<br>
                            ‰∫ãÊ•≠ÊâÄ„ÅØ‰∏ÄËà¨ÂÆ∂Â∫≠„Åè„Çâ„ÅÑ„ÅÆÊï∑Âú∞„ÅÆÂ∫É„Åï„ÅØ„Åî„Åñ„ÅÑ„Åæ„Åô„ÅãÔºü<br>
                            Ôºà„ÅØ„ÅÑ or „Åù„Çå„Å´Ëøë„ÅÑÔºâ<br><br>
                            „ÅÇ„Å®„ÇÑ„Å£„Å±„ÇäÊúù„Åã„ÇâÂ§ïÊñπ„Åè„Çâ„ÅÑ„Åæ„ÅßÈõªÊ∞ó„Å§„Åë„Åü„Çä„ÄÅ<br>
                            Â§èÂ†¥ÂÜ¨Â†¥„ÅØ„Ç®„Ç¢„Ç≥„É≥„Çí‰Ωø„ÅÑ„Åæ„Åô„Çà„Å≠ÔºüÔºà„ÅØ„ÅÑÔºâ<br><br>
                            „Åß„ÅÇ„Çå„Å∞„Éª„Éª„Éª„Éª<span class="highlight">1‰∏áÂÜÜ„ÅØË∂Ö„Åà„Çâ„Çå„Å¶„ÅÑ„Çã</span>„Åã„Å®ÊÄù„ÅÑ„Åæ„Åô„ÅÆ„ÅßÂ§ß‰∏àÂ§´„Åß„Åô‚ô™
                        </div>
                        <div class="modal-note">‚Üí Á¢∫Ë™çÂæå„ÄÅ„Äå1‰∏áÂÜÜ‰ª•‰∏ä„Äç„ÇíÈÅ∏Êäû</div>
                    `},
                    { id: 'neverChanged', label: '„ÄåÈñ¢Èõª„Åã„ÇâÂ§â„Åà„Åü„Åì„Å®„Å™„ÅÑ„Äç', title: '„Äå„Åù„ÇÇ„Åù„ÇÇÈñ¢Èõª„Åã„ÇâÊõø„Åà„Åü„Åì„Å®„Åå„Å™„ÅÑ„Äç', content: `
                        <div class="modal-talk">
                            <strong>„Äê„Çπ„Éû„Éº„Éà„É°„Éº„Çø„Éº„Éà„Éº„ÇØ„Äë</strong><br><br>
                            „Åù„ÇÇ„Åù„ÇÇÂÆâ„Åè„Å™„ÇãÁêÜÁî±„ÅÆÈÉ®ÂàÜ„Åß„Åô„Åå„ÄÅ<br>
                            ÁèæÂú®„ÅØÈñ¢Ë•øÈõªÂäõ„Åå‰∫ãÊ•≠ÊâÄÊßò„ÅÆ<span class="highlight">„É°„Éº„Çø„Éº‰∫§Êèõ</span>„Çí„Åï„Åõ„Å¶„ÅÑ„Åü„Å†„ÅÑ„Å¶„Åä„Çä„Åæ„Åô„ÅÆ„Åß„ÄÅ„Åù„ÅÆÂ†¥„Å´Ë°å„Åã„Å™„Åè„Å¶„ÇÇ‰ΩøÁî®Èáè„ÅÆÁ¢∫Ë™ç„Åå„Åß„Åç„Çã„Çà„ÅÜ„Å´„Å™„Å£„Å¶„Åä„Çä„Åæ„Åó„Å¶„ÄÅ„Åù„ÅÆÂΩ±Èüø„Åß<span class="highlight">Ê§úÈáùÂì°„Åå„Åæ„Çè„ÇãÂøÖË¶Å„Åå„Å™„Åè„Å™„Å£„ÅüÂàÜ„ÄÅ‰∫∫‰ª∂Ë≤ª„ÅåÂ§ßÂπÖ„Å´ÂâäÊ∏õ</span>Âá∫Êù•„Å¶„Åä„Çä„Åæ„Åô„ÄÇ<br><br>
                            ‰ªäÂõû„ÅîÊ°àÂÜÖ„Åó„Å¶„ÅÑ„Çã„ÅÆ„ÅØ„ÄÅ‰ªä„Åä‰Ωø„ÅÑ„ÅÆÈñ¢Ë•øÈõªÂäõ„Åï„Çì„ÅÆÁô∫Èõª„ÉªÈÄÅÈõª„Å™„Å©„ÅÆÈõªÊ∞ó„ÅÆ‰æõÁµ¶„ÇÑË®≠ÂÇô„ÅØ<span class="highlight">„Åù„ÅÆ„Åæ„Åæ</span>„Åß„ÄÅ<span class="highlight">ÊòéÁ¥∞Áô∫Ë°å„ÇíÊãÖÂΩì„Åô„Çã‰ºöÁ§æ„ÅåÂ§â„Çè„Çã</span>„Å£„Å¶„Å†„Åë„Å™„Çì„Åß„Åô„Å≠ÔºÅ
                        </div>
                    `},
                    { id: 'dontWantChange', label: '„ÄåÈõªÊ∞óÂ§â„Çè„Çã„Å™„Çâ„ÅÑ„Çâ„Å™„ÅÑ„Äç', title: '„Äå„Åß„Çì„ÅçÂ§â„Çè„Çã„Å™„Çâ„ÅÑ„Çâ„Å™„ÅÑÁ≥ª„Äç', content: `
                        <div class="modal-talk">
                            <span class="highlight">ÈõªÊ∞ó„ÅØÂ§â„Çè„Çâ„Å™„ÅÑ</span>„Åß„Åô„ÇàÔºÅ<br>
                            ‰ªäÂõû„ÅîÊ°àÂÜÖ„Åó„Å¶„ÅÑ„Çã„ÅÆ„ÅØ‰ªä„Åä‰Ωø„ÅÑÈñ¢Ë•øÈõªÂäõ„Åï„Çì„ÅÆÁô∫Èõª„ÉªÈÄÅÈõª„Å™„Å©„ÅÆÈõªÊ∞ó„ÅÆ‰æõÁµ¶„ÇÑË®≠ÂÇô„ÅØ„Åù„ÅÆ„Åæ„Åæ„Åß„ÄÅ„Äå„Ç®„Éç„Éë„É´„Äç„Åß<span class="highlight">Ââ≤Âºï„ÇíÈÅ©Áî®„Åô„Çã„Å†„Åë</span>„ÅßÈõªÊ∞ó‰ª£ÊîØÊè¥„ÅåÂèó„Åë„Çã„Åì„Å®„ÅåÂá∫Êù•„Çã„Çì„Åß„ÅôÔºÅ
                        </div>
                        <div class="modal-note">‚Äª„Ç®„Éç„Éë„É´„Å£„Å¶„Å™„Å´Ôºü ‚Üí ‰∫ãÊ•≠ÊâÄÁî®„ÅÆÂâ≤Âºï„Çí„Åó„Å¶„ÅÑ„ÇãÊñ∞ÈõªÂäõ‰ºöÁ§æ„Åß„Åô„ÄÇ</div>
                    `},
                    { id: 'contractChange', label: '„ÄåÂ•ëÁ¥ÑÂ§â„Çè„Çã„Çì„Åß„Åó„ÇáÔºü„Äç', title: '„ÄåÂ•ëÁ¥ÑÂ§â„Çè„Çã„Çì„Åß„Åó„ÇáÔºü„Äç', content: `
                        <div class="modal-talk">
                            Â•ëÁ¥Ñ„Å®„ÅÑ„ÅÜ„Çà„Çä„ÅØ<span class="highlight">Á™ìÂè£</span>„Å´„Å™„Çã„Çì„Åß„Åô„Åë„Å©„ÇÇ„ÄÅ<br>
                            „Åß„Çì„Åç„ÅØ„ÄåÁô∫Èõª„Äç„ÄåÈÄÅÈõª„Äç„ÄåÊòéÁ¥∞Áô∫Ë°å„Äç„ÅÆÂ§ß„Åç„Åè3„Å§„ÅÆÊ•≠Âãô„Å´ÂàÜ„Åã„Çå„Çã„ÅÆ„Åß„Åô„ÅåÁô∫Èõª„ÄÅÈÄÅÈõª„ÅÆÊúÄ„ÇÇÂ§ß‰∫ã„Å™ÈÉ®ÂàÜ„ÅØÈñ¢Ë•øÈõªÂäõ‰ª•Â§ñÂá∫Êù•„Å™„ÅÑ„ÅÆ„Åß„ÄÅ„ÇÇ„Å°„Çç„Çì„Åù„ÅÆ„Åæ„Åæ„Åß‰ªäÂõû„ÅØ<span class="highlight">ÊòéÁ¥∞Áô∫Ë°å„ÅÆÁ™ìÂè£„ÅÆÈÉ®ÂàÜ„Å†„Åë„Ç®„Éç„Éë„É´„ÅåÊãÖÂΩì</span>„Åô„Çã„Å†„Åë„ÅßÈõªÊ∞ó‰ª£ÊîØÊè¥„ÇíÂèó„Åë„Å¶„ÅÑ„Åü„Å†„Åë„Åæ„ÅôÔºÅ<br><br>
                            „Åß„Åô„ÅÆ„Åß„Å™„Å´„Åã„ÅÇ„Å£„ÅüÊôÇ„ÅÆÂØæÂøú„ÇÇ‰æõÁµ¶Â§â„Çè„Çâ„Å™„ÅÑ„ÅÆ„Åß„ÄÅÈñ¢Ë•øÈõªÂäõ„Åï„Çì„Åã„ÇâÂ§â„Çè„Çä„Åæ„Åõ„Çì„ÅÆ„Åß„ÅîÂÆâÂøÉ„Åè„Å†„Åï„ÅÑ„ÄÇ
                        </div>
                    `},
                    { id: 'middleman', label: '„ÄåÈñì„Å´ÂÖ•„Çã„ÅÆÂ´å„Äç', title: '„Äå„Å™„Çì„ÅãÈñì„Å´ÂÖ•„Çã„ÇìÂ´å„ÇÑ„Äç', content: `
                        <div class="modal-talk">
                            „ÅÇ„Å£ÔºÅ<span class="highlight">Èñì„Å´ÂÖ•„Çã„Å®„ÅÑ„ÅÜ„Çà„ÇäÂΩπÂâ≤ÂàÜÊãÖ</span>„Åø„Åü„ÅÑ„Å™„ÇÇ„ÅÆ„Åß„Åó„Å¶„ÄÅÈõªÊ∞ó„ÅÆ‰æõÁµ¶„ÅØ‰ªäÂæå„ÇÇ„Åö„Å£„Å®Èñ¢Èõª„Åï„Çì„Å™„ÅÆ„Åß„ÄÅÈñ¢Èõª„Åï„Çì„Åã„ÇâÁõ¥„ÅßÈõªÊ∞ó„ÅåÈÄÅ„Çâ„Çå„Å¶„Åè„Çã„Çì„Åß„Åô„Å≠ÔºÅ<br>
                            „Å™„ÅÆ„Åß<span class="highlight">Èñì„Å´ÂÖ•„Çä„Çà„ÅÜ„Åå„Å™„ÅÑ</span>„Çì„Åß„Åô„ÇàÔºÅ
                        </div>
                    `}
                ]
            },
            'step6b': {
                title: 'STEP 6-B: Êñ∞ÈõªÂäõ„É¶„Éº„Ç∂„ÉºÂêë„Åë',
                name: 'Êñ∞ÈõªÂäõÂêë„Åë„Éí„Ç¢„É™„É≥„Ç∞',
                progress: 60,
                content: `
                    <div class="talk-display">
                        „Åù„ÅÜ„Åß„Åô„Çà„Å≠ÔºÅ„Å†„Å£„Åü„Çâ„Å°„Çá„ÅÜ„Å©„Çà„Åã„Å£„Åü„Åß„ÅôÔºÅ<br>
                        ‰ªäÂõû„Åù„ÅÜ„ÅÑ„Å£„ÅüÊñπ„Åå<span class="highlight">ÈõªÊ∞ó‰ª£ÊîØÊè¥„ÅÆÂØæË±°</span>„Åß„Åó„Å¶„ÄÅ<br>
                        „Å°„Å™„Åø„Å´„Å©„Å°„Çâ„ÅÆ‰ºöÁ§æ„Åï„Çì„Åß„ÅîÂà©Áî®„Åß„Åó„Çá„ÅÜ„ÅãÔºü
                    </div>
                `,
                choices: [
                    { text: '‰ºöÁ§æÂêç„ÇíÁ≠î„Åà„Å¶„Åè„Çå„Åü', sub: '‚Üí „Ç™„Éº„É´ÈõªÂåñÁ¢∫Ë™ç', next: 'step6c', class: 'primary' },
                    { text: 'Ë¶ö„Åà„Å¶„Å™„ÅÑ/„Çè„Åã„Çâ„Å™„ÅÑ', sub: '‚Üí ‰ºöÁ§æÂêçÁ¢∫Ë™ç', action: 'showHelp', helpId: 'confirmCompany', class: '' }
                ],
                helps: [
                    { id: 'confirmCompany', label: '‰ºöÁ§æÂêçÁ¢∫Ë™ç', title: '‰ºöÁ§æÂêçÁ¢∫Ë™ç„Éà„Éº„ÇØ', content: `
                        <div class="modal-talk">
                            „Äå„Éè„É´„Ç®„Éç„Åß„Çì„Åç„Äç„Äå„Åä„Éà„ÇØ„Åß„Çì„Åç„Äç„Äå„Ç®„Éï„Ç®„Éç„Åß„Çì„Åç„Äç„Åß„ÅØ„Å™„Åã„Å£„Åü„Åß„Åó„Çá„ÅÜ„ÅãÔºü
                        </div>
                        <div class="modal-note">‚Üí Á¢∫Ë™ç„Åß„Åç„Åü„Çâ„Äå‰ºöÁ§æÂêç„ÇíÁ≠î„Åà„Å¶„Åè„Çå„Åü„Äç„ÇíÈÅ∏Êäû</div>
                    `},
                    { id: 'backToKanden', label: '„ÄåÈñ¢Èõª„Å´Êàª„Åó„Åü„Äç', title: '„ÄåÊñ∞ÈõªÂäõ„Åã„ÇâÈñ¢Èõª„Å´Êàª„Åó„Åü„Äç', content: `
                        <div class="modal-talk">
                            Êñ∞ÈõªÂäõ„ÅåÈ´òÈ®∞„Åó„ÅüÂΩ±Èüø„Å®„Åã„ÅßÈñ¢Èõª„Å´Êàª„Å£„Å¶„ÅÑ„ÇãÊñπ„ÇÇÂ§ö„ÅÑ„ÅÆ„Åß„Åô„Åå„ÄÅ‰ªä„Å£„Å¶Èñ¢Èõª„Åï„Çì„ÇÇÂêåÊßò„ÅÆ<span class="highlight">ÁáÉÊñôË™øÊï¥È°ç„ÅÆÂÄ§‰∏ä„Åí„Çí‰∏äÈôê„Å™„Åó„Åß</span>Ë°å„Å£„Å¶„Åæ„Åô„ÅÆ„ÅßÁµêÊûúÁöÑ„Å´„Åæ„ÅüÈõªÊ∞ó‰ª£„Åå„ÅÇ„Åå„Å£„Å¶„Åó„Åæ„Å£„Å¶„ÅÑ„ÇãÁä∂ÊÖã„Å™„Çì„Åß„Åô„Å≠„ÄÇ<br><br>
                            „Åß„Åô„ÅÆ„Åß‰ªäÂõû„ÅØ‰∫ãÊ•≠ÊâÄÂâ≤Âºï„ÅßÈ´òÈ®∞„ÅÆÂΩ±Èüø„ÇíÂèó„Åë„Å´„Åè„ÅÑ„Çà„ÅÜ„Å´„ÄÅ<span class="highlight">ÈõªÊ∞ó„ÅÆÂçò‰æ°„ÇíË™øÊï¥</span>„Åï„Åõ„Å¶„ÅÑ„Åü„Å†„Åë„Åæ„Åô„ÄÇ
                        </div>
                    `},
                    { id: 'justChanged', label: '„ÄåÂ§â„Åà„Åü„Å∞„Å£„Åã„Çä„Äç', title: '„ÄåÂ§â„Åà„Åü„Å∞„Å£„Åã„Çä„Å†„Åã„Çâ„Äç', content: `
                        <div class="modal-talk">
                            „Åù„ÅÜ„Åß„Åô„Çà„Å≠ÔºÅÊúÄËøëÂ§â„Åà„Çâ„Çå„Åü„Çì„Åß„Åô„Åã„Å≠ÔºüÔºà„ÅÑ„Å§„Åß„ÇÇOKÔºâ<br>
                            „Å†„Å£„Åü„ÇâÂïèÈ°å„Å™„ÅÑ„Åß„Åô„ÇàÔºÅ<br><br>
                            ‰ªä„Åä‰Ωø„ÅÑ„ÅÆ‚óã‚óã„Åß„Çì„Åç„Åï„Çì„Åß<span class="highlight">ÈÅïÁ¥ÑÈáë„ÅåÁô∫Áîü„Åó„ÅüÂ†¥Âêà„ÇÇ„ÄÅ„Ç≠„É£„É≥„Éö„Éº„É≥‰∏≠„Å™„ÅÆ„ÅßÂÖ®È°ç„Åì„Å°„Çâ„ÅßË≤†ÊãÖ</span>„Åô„Çã„Çà„ÅÜ„Å´„Å™„Å£„Å¶„Åæ„Åô„ÅÆ„Åß„ÅîÂÆâÂøÉ„Åè„Å†„Åï„ÅÑ‚òÜ
                        </div>
                    `},
                    { id: 'friend', label: '„ÄåÁü•„ÇäÂêà„ÅÑ„ÅßÂ§â„Åà„Åü„Äç', title: '„ÄåÁü•„ÇäÂêà„ÅÑ„ÅÆ„Å®„Åì„Çç„Å†„Åã„Çâ„Éª‰ªò„ÅçÂêà„ÅÑ„ÅßÂ§â„Åà„Åü„Äç', content: `
                        <div class="modal-talk">
                            „Åù„ÅÜ„Åß„Åô„Çà„Å≠ÔºÅ„ÅäÁü•„ÇäÂêà„ÅÑ„ÅÆÊñπ„Åå‰ª£ÁêÜÂ∫ó„Åï„Çì„Å™„Çì„Åß„Åô„Åã„Å≠ÔºüÔºàYESÔºâ<br>
                            „Å°„Å™„Åø„Å´<span class="highlight">ÊúÄÂàù„ÅÆ„ÅäÊîØÊâï„ÅÑ„Å£„Å¶„ÇÇ„ÅÜÁµÇ„Çè„Å£„Å¶„Åæ„Åô„Çà„Å≠Ôºü</span>ÔºàYESÔºâ<br>
                            „Å†„Å£„Åü„ÇâÂ§ß‰∏àÂ§´„Åß„Åô„ÇàÔºÅ<br><br>
                            „Å™„Åú„Åã„Å®Ë®Ä„ÅÑ„Åæ„Åô„Å®„ÄÅÊúÄÂàù„ÅÆ„ÅäÊîØÊâï„ÅÑ„ÅåÁµÇ„Çè„Å£„ÅüÊôÇÁÇπ„Åß„ÅäÁü•„ÇäÂêà„ÅÑ„ÅÆÊñπ„Å´„ÅØ<span class="highlight">Á¥π‰ªãÊñô„ÅåÊåØ„ÇäËæº„Åæ„Çå„Å¶„Åæ„Åô</span>„ÅÆ„Åß‰ªä„ÅäÂÆ¢Êßò„Åå„Å©„Åì„Å´Â§â„Åà„Å¶„ÇÇ„Åù„ÅÆÊñπ„Å´„ÅØ‰Ωï„ÅÆÂΩ±Èüø„ÇÇ„Å™„ÅÑ„ÅÆ„Åß„ÅîÂÆâÂøÉ„Åè„Å†„Åï„ÅÑ‚òÜ
                        </div>
                        <div class="modal-note">‚Äª‰ª£ÁêÜÂ∫ó„Å´Áü•„ÇäÂêà„ÅÑ„Åå„ÅÑ„ÇãÂ†¥Âêà„Å´ÊúâÂäπ„Å™„Éà„Éº„ÇØ<br>‚Äª‰∫∫ÊÉÖÁ≥ª„ÅØÊ≠£Áõ¥Èõ£„Åó„ÅÑ„ÅÆ„ÅßË¶ãÂàá„Çä‰ªò„Åë„Å¶Ëá™ÂÆÖÊ°àÂÜÖ„Å´Âàá„ÇäÊõø„Åà</div>
                    `},
                    { id: 'setDiscount', label: '„Äå„Çª„ÉÉ„ÉàÂâ≤„Åå„ÅÇ„Çã„Äç', title: '„Äå„Ç¨„Çπ‰ª£„ÄÅÊê∫Â∏Ø‰ª£„Å™„Å©„Å®„Çª„ÉÉ„ÉàÂâ≤Âºï„Åå‰ªò„ÅÑ„Å¶„Çã„Äç', content: `
                        <div class="modal-talk">
                            „Åù„Å°„Çâ„Å™„Çì„Åß„Åô„Åå„ÄÅÁµêË´ñ<span class="highlight">„Éà„Éº„Çø„É´„ÅßË¶ã„Çã„Å®‰ªä„Çà„Çä„ÅäÂÆâ„Åè„Å™„Çã</span>„Çì„Åß„Åô„Å≠ÔºÅ<br><br>
                            „Å©„ÅÜ„ÅÑ„ÅÜ‰∫ã„Åã„Å®Ë®Ä„ÅÜ„Å®„ÄÅ‰ªäÂõû„ÅîÁ¥π‰ªã„Åó„Å¶„ÅÑ„Çã„Éë„É´„Éë„ÉØ„Éº„Åß„Çì„Åç„Å´Â§âÊõ¥„Åó„Åæ„Åô„Å®„Åä„Å£„Åó„ÇÉ„Çâ„Çå„Å¶„Çã„Çª„ÉÉ„ÉàÂâ≤Âºï„ÅØ„Å§„Åã„Å™„Åè„Å™„Å£„Å¶„Åó„Åæ„ÅÜ„Çì„Åß„Åô„Å≠„ÄÇ<br><br>
                            „Åü„Å†„ÄÅ„Åù„ÅÆÂàÜ<span class="highlight">ÈõªÊ∞óÊñôÈáë„ÅÆÊñπ„Å´Â§ßÂπÖ„Å´Ââ≤Âºï</span>„Çí‰ªò„Åë„Åï„Åõ„Å¶„ÅÑ„Åü„Å†„ÅÑ„Å¶„ÅÑ„Çã„ÅÆ„ÅßÁµêÊûúÁöÑ„Å´ÂêàË®à„ÅßË¶ã„Çã„Å®‰ªä„Çà„Çä„ÅäÂÆâ„Åè„Å™„Çã„Çì„Åß„Åô„ÇàÔºÅ<br><br>
                            ÈõªÊ∞ó‰ª£„Å®„Ç¨„Çπ‰ª£Ôºà„Ç±„Éº„Çø„Ç§‰ª£Ôºâ„ÅÆÂêàË®à„Åå‰ªä„Çà„Çä„ÇÇ„ÅäÂÆâ„Åè„Å™„Çå„Å∞„ÅîÂïèÈ°å„Å™„ÅÑ„Åß„Åô„Çà„Å≠Ôºü‚òÜ
                        </div>
                    `}
                ]
            },
            'step6c': {
                title: 'STEP 6-C: „Ç™„Éº„É´ÈõªÂåñÁ¢∫Ë™ç',
                name: '„Ç™„Éº„É´ÈõªÂåñÁ¢∫Ë™ç',
                progress: 65,
                content: `
                    <div class="talk-display">
                        „ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô„ÄÇ<br>
                        <span class="highlight">„Ç™„Éº„É´ÈõªÂåñ„ÇÑ„Ç®„Ç≥„Ç≠„É•„Éº„Éà</span>„Åß„ÅØ„Å™„ÅÑ„Åß„Åó„Çá„ÅÜ„ÅãÔºü
                    </div>
                `,
                choices: [
                    { text: '„Å™„Åó', sub: '‚úÖ Áç≤ÂæóÂèØËÉΩ ‚Üí ÊòéÁ¥∞Á¢∫Ë™ç„Å∏', next: 'step7', class: 'success' },
                    { text: '„Ç™„Éº„É´ÈõªÂåñ/„Ç®„Ç≥„Ç≠„É•„Éº„Éà/„Ç®„Éç„Éï„Ç°„Éº„É†„ÅÇ„Çä', sub: '‚Üí ÂãïÂäõÁ¢∫Ë™ç„Å∏', next: 'step6d2', class: 'warning' }
                ],
                helps: []
            },
            'step6d': {
                title: 'STEP 6-D: ÂãïÂäõÁ¢∫Ë™ç',
                name: 'ÂãïÂäõÁ¢∫Ë™ç',
                progress: 65,
                content: `
                    <div class="talk-display">
                        „Åß„ÅØÂæìÈáèÈõªÂäõÔºà100VÔºâ„ÅØ„ÅäÂÆâ„Åè„Åä‰Ωø„ÅÑ„Å†„Å®ÊÄù„ÅÜ„ÅÆ„Åß„Åô„Åå‚ô™<br>
                        „Å°„Å™„Åø„Å´<span class="highlight">ÂãïÂäõÔºà‰ΩéÂúßÈõªÂäõ 200VÔºâ</span>„ÅØ„Åä‰Ωø„ÅÑ„Åß„Åô„ÅãÔºü
                    </div>
                    <div class="talk-display tip">
                        <span class="talk-note">üí° ÂãïÂäõ„ÅÆ‰æãÔºöÊ•≠ÂãôÁî®„Ç®„Ç¢„Ç≥„É≥„ÄÅÂÜ∑ËîµÂ∫´„ÄÅÈ£üÊ¥óÊ©ü„ÄÅÈõªÂãï„Ç∑„É£„ÉÉ„Çø„Éº„ÄÅ„Ç≥„É≥„Éó„É¨„ÉÉ„Çµ„ÉºÁ≠â</span>
                    </div>
                `,
                choices: [
                    { text: 'ÂãïÂäõ‰Ωø„Å£„Å¶„Çã', sub: '‚úÖ Áç≤ÂæóÂèØËÉΩ ‚Üí ÊòéÁ¥∞Á¢∫Ë™ç„Å∏', next: 'step7', class: 'success' },
                    { text: 'ÂãïÂäõ„Å™„Åó', sub: '‚Üí „Ç™„Éº„É´ÈõªÂåñÁ¢∫Ë™ç', next: 'step6d2', class: '' }
                ],
                helps: []
            },
            'step6d2': {
                title: 'STEP 6-D-2: „Ç™„Éº„É´ÈõªÂåñÁ¢∫Ë™çÔºàÂØæË±°Â§ñÂà§ÂÆöÔºâ',
                name: '„Ç™„Éº„É´ÈõªÂåñÁ¢∫Ë™ç',
                progress: 65,
                content: `
                    <div class="talk-display">
                        <span class="highlight">„Ç™„Éº„É´ÈõªÂåñ„ÇÑ„Ç®„Ç≥„Ç≠„É•„Éº„Éà</span>„Åß„ÅØ„Å™„ÅÑ„Åß„Åó„Çá„ÅÜ„ÅãÔºü
                    </div>
                `,
                choices: [
                    { text: '„Å™„Åó', sub: '‚úÖ Áç≤ÂæóÂèØËÉΩÔºàË¶ÅÁ¢∫Ë™çÔºâ‚Üí ÊòéÁ¥∞Á¢∫Ë™ç„Å∏', next: 'step7', class: 'success' },
                    { text: '„Ç™„Éº„É´ÈõªÂåñ/„Ç®„Ç≥„Ç≠„É•„Éº„Éà/„Ç®„Éç„Éï„Ç°„Éº„É†„ÅÇ„Çä', sub: 'ÈõªÊ∞ó„ÅØÂØæË±°Â§ñ ‚Üí „Éç„ÉÉ„ÉàÊ°àÂÜÖ„Å∏', next: 'step8net', class: 'warning' }
                ],
                helps: []
            },
            'step6e': {
                title: 'STEP 6-E: È´òÂúßÁ¢∫Ë™ç',
                name: 'È´òÂúßÁ¢∫Ë™ç',
                progress: 65,
                content: `
                    <div class="talk-display">
                        <span class="highlight">„Ç≠„É•„Éº„Éì„ÇØ„É´</span>Ôºà‰∫ãÊ•≠ÊâÄ„ÅÆÂ§ñ„Å®„Åã„Å´2m„Åê„Çâ„ÅÑ„ÅÆÁôΩ„ÅÑÂ§ß„Åç„ÅÑÁÆ±Ôºâ„ÅØ„ÅÇ„Çä„Åæ„Åô„ÅãÔºü
                    </div>
                    <div class="talk-display tip">
                        <span class="talk-note">üí° È´òÂúß„ÅÆÂèØËÉΩÊÄß„ÅåÈ´ò„ÅÑ‰∫ãÊ•≠ÊâÄÔºö„Çπ„Éº„Éë„Éº„ÄÅ„Ç¥„É´„ÉïÂ†¥„ÄÅÊóÖÈ§®„ÄÅÂ∑•Â†¥„ÄÅÊ∏©Ê≥â„ÄÅËë¨Á•≠Â†¥„ÄÅÊïôÁøíÊâÄ„Å™„Å©</span>
                    </div>
                `,
                choices: [
                    { text: '„ÅÇ„Çã/„ÅÇ„Çã„Åã„ÇÇ', sub: '‚Üí È´òÂúßË©≥Á¥∞„Éí„Ç¢„É™„É≥„Ç∞', next: 'step6e2', class: '' },
                    { text: '„Å™„ÅÑ/„Çè„Åã„Çâ„Å™„ÅÑ', sub: '‚úÖ Áç≤ÂæóÂèØËÉΩ ‚Üí ÊòéÁ¥∞Á¢∫Ë™ç„Å∏', next: 'step7', class: 'success' }
                ],
                helps: []
            },
            'step6e2': {
                title: 'STEP 6-E-2: È´òÂúßË©≥Á¥∞„Éí„Ç¢„É™„É≥„Ç∞',
                name: 'È´òÂúßË©≥Á¥∞„Éí„Ç¢„É™„É≥„Ç∞',
                progress: 65,
                content: `
                    <div class="talk-display">
                        Ôºà„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„ÅôÔºÅÔºâ<br>
                        ÁèæÂú®„Åô„Åπ„Å¶„ÅÆÈõªÂäõ‰ºöÁ§æ„ÅåÁáÉÊñôÈ´òÈ®∞„ÅÆ„ÅÇ„Åä„Çä„ÇíÂèó„Åë„Å¶„ÅÑ„Çã„Åì„Å®„ÇÑ„ÄÅÊîøÂ∫ú„ÅÆË£úÂ°´„ÅåÁµÇ‰∫Ü„Åó„Åü„Çø„Ç§„Éü„É≥„Ç∞Á≠â„ÅØ„ÄÅÁâπ„Å´ÈõªÊ∞ó‰ª£„Åå„ÅÇ„Åå„Çã„Åü„ÇÅ„ÄÅ„ÅÑ„ÅæÂàá„ÇäÊõø„Åà„ÅÆÊù°‰ª∂„ÅåÂá∫„ÇÑ„Åô„ÅÑÊôÇÊúü„Å™„Çì„Åß„Åô„Å≠ÔºÅ<br><br>
                        È´òÂúß„Åä‰Ωø„ÅÑ„ÅÆÂ†¥Âêà„ÅØ„ÄÅ<span class="highlight">Áõ¥Ëøë1Âπ¥ÂàÜ„ÅÆÊòéÁ¥∞ÔºàË´ãÊ±ÇÊõ∏Ôºâ„ÅÆ„ÅîÊ∫ñÂÇô</span>„Çí„ÅÑ„Åü„Å†„ÅÑ„Å¶„Åä„Çä„Åæ„Åô„ÄÇ<br>
                        ÊØéÊúà„ÄÅÈõªÂäõ‰ºöÁ§æ„Åï„Çì„Åã„ÇâÂ±ä„ÅèÊòéÁ¥∞„ÅÆ‰øùÁÆ°„ÅØ„Åî„Åñ„ÅÑ„Åæ„Åô„ÅãÔºü
                    </div>
                `,
                choices: [
                    { text: 'ÊòéÁ¥∞„ÅÇ„Çã', sub: '‚Üí Êõ¥Êñ∞ÊúàÁ¢∫Ë™ç', action: 'showHelp', helpId: 'renewalMonth', class: 'primary' },
                    { text: 'ÊòéÁ¥∞„Å™„ÅÑ/„Çè„Åã„Çâ„Å™„ÅÑ', sub: '‚Üí Á¢∫Ë™ç„ÅäÈ°ò„ÅÑ„Åó„Å¶ÂÜçÊû∂Èõª', next: 'endRecallScheduled', class: '' }
                ],
                helps: [
                    { id: 'renewalMonth', label: 'Êõ¥Êñ∞ÊúàÁ¢∫Ë™ç', title: 'Êõ¥Êñ∞ÊúàÁ¢∫Ë™ç', content: `
                        <div class="modal-talk">
                            „Äå„Å°„Å™„Åø„Å´ <span class="highlight">Êõ¥Êñ∞Êúà„ÅØ„ÅÑ„Å§È†É</span>„Åß„Åó„Çá„ÅÜ„ÅãÔºü„Äç
                        </div>
                        <div class="modal-note">
                            „ÉªÊõ¥Êñ∞„ÅÆ„Çø„Ç§„Éü„É≥„Ç∞ ‚Üí ‚úÖ Áç≤ÂæóÂèØËÉΩ ‚Üí ÊòéÁ¥∞Á¢∫Ë™ç„Å∏<br>
                            „ÉªÊõ¥Êñ∞Êúà„Åß„Å™„ÅÑ ‚Üí „ÄåÈõªÊ∞ó„ÅØ„Åæ„ÅüÊõ¥Êñ∞Êúà„ÅåËøë„Å•„Åç„Åæ„Åó„Åü„Çâ„ÄÅ„ÅîÊèêÊ°à„Åï„Åõ„Å¶„ÅÑ„Åü„Å†„Åç„Åæ„Åô„Å≠ÔºÅ„Äç‚Üí „Éç„ÉÉ„ÉàÊ°àÂÜÖ„Å∏
                        </div>
                    `}
                ]
            },
            'step7': {
                title: 'STEP 7: ÊòéÁ¥∞Á¢∫Ë™ç',
                name: 'ÊòéÁ¥∞Á¢∫Ë™ç',
                progress: 70,
                content: `
                    <div class="talk-display">
                        „ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„ÅôÔºÅ<br>
                        „Å°„Å™„Åø„Å´„ÅäÊñôÈáë„ÅÆÁ¢∫Ë™ç„ÅØ„ÄÅÊØéÊúàÂ±ä„Åè <span class="highlight">Á¥ôÊòéÁ¥∞ÔºàÊ§úÈáùÁ•®Ôºâ</span>„Åß„Åô„ÅãÔºü<br>
                        „ÇÇ„Åó„Åè„ÅØ„ÄÅÊê∫Â∏Ø„ÇÑ„Éë„ÇΩ„Ç≥„É≥„Åã„Çâ <span class="highlight">WEBÊòéÁ¥∞</span>„Åß„Åø„Çâ„Çå„Å¶„Åæ„Åô„ÅãÔºü
                    </div>
                `,
                choices: [
                    { text: 'Á¥ôÊòéÁ¥∞', sub: '‚Üí „ÇØ„É≠„Éº„Ç∏„É≥„Ç∞„Å∏', next: 'step9', class: 'primary' },
                    { text: 'WEBÊòéÁ¥∞', sub: '‚Üí ID/PWÁ¢∫Ë™çÂæå„ÇØ„É≠„Éº„Ç∏„É≥„Ç∞„Å∏', action: 'showHelp', helpId: 'webBill', class: '' },
                    { text: '„Éç„ÉÉ„Éà„ÇÇ‰∏ÄÁ∑í„Å´ËÅû„Åç„Åü„ÅÑ', sub: '‚Üí „Éç„ÉÉ„ÉàÊ°àÂÜÖ„Å∏', next: 'step8net', class: '' }
                ],
                helps: [
                    { id: 'webBill', label: 'WEBÊòéÁ¥∞Á¢∫Ë™ç', title: 'WEBÊòéÁ¥∞„ÅÆÂ†¥Âêà„ÅÆÁ¢∫Ë™ç', content: `
                        <div class="modal-talk">
                            „Äå„Éû„Ç§„Éö„Éº„Ç∏„Å´„É≠„Ç∞„Ç§„É≥„Åô„Çã„Åü„ÇÅ„ÅÆ<span class="highlight">ID„Å®„Éë„Çπ„ÉØ„Éº„Éâ</span>„ÅØ„ÅäÊåÅ„Å°„Åß„Åô„ÅãÔºü„Äç
                        </div>
                        <div class="modal-note">‚Üí Á¢∫Ë™çÂæå„ÄåÁ¥ôÊòéÁ¥∞„Äç„Éú„Çø„É≥„Åß„ÇØ„É≠„Éº„Ç∏„É≥„Ç∞„Å∏ÈÄ≤„ÇÄ</div>
                    `}
                ]
            },
            'step8net': {
                title: 'STEP 8: „Éç„ÉÉ„Éà„ÉªÈõªË©±ÂõûÁ∑öÊ°àÂÜÖ',
                name: '„Éç„ÉÉ„ÉàÊ°àÂÜÖ',
                progress: 75,
                content: `
                    <div class="talk-display">
                        ÈõªÊ∞ó„ÅØÊõø„Åà„Çâ„Çå„Å™„ÅÑ„Çà„ÉºÔºÅ„Å®„Åä„Å£„Åó„ÇÉ„Çã„ÅäÂÆ¢Êßò„Å´„ÅØ„ÄÅ<br>
                        <span class="highlight">ÈÄö‰ø°‰ºöÁ§æ„Åï„Åæ„Å´„ÇÇÂçîË≥õ</span>„ÅÑ„Åü„Å†„ÅÑ„Å¶„ÅÑ„Çã„Åü„ÇÅ„ÄÅ<br>
                        „Éç„ÉÉ„ÉàÂõûÁ∑ö„ÇÑ„ÅäÈõªË©±ÂõûÁ∑ö„ÅÆÁÑ°ÊñôË¶ãÁ©ç„Çä„Çí„Åø„Å¶„ÅÑ„Åü„Å†„Åè„Åì„Å®„Åß„ÇÇÂØæÂøú„Åï„Åõ„Å¶„ÅÑ„Åü„Å†„ÅÑ„Å¶„Åä„Çä„Åæ„Åô‚ô™<br><br>
                        „Ç§„É≥„Çø„Éº„Éç„ÉÉ„Éà„Å´Èñ¢„Åó„Åæ„Åó„Å¶„ÅØ„ÄÅ„Åô„Åß„Å´NTT„Åß„Ç§„É≥„Çø„Éº„Éç„ÉÉ„Éà„Åï„Çå„Å¶„ÅÑ„Çã„ÅäÂÆ¢Êßò„Å∏„ÄÅ„ÅÑ„Åæ„Åä‰Ωø„ÅÑ„ÅÆÁí∞Â¢É„Å™„Å©„ÅØÂ§â„Çè„Çâ„ÅöÊúà„ÄÖ„ÅÆ„ÅîË≤†ÊãÖ„Åß„ÅÇ„Çã<span class="highlight">Âõ∫ÂÆöË≤ªÂâäÊ∏õ</span>„ÅÆ„ÅîÊèêÊ°à„Åå„Åß„Åç„Åæ„Åô‚ô™<br><br>
                        „Å°„Å™„Åø„Å´„ÄÅ„Éç„ÉÉ„ÉàÂõûÁ∑ö„ÅØ„Å©„Å°„Çâ„Åß„ÅäÁπã„Åé„Åß„Åó„Çá„ÅÜ„ÅãÔºü
                    </div>
                `,
                choices: [
                    { text: 'NTTÁ≥ªÔºà„Éï„É¨„ÉÉ„ÉÑÂÖâÁ≠âÔºâ', sub: '‚Üí NTTÁ≥ª„Éí„Ç¢„É™„É≥„Ç∞', next: 'step8netA', class: 'primary' },
                    { text: 'eoÂÖâ/J:COM/„Ç±„Éº„Éñ„É´Á≥ª', sub: '‚Üí Âàá„ÇäÊõø„ÅàÊèêÊ°à', next: 'step8netB', class: '' },
                    { text: '„Ç¢„Éä„É≠„Ç∞ÈõªË©±„ÅÆ„Åø', sub: '‚Üí ÂÖâÈõªË©±ÊèêÊ°à', next: 'step8netC', class: '' },
                    { text: '„Çè„Åã„Çâ„Å™„ÅÑ', sub: '‚Üí NTTÊ©üÂô®Á¢∫Ë™ç', action: 'showHelp', helpId: 'checkNtt', class: '' }
                ],
                helps: [
                    { id: 'checkNtt', label: 'NTTÊ©üÂô®Á¢∫Ë™ç', title: '„Éç„ÉÉ„ÉàÁπã„ÅÑ„Åß„Çã„Åë„Å©„ÄÅ„Å©„Åì„Åã„Çè„Åã„Çâ„Å™„ÅÑÂ†¥Âêà', content: `
                        <div class="modal-talk">
                            „Éª„ÅäÈõªË©±Ê©ü„ÅÆËøë„Åè„Å´<span class="highlight">ÈªíËâ≤„ÅÆ„ÅäÂºÅÂΩìÁÆ±„Çµ„Ç§„Ç∫</span>ÔºàÊâã„ÅÆ„Å≤„Çâ„Çµ„Ç§„Ç∫Ôºâ„ÅÆ„ÉÅ„Ç´„ÉÅ„Ç´„Å≤„Åã„ÇãÊ©üÊ¢∞„ÅØ„ÅÇ„Çä„Åæ„Åô„ÅãÔºü<br><br>
                            ‚Üí „ÅÇ„ÇãÂ†¥ÂêàÔºö„Äå„Åù„Å°„Çâ„Å´<span class="highlight">NTT„Å®„ÅÑ„ÅÜ„É≠„Ç¥</span>„ÅØ„ÅÇ„Çä„Åæ„Åô„ÅãÔºü„Äç<br>
                            ‚Üí „ÅÇ„Çã ‚Üí„Äå„Åù„Å°„Çâ„Åå„ÅÇ„Çå„Å∞NTTÂÖâÂõûÁ∑ö„Åß„Éç„ÉÉ„Éà„Åä‰Ωø„ÅÑ„Åß„Åô„ÄÇ„Äç<br><br>
                            „ÉªÊØéÊúàNTT„Åï„Çì„Åã„ÇâË´ãÊ±ÇÊõ∏„ÅØÂ±ä„ÅÑ„Å¶„Å™„ÅÑ„Åß„Åó„Çá„ÅÜ„ÅãÔºü<br>
                            ‚Üí Â±ä„ÅÑ„Å¶„ÅÑ„Çã ‚Üí NTTÂõûÁ∑ö„Åß„Éç„ÉÉ„Éà„Åä‰Ωø„ÅÑ„Åß„Åô
                        </div>
                        <div class="modal-note">‚Üí Á¢∫Ë™çÂæå„ÄÅÈÅ©Âàá„Å™ÈÅ∏ÊäûËÇ¢„ÇíÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ</div>
                    `}
                ]
            },
            'step8netA': {
                title: 'STEP 8-NET-A: NTTÂÖâÂõûÁ∑öÁ≥ª',
                name: 'NTTÁ≥ª„Éí„Ç¢„É™„É≥„Ç∞',
                progress: 80,
                content: `
                    <div class="talk-display">
                        NTTÂÖâÂõûÁ∑öÁ≥ª„Çí„Åä‰Ωø„ÅÑ„Å™„Çì„Åß„Åô„Å≠ÔºÅ
                    </div>
                    <div class="talk-display tip">
                        <strong>„Éí„Ç¢„É™„É≥„Ç∞È†ÖÁõÆ</strong><br>
                        „ÉªÊúà„ÄÖ„Åä„ÅÑ„Åè„Çâ„Åè„Çâ„ÅÑ„ÅäÊîØÊâï„ÅÑ„Åß„Åô„ÅãÔºü<br>
                        „Éª„Éó„É≠„Éê„Ç§„ÉÄ„ÅØ„Å©„Å°„Çâ„Åä‰Ωø„ÅÑ„Åß„Åô„ÅãÔºü<br>
                        „ÉªÊôÆÊÆµ„ÅäÊñôÈáë„ÅØ„Å©„ÅÆ„Çà„ÅÜ„Å´Á¢∫Ë™ç„Åï„Çå„Å¶„Åæ„Åô„ÅãÔºü<br>
                        „ÉªÊòéÁ¥∞„ÅØ„ÅÇ„Çä„Åæ„Åô„ÅãÔºüÔºàÁ¥ô or WEBÔºüÔºâ
                    </div>
                `,
                choices: [
                    { text: '„Éí„Ç¢„É™„É≥„Ç∞ÂÆå‰∫Ü', sub: '‚Üí „ÇØ„É≠„Éº„Ç∏„É≥„Ç∞„Å∏', next: 'step9', class: 'success' },
                    { text: '„Éç„ÉÉ„Éà„ÇÇ„ÅÑ„Çâ„Å™„ÅÑ', sub: '‚Üí ÂØæË±°Â§ñ', next: 'endNotTarget', class: 'danger' }
                ],
                helps: []
            },
            'step8netB': {
                title: 'STEP 8-NET-B: eoÂÖâ/J:COMÁ≠â',
                name: 'eoÂÖâÁ≠â„ÅÆÂØæÂøú',
                progress: 80,
                content: `
                    <div class="talk-display">
                        ‰ªäÂõû„ÅØNTTÂÖâÂõûÁ∑öÁ≥ª„ÅÆ„Ç§„É≥„Çø„Éº„Éç„ÉÉ„ÉàÂõûÁ∑ö„ÅÆÊ°àÂÜÖ„Å®„Å™„Çã„Çì„Åß„Åô„Åå„ÄÅ<br>
                        <span class="highlight">„Åä‰ªï‰∫ã„Åß„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ„ÅÆ„ÅîÂà©Áî®</span>„Å£„Å¶„Åî„Åñ„ÅÑ„Åæ„Åô„Åß„Åó„Çá„ÅÜ„ÅãÔºü
                    </div>
                `,
                choices: [
                    { text: '„É°„Éº„É´‰Ωø„Å£„Å¶„Å™„ÅÑ', sub: '‚Üí NTTÂàá„ÇäÊõø„ÅàÊèêÊ°à', action: 'showHelp', helpId: 'nttSwitch', class: 'primary' },
                    { text: '„É°„Éº„É´‰Ωø„Å£„Å¶„Çã', sub: '‚Üí Âàá„ÇäÊõø„ÅàÈõ£„Åó„ÅÑ', next: 'endNotTarget', class: '' }
                ],
                helps: [
                    { id: 'nttSwitch', label: 'NTTÂàá„ÇäÊõø„ÅàÊèêÊ°à', title: 'NTTÂàá„ÇäÊõø„ÅàÊèêÊ°à', content: `
                        <div class="modal-talk">
                            „Åù„Çå„Åß„ÅÇ„Çå„Å∞„ÄÅNTT„ÅÆÂõûÁ∑ö„Çí„Åä‰Ωø„ÅÑ„ÅÑ„Åü„Å†„Åè„Åì„Å®„Åß„ÄÅÈÄö‰ø°Ë≤ª„Åå‰ªä„Çà„Çä„Åä„Éà„ÇØ„Å´„ÅîÂà©Áî®„ÅÑ„Åü„Å†„Åë„Çã„Åã„ÇÇ„Åó„Çå„Åæ„Åõ„Çì„ÅÆ„Åß„ÄÅÂÆüÈöõ„Å´„Å©„ÅÆ„Åè„Çâ„ÅÑ„ÅäÂÆâ„Åè„Å™„Çã„Åã„ÅäË©±„ÇíËÅû„ÅÑ„Å¶„ÅÑ„Åü„Å†„Åë„Çå„Å∞„Å®ÊÄù„ÅÑ„Åæ„ÅôÔºÅ
                        </div>
                        <div class="modal-note">
                            Q.„ÄåÂ∑•‰∫ãË≤ªÁî®„ÇÑÈÅïÁ¥ÑÈáë„ÅØÔºü„Äç<br>
                            A. ‰ªäÂõû„ÅØ„Ç≠„É£„É≥„Éö„Éº„É≥„Å™„ÅÆ„Åß„ÄÅ„Åô„Åπ„Å¶ÂºäÁ§æË≤†ÊãÖ„Åß„ÅôÔºÅ
                        </div>
                    `}
                ]
            },
            'step8netC': {
                title: 'STEP 8-NET-C: „Ç¢„Éä„É≠„Ç∞ÂõûÁ∑ö',
                name: '„Ç¢„Éä„É≠„Ç∞ÂõûÁ∑öÂØæÂøú',
                progress: 80,
                content: `
                    <div class="talk-display">
                        „Ç¢„Éä„É≠„Ç∞„ÅÆ„ÅäÈõªË©±„Å†„Åë„Åß„Åä‰Ωø„ÅÑ„Åß„Åô„ÅãÔºü<br><br>
                        „ÇÜ„Åè„ÇÜ„Åè„ÅØ<span class="highlight">„Ç¢„Éä„É≠„Ç∞ÂõûÁ∑öÔºàÈÄöÂ∏∏ÂõûÁ∑öÔºâ„ÅåÂªÉÊ≠¢</span>„Å®„Å™„Çã„Åü„ÇÅ„ÄÅ„Ç¢„Éä„É≠„Ç∞ÂõûÁ∑ö„Åã„ÇâÂÖâÂõûÁ∑öÁßªË°å„ÅÆÊ°àÂÜÖ„ÅåÂ∫É„Åæ„Çä„Å§„Å§„ÅÇ„Çã„ÅÆ„Åß„Åô„Åå„ÅäÂÆ¢Êßò„ÅÆ„Å®„Åì„Çç„Å´„ÅØ„ÄÅNTT„Åï„Çì„ÇÑ„ÇΩ„Éï„Éà„Éê„É≥„ÇØ„Åï„Çì„Åã„Çâ„Åì„ÅÜ„ÅÑ„ÅÜÊ°àÂÜÖ„ÅÆ„ÅäÁü•„Çâ„Åõ„Å®„Åã„Å£„Å¶„ÇÇ„ÅÜÂ±ä„Åç„Åæ„Åó„Åü„ÅãÔºüÔºü<br><br>
                        „Ç¢„Éä„É≠„Ç∞„Åß„Åä‰Ωø„ÅÑ„ÅÑ„Åü„Å†„Åè„Çà„Çä„ÄÅÊúà„ÄÖ„ÅÆÂü∫Êú¨ÊñôÈáë„ÇÇÈÄöË©±Êñô„ÇÇ„ÅäÂÆâ„ÅÑ<span class="highlight">ÂÖâÈõªË©±</span>„Å´„Åø„Å™„Åï„ÅæÈ†Ü„ÄÖ„Å´ÂàáÊõø„Åà„Å¶„ÅÑ„Åü„Å†„ÅÑ„Å¶„Åæ„Åó„Å¶„ÄÅÂºäÁ§æ„ÅØ‰ªäÂõû„Åù„ÅÆ„ÅîÊ°àÂÜÖ„ÅåÂèØËÉΩ„Å®„Å™„Çä„Åæ„ÅôÔºÅ
                    </div>
                    <div class="talk-display tip">
                        <span class="talk-note">üí° NTT„Åï„Çì„ÅØ2026Âπ¥‰ª•Èôç„ÄÅÂÖâÂõûÁ∑ö„Å∏„ÅÆÂàá„ÇäÊõø„Åà„Çí„Åï„Çâ„Å´ÈÄ≤„ÇÅ„Çã‰∫àÂÆö„Åß„Åô„ÄÇÊúÄÁµÇÁöÑ„Å´„ÅØ„ÄÅ2030Âπ¥ÔΩû2035Âπ¥Â∫¶„ÇíÁõÆÂá¶„Å´ÂÖ®ÂõΩÁöÑ„Å´„Ç¢„Éä„É≠„Ç∞„Åã„ÇâÂÖâ„Å∏„ÅÆÁßªË°å„ÅåÂÆå‰∫Ü„Åô„ÇãË¶ãËæº„Åø„Åß„Åô„ÄÇ</span>
                    </div>
                `,
                choices: [
                    { text: 'ËààÂë≥„ÅÇ„Çã/ËÅû„ÅÑ„Å¶„Åø„Çã', sub: '‚Üí „Éí„Ç¢„É™„É≥„Ç∞Âæå„ÇØ„É≠„Éº„Ç∏„É≥„Ç∞„Å∏', next: 'step9', class: 'success' },
                    { text: '„ÅÑ„Çâ„Å™„ÅÑ', sub: '‚Üí ÂØæË±°Â§ñ', next: 'endNotTarget', class: '' }
                ],
                helps: [
                    { id: 'cantInstall', label: '„ÄåÈÅéÂéª„Å´Âºï„Åë„Å™„ÅÑ„Å®Ë®Ä„Çè„Çå„Åü„Äç', title: '„ÄåÈÅéÂéª„Å´„Éç„ÉÉ„ÉàÂºï„Åë„Å™„ÅÑ„Å®Ë®Ä„Çè„Çå„Åü„Åì„Å®„Åå„ÅÇ„Çã„Äç', content: `
                        <div class="modal-talk">
                            „Äå„Å™„Åú„Å†„ÇÅ„Å†„Å£„Åü„Åã„Äç„ÅÆÁêÜÁî±„Å´„ÇÇ„Çà„Çä„Åæ„Åô„Åå„ÄÅ„Åù„ÅÆ„Çà„ÅÜ„Å´„Åä„Å£„Åó„ÇÉ„Çã„ÅäÂÆ¢Êßò„Å£„Å¶ÂÆü„ÅØÂ§ö„ÅÑ„Çì„Åß„Åô„ÇàÔºÅ<br><br>
                            Â∑•‰∫ãÊãÖÂΩìËÄÖ„Å´„Çà„Å£„Å¶Âà§Êñ≠„Åå„Åï„Åæ„Åñ„Åæ„Å†„Å®„ÅÑ„ÅÜ„Åì„Å®„ÇÇ1„Å§„ÅÆË¶ÅÂõ†„Å™„ÅÆ„Åß„Åô„Åå„ÄÅ„Åü„Å®„Åà„Å∞‰ΩúÊ•≠Âì°„ÅÆ„ÄåÁµåÈ®ìÂÄ§„Éª„Åù„ÅÆÊó•„ÅÆ„Çπ„Ç±„Ç∏„É•„Éº„É´„Äç„Å™„Å©„Å´„Çà„Å£„Å¶„ÇÇÂ∞éÂÖ•„Åß„Åç„Çã„ÅãÂê¶„Åã„ÅÆÁµêÊûú„ÅåÂ∑¶Âè≥„Åï„Çå„Çã„Ç±„Éº„Çπ„ÅåÂ∞ë„Å™„Åè„Å™„ÅÑ„Çì„Åß„Åô„Å≠„ÄÇ<br><br>
                            „Åü„Å†ÂºäÁ§æ„Åß„ÅØ„ÄÅ<span class="highlight">Èï∑Âπ¥„Åä‰ªò„ÅçÂêà„ÅÑ„ÅÆ„ÅÇ„ÇãÂÖ•Á∑öÂ∞ÇÈñÄÊ•≠ËÄÖ„Åï„Çì</span>„Å´„ÅäÈ°ò„ÅÑ„Åó„Å¶„Åä„Çä„Åæ„Åô„ÅÆ„Åß„ÄÅ‰ªä„Åæ„Åß‰ªñÁ§æ„Åï„Çì„Åß"Èõ£„Åó„ÅÑ"„Å®„Åï„Çå„Å¶„ÅÑ„Åü„ÅäÂÆ¢Êßò„Åß„ÇÇ<span class="highlight">"ÈñãÈÄö„Åß„Åç„Åü„Çà‚òÜ"„Å£„Å¶„Ç±„Éº„Çπ„ÅåÂ§ö„Åè</span>Â§ßÂ§âÂñú„Å∞„Çå„Å¶„ÅÑ„Åæ„ÅôÔºÅ
                        </div>
                    `}
                ]
            },
            'step9': {
                title: 'STEP 9: „ÇØ„É≠„Éº„Ç∏„É≥„Ç∞',
                name: '„ÇØ„É≠„Éº„Ç∏„É≥„Ç∞',
                progress: 85,
                content: `
                    <div class="talk-display">
                        ‰ªäÂõû„ÅÆÂÜÖÂÆπ„ÇíÁ∞°Âçò„Å´„Åæ„Å®„ÇÅ„Çã„Å®<br><br>
                        ÊØéÊúà„ÅäÊîØÊâï„ÅÑ„ÅÆÔºàÈõªÊ∞óÊñôÈáë Ôºè „Éç„ÉÉ„ÉàÊñôÈáë Ôºè „ÅäÈõªË©±ÂõûÁ∑ö„ÅÆÊñôÈáëÔºâ„Åå<br>
                        <span class="highlight">‰ªä„Çà„Çä„Å©„Çå„Åè„Çâ„ÅÑ„ÅäÂÆâ„Åè„Å™„Çã„Åã</span>Ë¶ã„Å¶„ÅÑ„Åü„Å†„Åë„Å¶<br><br>
                        „ÄêÊíÆÂΩ±„ÅÇ„Çä„ÅÆÊñπ„Äëüì∑<br>
                        <span class="highlight">„Ç∞„Éº„Ç∞„É´ÊíÆÂΩ±„ÇÇÁÑ°Êñô„ÅßÂèó„Åë„Å¶„ÅÑ„Åü„Å†„Åë„Çã</span> „Å®„ÅÑ„ÅÜ„Ç≠„É£„É≥„Éö„Éº„É≥„Å´„Å™„Çä„Åæ„Åô‚ô™<br><br>
                        „ÄêÊíÆÂΩ±„Å™„Åó„ÅÆÊñπ„Äëüí∞<br>
                        <span class="highlight">„Ç≠„É£„ÉÉ„Ç∑„É•„Éê„ÉÉ„ÇØ„ÇíÂèó„Åë„Å¶„ÅÑ„Åü„Å†„Åë„Çã</span> „Å®„ÅÑ„ÅÜ„Ç≠„É£„É≥„Éö„Éº„É≥„Å´„Å™„Çä„Åæ„Åô‚ô™<br><br>
                        Ëâ≤„ÄÖ„Åä‰ºù„Åà„Åó„Åæ„Åó„Åü„Åå„ÄÅ‰ªäÂõû„ÅÆÂÜÖÂÆπ„ÅØ<span class="highlight">Ë≤ªÁî®„ÅØ‰∏ÄÂàá„Åã„Åã„Çâ„Å™„ÅÑ</span>„Åß„ÅôÔºÅ
                    </div>
                `,
                choices: [
                    { text: '„Çè„Åã„Å£„Åü/„ÅÑ„ÅÑ„Çà', sub: '‚Üí „Ç¢„ÉùÁ¢∫ÂÆö„Å∏', next: 'step10', class: 'success' },
                    { text: '„Éè„Ç§„Éè„Ç§Á≥ª/ÂèçÂøúËñÑ„ÅÑ', sub: '‚Üí ÂøµÊäº„Åó„Éà„Éº„ÇØ', action: 'showHelp', helpId: 'pushBack', class: '' },
                    { text: '„ÇÑ„Å£„Å±„Çä„ÅÑ„Çâ„Å™„ÅÑ', sub: '‚Üí Âàá„ÇäËøî„Åó or ÁµÇ‰∫Ü', action: 'showHelp', helpId: 'dontNeed', class: 'danger' }
                ],
                helps: [
                    { id: 'pushBack', label: '„Éè„Ç§„Éè„Ç§Á≥ª„Å∏„ÅÆÂøµÊäº„Åó', title: '„Éè„Ç§„Éè„Ç§Á≥ª„Å∏„ÅÆÂøµÊäº„Åó„Éà„Éº„ÇØ', content: `
                        <div class="modal-talk">
                            „Äå„ÅîË™¨Êòé„ÅØ‰ª•‰∏ä„Å´„Å™„Çä„Åæ„Åô„Åå„ÄÅ<br>
                            „Åì„Åì„Åæ„Åß„ÅÆ„Ç≠„É£„É≥„Éö„Éº„É≥„Å´„Å§„ÅÑ„Å¶<span class="highlight">„Åî‰∏çÊòéÁÇπ„ÅØ„Å™„Åã„Å£„Åü„Åß„Åô„ÅãÔºü</span>„Äç„Å®ËªΩ„ÅèÂøµÊäº„Åó„ÄÇ
                        </div>
                        <div class="modal-note">‚Üí Á¢∫Ë™çÂæå„Äå„Çè„Åã„Å£„Åü/„ÅÑ„ÅÑ„Çà„Äç„ÇíÈÅ∏Êäû</div>
                    `},
                    { id: 'dontNeed', label: '„Äå„ÅÑ„Çâ„Å™„ÅÑ„Äç„Å∏„ÅÆÂØæÂøú', title: '„ÇÑ„Å£„Å±„Çä„ÅÑ„Çâ„Å™„ÅÑ„Å∏„ÅÆÂØæÂøú', content: `
                        <div class="modal-talk">
                            <strong>Q.„Äå„Åì„Å£„Å°„Åå„Å™„Çì„Åã„Åô„Çã„Åì„Å®„ÅÇ„Çã„ÅÆÔºü„ÉªÊâãÁ∂ö„Åç„ÇÅ„Çì„Å©„ÅÑÁ≥ª„Äç</strong><br>
                            A. ‰ªäÂõû„ÄÅ<span class="highlight">Èù¢ÂÄí„Å™„ÅäÊâãÁ∂ö„Åç„ÅØ‰∏ÄÂàá„Åî„Åñ„ÅÑ„Åæ„Åõ„ÇìÔºÅ</span><br>
                            Âêå„Åò„Çà„ÅÜ„Å™„ÅîÂøÉÈÖç‰∫ã„Çí„ÅäÊåÅ„Å°„ÅÆ‰∫ãÊ•≠ËÄÖÊßò„ÅåÂ§ö„Åè„ÅÑ„Çâ„Å£„Åó„ÇÉ„Çã„ÅÆ„Åß„Åô„Åå„ÄÅÂÆüÈöõ„ÅÆ„Å®„Åì„Çç<span class="highlight">"ÁÑ°Êñô„Çµ„Éù„Éº„Éà"„Åß„Ç´„Éê„Éº</span>„Åß„Åç„Å¶„Åä„Çä„Åæ„Åô„ÅÆ„Åß„ÅîÂÆâÂøÉ„Åè„Å†„Åï„ÅÑ‚òÜ
                        </div>
                    `},
                    { id: 'bankruptcy', label: '„ÄåÊñ∞ÈõªÂäõ„ÅØÂÄíÁî£„ÅåÂøÉÈÖç„Äç', title: '„ÄåÊñ∞ÈõªÂäõ‰ºöÁ§æ„ÅÆÂÄíÁî£„ÇÑ‰∫ãÊ•≠Êí§ÈÄÄ„ÇíÊ∞ó„Å´„Åó„Å¶„Çã„Äç', content: `
                        <div class="modal-talk">
                            „Åù„ÅÜ„Å™„Çì„Åß„Åô„Çà„ÄúÔºÅ„ÅäÂÆ¢Êßò„Åå‰ª∞„ÇãÈÄö„Çä„ÄÅ„Åì„Åì1.2Âπ¥„ÅÆÁáÉÊñôÈ´òÈ®∞„ÅÆ„ÅÇ„Åä„Çä„ÇíÂèó„Åë„Å¶ÂÄíÁî£„Åï„Çå„Å¶„Çã‰ºöÁ§æ„Åï„Çì„ÇÇ„ÅÇ„Çã„ÅÆ„Åß„Åô„Åå<br><br>
                            <strong>„Äê„Éè„É´„Å®„Åè„ÅÆÂ†¥Âêà„Äë</strong><br>
                            ‰ªäÂõûÁßÅ„Å©„ÇÇ„Åå„ÅîÁ¥π‰ªã„Åó„Å¶„Çã„Éè„É´„Å®„Åè„Åß„Çì„Åç„ÅØ„ÄÅ‰∫ãÊ•≠ÊâÄÊßòÂêë„Åë„Å´Ââ≤Âºï„Çí„ÅîÊ°àÂÜÖ„Åó„Å¶„Çã‰ºöÁ§æ„ÅÆ‰∏≠„Åß<span class="highlight">„Ç∑„Çß„Ç¢„Åå1‰Ωç</span>„ÅÆ‰ºöÁ§æ„Å™„Çì„Åß„Åô„Å≠ÔºÅÊØç‰Ωì„ÅÆ‰ºöÁ§æ„ÇÇÔºàÂÖâÈÄö‰ø°„Å£„Å¶„ÅÑ„ÅÜÔºâ<span class="highlight">Êù±Ë®º„Éó„É©„Ç§„É†‰∏äÂ†¥</span>„ÅÆÂ§ß„Åç„ÅÑ‰ºöÁ§æ„Å´„Å™„Çä„Åæ„Åô„ÅÆ„Åß„ÄÅ„Åù„ÅÆ„ÅÇ„Åü„Çä„ÅØ„Åø„Å™„Åï„ÇìÂÆâÂøÉ„Åó„Å¶Ââ≤Âºï„ÇíÂèó„Åë„Å¶„ÅÑ„Åü„Å†„ÅÑ„Å¶„Åæ„Åô„ÄúÔºÅ
                        </div>
                    `}
                ]
            },
            'step10': {
                title: 'STEP 10: „Ç¢„ÉùÁ¢∫ÂÆö',
                name: '„Ç¢„ÉùÁ¢∫ÂÆö',
                progress: 95,
                content: `
                    <div class="talk-display">
                        „Åù„Çå„Åß„ÅØ„Åì„ÅÆÂæå„ÄÅÊú¨Êó•‰∏≠„Å´ÔºàÈÄ£‰ºëÊòé„Åë„Åã„ÇâÈ†ÜÁï™„Å´Ôºâ<br>
                        ÊíÆÂΩ±ÈÉ®ÁΩ≤„ÅÆËÄÖ„Åã„Çâ <span class="highlight">Á∞°Âçò„Å™„ÅîÁ¢∫Ë™ç„ÉªË®™Âïè„ÅÆÊó•ÊôÇ„ÇíÊ±∫„ÇÅ„Çã„ÅäÈõªË©±</span>„Åå„ÇÇ„ÅÜ‰∏ÄÊú¨ÂÖ•„Çä„Åæ„Åô„ÅÆ„Åß„ÄÅ„Åù„Å°„Çâ„Å†„Åë„ÅîÂØæÂøú„ÅäÈ°ò„ÅÑ„Åó„Åæ„Åô(*^^*)
                    </div>
                `,
                choices: [
                    { text: '„Çè„Åã„Å£„Åü', sub: '‚Üí ÂêçÂâçÁ¢∫Ë™ç„Å∏', action: 'showHelp', helpId: 'getName', class: 'success' },
                    { text: '„Åì„ÅÆ„ÅÇ„Å®Âá∫Êéõ„Åë„Çã/Âøô„Åó„ÅÑ', sub: '‚Üí Êê∫Â∏ØÁï™Âè∑Á¢∫Ë™ç', action: 'showHelp', helpId: 'getMobile', class: '' }
                ],
                helps: [
                    { id: 'getName', label: 'ÂêçÂâçÁ¢∫Ë™ç', title: 'ÂêçÂâçÁ¢∫Ë™ç ‚Üí ÂÆå‰∫ÜÔºÅ', content: `
                        <div class="modal-talk">
                            ÁßÅ„Äá„Äá„Å®Áî≥„Åó„Åæ„Åô„ÅåÂ§±Á§º„Åå„Å™„ÅÑ„Çà„ÅÜ„Å´„ÅäÈõªË©±Âè£Êßò„ÅÆ<span class="highlight">„ÅäÂêçÂâç</span>„Çí„Åä‰º∫„ÅÑ„Åó„Å¶„Çà„Çç„Åó„ÅÑ„Åß„Åô„ÅãÔºü<br><br>
                            „Åß„ÅØ„Äá„ÄáÊßòÂÆõ„Å´„ÅäÈõªË©±„ÅÑ„Åü„Åó„Åæ„Åô„ÅÆ„Åß„ÄÅ„ÅîÂØæÂøú„Å†„Åë„ÅäÈ°ò„ÅÑ„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ<br>
                            „Åß„ÅØÂ§±Á§ºËá¥„Åó„Åæ„Åô„ÄÅ„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åó„Åü‚òÜ<br><br>
                            <strong>ÔºàÊúÄÂæå„Åæ„Åß‰∏ÅÂØß„Å´ÔºÅÔºâ</strong>
                        </div>
                        <div class="modal-note" style="background: #d3f9d8; color: #1b5e20;">‚Üí Á¢∫Ë™çÂÆå‰∫ÜÂæå„ÄÅ„É¢„Éº„ÉÄ„É´„ÇíÈñâ„Åò„Å¶„Äåüéâ „Ç¢„ÉùÁç≤ÂæóÔºÅ„Äç„Å∏</div>
                    `},
                    { id: 'getMobile', label: 'Êê∫Â∏ØÁï™Âè∑Á¢∫Ë™ç', title: 'Êê∫Â∏ØÁï™Âè∑Á¢∫Ë™ç', content: `
                        <div class="modal-talk">
                            Â∑Æ„ÅóÊîØ„Åà„Åå„Å™„Åë„Çå„Å∞<span class="highlight">Êê∫Â∏ØÁï™Âè∑</span>„Çí„Åä‰º∫„ÅÑ„Åß„Åç„Åæ„Åô„Åß„Åó„Çá„ÅÜ„ÅãÔºü<br>
                            „Åù„Å°„Çâ„Å´„ÅäÊéõ„Åë„Åï„Åõ„Å¶„ÅÑ„Åü„Å†„Åç„Åæ„Åô„Å≠ÔºÅ
                        </div>
                        <div class="modal-note">‚ÄªÊê∫Â∏Ø„ÅÆÁï™Âè∑„ÅØ„ÄÅÁïôÂÆàËªΩÊ∏õ„ÅÆ„Åü„ÇÅ„Å™„Çã„Åπ„ÅèËÅû„ÅÑ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ<br>‚Üí Á¢∫Ë™çÂæå„ÄÅÂêçÂâçÁ¢∫Ë™ç„Å∏</div>
                    `}
                ],
                nextAfterHelp: 'endSuccess'
            },
            'endSuccess': {
                title: 'üéâ „Ç¢„ÉùÁç≤ÂæóÔºÅ',
                name: '„Ç¢„ÉùÁç≤ÂæóÂÆå‰∫Ü',
                progress: 100,
                isEnd: true,
                endType: 'success',
                content: `
                    <div class="end-screen success">
                        <div class="icon">üéâ</div>
                        <h2>„Ç¢„ÉùÂèóÊ≥®ÂÆå‰∫ÜÔºÅ<br>„ÅäÁñ≤„ÇåÊßò„Åß„Åó„Åü</h2>
                        <div class="checklist">
                            <div class="checklist-item">‚òë ‰ºöÁ§æÂêçÔºö___________________</div>
                            <div class="checklist-item">‚òë ÊãÖÂΩìËÄÖÂêçÔºö___________________</div>
                            <div class="checklist-item">‚òë ÈõªË©±Áï™Âè∑Ôºö___________________</div>
                            <div class="checklist-item">‚òë Êê∫Â∏ØÁï™Âè∑Ôºö___________________</div>
                            <div class="checklist-item">‚òë Ê°àÂÜÖÂÜÖÂÆπÔºö‚ñ°ÈõªÊ∞ó ‚ñ°„Éç„ÉÉ„Éà ‚ñ°ÈõªË©±ÂõûÁ∑ö</div>
                            <div class="checklist-item">‚òë ÊòéÁ¥∞Ôºö‚ñ°Á¥ô ‚ñ°WEBÔºàID/PWÁ¢∫Ë™çÊ∏àÔºâ</div>
                            <div class="checklist-item">‚òë ÊíÆÂΩ±Ôºö‚ñ°„ÅÇ„Çä ‚ñ°„Å™„ÅóÔºàCBÊ°àÂÜÖÔºâ</div>
                        </div>
                        <div class="end-buttons">
                            <button class="end-btn primary" onclick="resetNavi()">üîÑ ÊúÄÂàù„Åã„Çâ</button>
                            <a href="index.html" class="end-btn secondary" style="text-decoration:none;">üìñ „Éû„Éã„É•„Ç¢„É´</a>
                        </div>
                    </div>
                `,
                choices: [],
                helps: []
            },
            'endNotTarget': {
                title: 'ÂØæË±°Â§ñ',
                name: 'ÂØæË±°Â§ñÁµÇ‰∫Ü',
                progress: 100,
                isEnd: true,
                endType: 'notTarget',
                content: `
                    <div class="step-card">
                        <div class="step-title">üìã ÂØæË±°Â§ñ</div>
                        <div class="talk-display">
                            ÁèæÁä∂„Å©„Å°„Çâ„ÇÇ„ÅäÂÆâ„Åè„ÅîÂà©Áî®„ÅÑ„Åü„Å†„ÅÑ„Å¶„ÅÑ„Çâ„Å£„Åó„ÇÉ„ÅÑ„Åæ„Åô„ÅÆ„Åß„ÄÅ<br>
                            <span class="highlight">‰ªäÂõû„ÅØ„ÅîÊ°àÂÜÖÊéß„Åà„Åï„Åõ„Å¶„ÅÑ„Åü„Å†„Åç„Åæ„Åô„ÄÇ</span><br>
                            „ÅäÊôÇÈñì„ÅÑ„Åü„Å†„Åç„ÄÅ„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åó„ÅüÔºÅ<br><br>
                            Êñ∞„Åü„Å™„Ç≠„É£„É≥„Éö„Éº„É≥„ÅåÂá∫„Åæ„Åó„Åü„Çâ„ÄÅ„Åù„ÅÆÊôÇ„ÅØ„ÅîÈÄ£Áµ°„Åï„Åõ„Å¶„ÅÑ„Åü„Å†„Åç„Åü„ÅÑ„Å®ÊÄù„ÅÑ„Åæ„ÅôÔºÅ<br>
                            „Åæ„Åü„ÅîÊ©ü‰ºö„Åå„ÅÇ„Çå„Å∞„ÅäÈ°ò„ÅÑ„ÅÑ„Åü„Åó„Åæ„Åô‚ô™<br><br>
                            <strong>ÔºàÊúÄÂæå„Åæ„Åß‰∏ÅÂØß„Å´Ôºâ</strong>
                        </div>
                    </div>
                `,
                choices: [
                    { text: 'üîÑ ÊúÄÂàù„Åã„Çâ„ÇÑ„ÇäÁõ¥„Åô', next: 'step1', class: 'primary' },
                    { text: 'üè† ‰ª£Ë°®ËÄÖËá™ÂÆÖÊ°àÂÜÖ„ÇíË©¶„Åô', sub: '‚Üí ÈõªÂäõÂà§Âà•„Åã„Çâ', action: 'showHelp', helpId: 'homeOffer', class: '' }
                ],
                helps: [
                    { id: 'homeOffer', label: 'Ëá™ÂÆÖÊ°àÂÜÖ', title: '‰ª£Ë°®ËÄÖËá™ÂÆÖÊ°àÂÜÖ„Éà„Éº„ÇØ', content: `
                        <div class="modal-talk">
                            „Äå‰ªäÂõû„ÅØ‰ª£Ë°®ËÄÖÊßò„ÅÆ<span class="highlight">„ÅîËá™ÂÆÖ„ÇÇ„ÄÅÁâπÂà•„Å´‰∫ãÊ•≠Áî®Ââ≤Âºï„ÅÆ„ÅîÊ°àÂÜÖ„ÅåÂèØËÉΩ</span>„Åß„Åó„Å¶„Äú‚ô™„Äç
                        </div>
                        <div class="modal-note">‚Üí STEP 5ÔºàÈõªÂäõ‰ºöÁ§æÂà§Âà•Ôºâ„Åã„ÇâÂÜçÈñã</div>
                    `}
                ]
            },
            'endRecall': {
                title: 'ÂÜçÊû∂Èõª',
                name: 'ÂÜçÊû∂ÈõªÁµÇ‰∫Ü',
                progress: 100,
                isEnd: true,
                endType: 'recall',
                content: `
                    <div class="step-card">
                        <div class="step-title">üìû ÂÜçÊû∂Èõª„É™„Çπ„Éà„Å´ËøΩÂä†</div>
                        <div class="talk-display tip">
                            <strong>„É°„É¢</strong><br>
                            „Éª‰ºöÁ§æÂêçÔºö___________________<br>
                            „ÉªÂÜçÊû∂ÈõªÊó•ÊôÇÔºö___________________<br>
                            „ÉªÂÇôËÄÉÔºö___________________
                        </div>
                    </div>
                `,
                choices: [
                    { text: 'üîÑ ÊúÄÂàù„Åã„Çâ„ÇÑ„ÇäÁõ¥„Åô', next: 'step1', class: 'primary' }
                ],
                helps: []
            },
            'endRecallScheduled': {
                title: 'ÂÜçÊû∂Èõª‰∫àÁ¥Ñ',
                name: 'ÂÜçÊû∂Èõª‰∫àÁ¥ÑÂÆå‰∫Ü',
                progress: 100,
                isEnd: true,
                endType: 'recallScheduled',
                content: `
                    <div class="step-card">
                        <div class="step-title">üìÖ ÂÜçÊû∂Èõª‰∫àÁ¥ÑÂÆå‰∫Ü</div>
                        <div class="talk-display success">
                            <strong>ÂÜçÊû∂Èõª‰∫àÁ¥Ñ„ÇíË®òÈå≤„Åó„Å¶„Åè„Å†„Åï„ÅÑ</strong><br><br>
                            „Éª‰ºöÁ§æÂêçÔºö___________________<br>
                            „ÉªÊãÖÂΩìËÄÖÂêçÔºö___________________<br>
                            „ÉªÂÜçÊû∂ÈõªÊó•ÊôÇÔºö___________________<br>
                            „ÉªÂÇôËÄÉÔºö___________________
                        </div>
                    </div>
                `,
                choices: [
                    { text: 'üîÑ ÊúÄÂàù„Åã„Çâ„ÇÑ„ÇäÁõ¥„Åô', next: 'step1', class: 'primary' }
                ],
                helps: []
            }
        };

        let currentStep = 'step1';
        let history = [];
        let forwardHistory = [];
        let selectedCaller = '';
        let currentCallInfo = { company: '', phone: '' };
        let confirmCallback = null;

        // „Éï„Çß„Éº„Ç∫ÊÉÖÂ†±
        const PHASES = {
            intro: { icon: 'üìç', text: 'Â∞éÂÖ•„Éï„Çß„Éº„Ç∫', task: 'Âèó‰ªò„ÇíÁ™ÅÁ†¥„Åô„Çã' },
            time: { icon: '‚è∞', text: 'ÊôÇÈñìÁ¢∫Ë™ç', task: 'ÊôÇÈñì„ÇíÁ¢∫‰øù„Åô„Çã' },
            hearing: { icon: 'üìã', text: '„Éí„Ç¢„É™„É≥„Ç∞‰∏≠', task: 'ÊÉÖÂ†±„ÇíËÅû„ÅçÂá∫„Åô' },
            explain: { icon: 'üí°', text: 'Ë™¨Êòé„Éï„Çß„Éº„Ç∫', task: '„Çµ„Éº„Éì„Çπ„ÇíË™¨Êòé„Åô„Çã' },
            closing: { icon: 'üéØ', text: '„ÇØ„É≠„Éº„Ç∏„É≥„Ç∞', task: '„Ç¢„Éù„ÇíÁ¢∫ÂÆö„Åô„Çã' },
            end: { icon: '‚úÖ', text: 'ÂÆå‰∫Ü', task: 'ÁµêÊûú„ÇíË®òÈå≤„Åô„Çã' }
        };

        function getPhaseForStep(stepId) {
            if (stepId === 'step1' || stepId === 'step1b') return PHASES.intro;
            if (stepId === 'step2') return PHASES.time;
            if (stepId.startsWith('step3') || stepId.startsWith('step4') || stepId.startsWith('step5') || stepId.startsWith('step6')) return PHASES.hearing;
            if (stepId.startsWith('step7') || stepId.startsWith('step8')) return PHASES.explain;
            if (stepId === 'step9' || stepId === 'step10') return PHASES.closing;
            return PHASES.end;
        }

        function getRemainingSteps(progress) {
            const remaining = Math.ceil((100 - progress) / 10);
            return `ÊÆã„ÇäÁ¥Ñ${remaining}ÁîªÈù¢`;
        }

        function initNavi() {
            showCallerSelectScreen();
            checkTutorial();
        }

        function checkTutorial() {
            if (!localStorage.getItem('tutorial_shown')) {
                document.getElementById('tutorialOverlay').classList.add('show');
            }
        }

        function closeTutorial() {
            document.getElementById('tutorialOverlay').classList.remove('show');
            localStorage.setItem('tutorial_shown', 'true');
        }

        function showCallerSelectScreen() {
            document.getElementById('callerSelectScreen').classList.add('visible');
            document.getElementById('stepScreen').style.display = 'none';
            document.getElementById('navBar').style.display = 'none';
            document.getElementById('floatingHelpBtn').classList.add('hidden');
            renderCallerButtons();
        }

        function renderCallerButtons() {
            const container = document.getElementById('callerButtons');
            let html = '';
            callers.forEach(c => {
                const selected = c === selectedCaller ? 'selected' : '';
                html += `<button class="caller-btn ${selected}" onclick="selectCaller('${c}')">${c}</button>`;
            });
            html += `<button class="caller-btn add-new" onclick="showAddCallerPrompt()">+ Êñ∞Ë¶èËøΩÂä†</button>`;
            container.innerHTML = html;
            updateStartButton();
        }

        function selectCaller(name) {
            selectedCaller = name;
            renderCallerButtons();
        }

        function showAddCallerPrompt() {
            const name = prompt('Êñ∞„Åó„ÅÑÊû∂ÈõªËÄÖÂêç„ÇíÂÖ•Âäõ:');
            if (name && name.trim()) {
                addCaller(name.trim());
                selectedCaller = name.trim();
                renderCallerButtons();
            }
        }

        function updateStartButton() {
            const btn = document.getElementById('startCallBtn');
            const company = document.getElementById('companyNameInput').value.trim();
            btn.disabled = !selectedCaller || !company;
        }

        function startCall() {
            currentCallInfo.company = document.getElementById('companyNameInput').value.trim();
            currentCallInfo.phone = document.getElementById('phoneNumberInput').value.trim();
            currentCallInfo.startTime = new Date().toISOString();

            document.getElementById('callerSelectScreen').classList.remove('visible');
            document.getElementById('stepScreen').style.display = 'block';
            document.getElementById('navBar').style.display = 'flex';
            document.getElementById('floatingHelpBtn').classList.remove('hidden');

            history = [];
            forwardHistory = [];
            currentStep = 'step1';
            renderStep('step1');
        }

        function renderStep(stepId) {
            const step = STEPS[stepId];
            if (!step) return;

            currentStep = stepId;
            const phase = getPhaseForStep(stepId);

            // „Éï„Çß„Éº„Ç∫Ë°®Á§∫Êõ¥Êñ∞
            document.getElementById('phaseIcon').textContent = phase.icon;
            document.getElementById('phaseText').textContent = phase.text;
            document.getElementById('taskText').textContent = phase.task;

            // ÈÄ≤ÊçóÊõ¥Êñ∞
            const stepNum = step.title.match(/STEP (\d+)/)?.[1] || '';
            document.getElementById('stepLabel').textContent = `STEP ${stepNum}Ôºà${getRemainingSteps(step.progress)}Ôºâ`;
            document.getElementById('progressFill').style.width = step.progress + '%';

            // ÁµÇ‰∫ÜÁîªÈù¢„Åß„ÅØ„Éó„É≠„Ç∞„É¨„ÇπÈùûË°®Á§∫
            if (step.isEnd) {
                document.getElementById('progressContainer').style.display = 'none';
            } else {
                document.getElementById('progressContainer').style.display = 'block';
            }

            // Êàª„Çã„ÉªÈÄ≤„ÇÄ„Éú„Çø„É≥„ÅÆÁä∂ÊÖãÊõ¥Êñ∞„Å®ÂãïÁöÑ„É©„Éô„É´
            const backBtn = document.getElementById('backBtn');
            const forwardBtn = document.getElementById('forwardBtn');

            backBtn.disabled = history.length === 0;
            forwardBtn.disabled = forwardHistory.length === 0;

            if (history.length > 0) {
                backBtn.innerHTML = '‚Üê Êàª„Çã<span class="btn-count">(' + history.length + ')</span>';
            } else {
                backBtn.textContent = '‚Üê Êàª„Çã';
            }

            if (forwardHistory.length > 0) {
                forwardBtn.innerHTML = 'ÈÄ≤„ÇÄ ‚Üí<span class="btn-count">(' + forwardHistory.length + ')</span>';
            } else {
                forwardBtn.textContent = 'ÈÄ≤„ÇÄ ‚Üí';
            }

            // „Ç≥„É≥„ÉÜ„É≥„ÉÑÁîüÊàê
            let html = `<div class="step-card">`;
            html += `<div class="step-title">${step.title}</div>`;

            // „Éà„Éº„ÇØ„Çπ„ÇØ„É™„Éó„Éà„ÅÆÂ§âÊèõÔºàË™≠„Åø‰∏ä„ÅíÈÉ®ÂàÜ„ÇíÂº∑Ë™øÔºâ
            let content = step.content;
            content = content.replace(/\(?\^\^\)?/g, '').replace(/„Äú/g, '').replace(/‚òÜ/g, '').replace(/‚ô™/g, '');

            html += content;

            // ÈÅ∏ÊäûËÇ¢
            if (step.choices && step.choices.length > 0) {
                const colClass = step.choices.length === 2 ? 'two-col' : '';
                html += `<div class="choices ${colClass}">`;
                step.choices.forEach((choice, index) => {
                    const classStr = choice.class || '';
                    const isEndChoice = choice.next && (choice.next.startsWith('end') || choice.class === 'danger');
                    const recommend = index === 0 && choice.class === 'primary' ? '<span class="recommend-badge">„Åä„Åô„Åô„ÇÅ</span>' : '';

                    if (choice.action === 'showHelp') {
                        html += `<button class="choice-btn ${classStr}" onclick="showHelp('${choice.helpId}')">${recommend}${choice.text}${choice.sub ? `<span class="btn-sub">${choice.sub}</span>` : ''}</button>`;
                    } else if (choice.next) {
                        if (isEndChoice && !choice.next.startsWith('step')) {
                            html += `<button class="choice-btn ${classStr}" onclick="confirmEndAction('${choice.next}', '${choice.text}')">${recommend}${choice.text}${choice.sub ? `<span class="btn-sub">${choice.sub}</span>` : ''}</button>`;
                        } else {
                            html += `<button class="choice-btn ${classStr}" onclick="goToStep('${choice.next}')">${recommend}${choice.text}${choice.sub ? `<span class="btn-sub">${choice.sub}</span>` : ''}</button>`;
                        }
                    }
                });
                html += `</div>`;
            }

            html += `</div>`;

            document.getElementById('mainContent').innerHTML = html;

            // „Éï„É≠„Éº„ÉÜ„Ç£„É≥„Ç∞„Éò„É´„Éó„Éú„Çø„É≥Êõ¥Êñ∞
            const helpBtn = document.getElementById('floatingHelpBtn');
            const helpPanelButtons = document.getElementById('helpPanelButtons');

            if (step.helps && step.helps.length > 0) {
                helpBtn.classList.remove('hidden');
                let helpHtml = '';
                step.helps.forEach(help => {
                    helpHtml += `<button class="help-btn" onclick="showHelp('${help.id}'); hideHelpPanel();">${help.label}</button>`;
                });
                helpPanelButtons.innerHTML = helpHtml;
            } else {
                helpBtn.classList.add('hidden');
            }

            window.scrollTo(0, 0);
        }

        function confirmEndAction(nextStep, actionText) {
            document.getElementById('confirmIcon').textContent = '‚ö†Ô∏è';
            document.getElementById('confirmTitle').textContent = 'Á¢∫Ë™ç';
            document.getElementById('confirmMessage').textContent = `„Äå${actionText}„Äç„ÇíÈÅ∏Êäû„Åó„Åæ„Åô„ÅãÔºü`;
            confirmCallback = () => goToStep(nextStep);
            document.getElementById('confirmModal').classList.add('show');
        }

        function hideConfirmModal() {
            document.getElementById('confirmModal').classList.remove('show');
            confirmCallback = null;
        }

        function executeConfirm() {
            if (confirmCallback) {
                confirmCallback();
            }
            hideConfirmModal();
        }

        function showHelpPanel() {
            document.getElementById('helpPanel').classList.add('show');
        }

        function hideHelpPanel() {
            document.getElementById('helpPanel').classList.remove('show');
        }

        function goToStep(stepId) {
            history.push(currentStep);
            forwardHistory = [];
            renderStep(stepId);
        }

        function goBack() {
            if (history.length > 0) {
                forwardHistory.push(currentStep);
                const prevStep = history.pop();
                renderStep(prevStep);
            }
        }

        function goForward() {
            if (forwardHistory.length > 0) {
                history.push(currentStep);
                const nextStep = forwardHistory.pop();
                renderStep(nextStep);
            }
        }

        function resetNavi() {
            if (confirm('ÊúÄÂàù„Åã„Çâ„ÇÑ„ÇäÁõ¥„Åó„Åæ„Åô„ÅãÔºü')) {
                showCallerSelectScreen();
                selectedCaller = '';
                document.getElementById('companyNameInput').value = '';
                document.getElementById('phoneNumberInput').value = '';
            }
        }

        function showHelp(helpId) {
            const step = STEPS[currentStep];
            let helpData = null;

            if (step.helps) {
                helpData = step.helps.find(h => h.id === helpId);
            }

            if (!helpData) {
                // ‰ªñ„ÅÆ„Çπ„ÉÜ„ÉÉ„Éó„Åã„Çâ„ÇÇÊ§úÁ¥¢
                for (const key in STEPS) {
                    const s = STEPS[key];
                    if (s.helps) {
                        const found = s.helps.find(h => h.id === helpId);
                        if (found) {
                            helpData = found;
                            break;
                        }
                    }
                }
            }

            if (helpData) {
                document.getElementById('modalTitle').textContent = helpData.title;
                document.getElementById('modalBody').innerHTML = helpData.content;
                document.getElementById('modalOverlay').classList.add('show');

                // step10„ÅÆÂ†¥Âêà„ÄÅ„Ç¢„ÉùÁç≤Âæó„Éú„Çø„É≥„ÇíË°®Á§∫
                const actionBtn = document.getElementById('modalActionBtn');
                if (currentStep === 'step10') {
                    actionBtn.style.display = 'block';
                } else {
                    actionBtn.style.display = 'none';
                }
            }
        }

        function closeModal() {
            document.getElementById('modalOverlay').classList.remove('show');
        }

        function closeModalAndProceed() {
            document.getElementById('modalOverlay').classList.remove('show');
            // step10„Åã„ÇâendSuccess„Å∏ÈÅ∑Áßª
            if (currentStep === 'step10') {
                goToStep('endSuccess');
            }
        }

        function showPattern(num) {
            document.querySelectorAll('.pattern-btn').forEach((btn, i) => {
                btn.classList.toggle('active', i === num - 1);
            });
            document.querySelectorAll('.pattern-content').forEach((content, i) => {
                content.classList.toggle('active', i === num - 1);
            });
        }

        // „Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº
        document.getElementById('backBtn').addEventListener('click', goBack);
        document.getElementById('forwardBtn').addEventListener('click', goForward);
        document.getElementById('resetBtn').addEventListener('click', resetNavi);
        document.getElementById('modalClose').addEventListener('click', closeModal);
        document.getElementById('modalCloseBtn').addEventListener('click', closeModal);
        document.getElementById('modalActionBtn').addEventListener('click', closeModalAndProceed);
        document.getElementById('modalOverlay').addEventListener('click', (e) => {
            if (e.target === document.getElementById('modalOverlay')) {
                closeModal();
            }
        });

        // Êû∂ÈõªËÄÖÈÅ∏ÊäûÁîªÈù¢„ÅÆ„Ç§„Éô„É≥„Éà
        document.getElementById('companyNameInput').addEventListener('input', updateStartButton);
        document.getElementById('startCallBtn').addEventListener('click', startCall);

        // „Éï„É≠„Éº„ÉÜ„Ç£„É≥„Ç∞„Éò„É´„Éó
        document.getElementById('floatingHelpBtn').addEventListener('click', showHelpPanel);
        document.getElementById('helpPanelClose').addEventListener('click', hideHelpPanel);

        // Á¢∫Ë™ç„É¢„Éº„ÉÄ„É´
        document.getElementById('confirmCancel').addEventListener('click', hideConfirmModal);
        document.getElementById('confirmOk').addEventListener('click', executeConfirm);

        // „ÉÅ„É•„Éº„Éà„É™„Ç¢„É´
        document.getElementById('tutorialClose').addEventListener('click', closeTutorial);

        // ========== „Éë„Çπ„ÉØ„Éº„Éâ‰øùË≠∑ÔºàÂàùÊúüÂåñÔºâ==========
        (function() {
            const CORRECT_PASSWORD = 'mix2025';
            const SESSION_KEY = 'sales_manual_auth';

            const loginScreen = document.getElementById('loginScreen');
            const appContent = document.getElementById('appContent');
            const passwordInput = document.getElementById('passwordInput');
            const loginBtn = document.getElementById('loginBtn');
            const loginError = document.getElementById('loginError');

            function checkSession() {
                return sessionStorage.getItem(SESSION_KEY) === 'authenticated';
            }

            function loginSuccess() {
                sessionStorage.setItem(SESSION_KEY, 'authenticated');
                loginScreen.classList.add('hidden');
                appContent.classList.add('visible');
                initNavi();
            }

            function loginFailed() {
                loginError.classList.add('show');
                passwordInput.classList.add('error');
                passwordInput.value = '';
                passwordInput.focus();
                setTimeout(() => passwordInput.classList.remove('error'), 400);
            }

            function verifyPassword() {
                if (passwordInput.value === CORRECT_PASSWORD) {
                    loginSuccess();
                } else {
                    loginFailed();
                }
            }

            if (checkSession()) {
                loginSuccess();
            } else {
                loginScreen.classList.remove('hidden');
            }

            loginBtn.addEventListener('click', verifyPassword);
            passwordInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') verifyPassword();
            });
            passwordInput.addEventListener('input', () => {
                loginError.classList.remove('show');
            });
        })();

        // ========== Êû∂Èõª„É≠„Ç∞Ê©üËÉΩ ==========
        const LOG_STORAGE_KEY = 'call_logs';
        const CALLERS_STORAGE_KEY = 'callers';
        const MAX_LOGS = 100;

        let callLogs = [];
        let callers = [];
        let currentCallData = null;
        let selectedLogIndex = null;

        // ÂàùÊúüÂåñ
        function initLogSystem() {
            loadCallers();
            loadLogs();
            updateLogBadge();
            document.getElementById('logBtn').style.display = 'block';
        }

        // Êû∂ÈõªËÄÖÁÆ°ÁêÜ
        function loadCallers() {
            const stored = localStorage.getItem(CALLERS_STORAGE_KEY);
            callers = stored ? JSON.parse(stored) : [];
            updateCallerDropdowns();
        }

        function saveCallers() {
            localStorage.setItem(CALLERS_STORAGE_KEY, JSON.stringify(callers));
        }

        function addCaller(name) {
            if (name && !callers.includes(name)) {
                callers.push(name);
                saveCallers();
                updateCallerDropdowns();
            }
        }

        function removeCaller(name) {
            callers = callers.filter(c => c !== name);
            saveCallers();
            updateCallerDropdowns();
        }

        function updateCallerDropdowns() {
            // „Éï„Ç£„É´„Çø„ÉºÁî®„Éâ„É≠„ÉÉ„Éó„ÉÄ„Ç¶„É≥
            const filterSelect = document.getElementById('logFilterCaller');
            filterSelect.innerHTML = '<option value="">ÂÖ®„Å¶„ÅÆÊû∂ÈõªËÄÖ</option>';
            callers.forEach(c => {
                filterSelect.innerHTML += `<option value="${c}">${c}</option>`;
            });
        }

        // „É≠„Ç∞ÁÆ°ÁêÜ
        function loadLogs() {
            const stored = localStorage.getItem(LOG_STORAGE_KEY);
            callLogs = stored ? JSON.parse(stored) : [];
        }

        function saveLogs() {
            // ÊúÄÂ§ß‰ª∂Êï∞„ÇíË∂Ö„Åà„Åü„ÇâÂè§„ÅÑ„ÇÇ„ÅÆ„ÇíÂâäÈô§
            while (callLogs.length > MAX_LOGS) {
                callLogs.shift();
            }
            localStorage.setItem(LOG_STORAGE_KEY, JSON.stringify(callLogs));
            updateLogBadge();
        }

        function updateLogBadge() {
            document.getElementById('logBadge').textContent = callLogs.length;
        }

        function addLog(logData) {
            logData.id = Date.now();
            logData.createdAt = new Date().toISOString();
            callLogs.push(logData);
            saveLogs();
        }

        function deleteLog(logId) {
            callLogs = callLogs.filter(log => log.id !== logId);
            saveLogs();
        }

        function deleteAllLogs() {
            if (confirm('„Åô„Åπ„Å¶„ÅÆ„É≠„Ç∞„ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü\n„Åì„ÅÆÊìç‰Ωú„ÅØÂèñ„ÇäÊ∂à„Åõ„Åæ„Åõ„Çì„ÄÇ')) {
                callLogs = [];
                saveLogs();
                renderLogList();
            }
        }

        // Êû∂ÈõªÈñãÂßã„Éï„Ç©„Éº„É†„ÇíÁîüÊàê
        function generateCallStartForm() {
            return `
                <div class="call-start-form" id="callStartForm">
                    <h3>üìû Êû∂ÈõªÊÉÖÂ†±„ÇíÂÖ•Âäõ</h3>
                    <div class="form-row">
                        <label class="form-label">Êû∂ÈõªËÄÖÂêç<span class="required">*</span></label>
                        <div class="form-row-inline">
                            <select class="form-input" id="callerSelect">
                                <option value="">ÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>
                                ${callers.map(c => `<option value="${c}">${c}</option>`).join('')}
                                <option value="__new__">+ Êñ∞Ë¶èËøΩÂä†</option>
                            </select>
                        </div>
                        <div id="newCallerInput" style="display: none; margin-top: 0.5rem;">
                            <div class="form-row-inline">
                                <input type="text" class="form-input" id="newCallerName" placeholder="Êñ∞„Åó„ÅÑÊû∂ÈõªËÄÖÂêç">
                                <button class="form-btn-small add" onclick="addNewCaller()">ËøΩÂä†</button>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <label class="form-label">‰ºöÁ§æÂêç<span class="required">*</span></label>
                        <input type="text" class="form-input" id="companyName" placeholder="‰æãÔºöÊ†™Âºè‰ºöÁ§æ‚óã‚óã">
                    </div>
                    <div class="form-row">
                        <label class="form-label">ÈõªË©±Áï™Âè∑</label>
                        <input type="tel" class="form-input" id="phoneNumber" placeholder="‰æãÔºö06-1234-5678">
                    </div>
                </div>
            `;
        }

        // Êû∂ÈõªËÄÖÈÅ∏ÊäûÂ§âÊõ¥ÊôÇ
        function onCallerSelectChange() {
            const select = document.getElementById('callerSelect');
            const newInput = document.getElementById('newCallerInput');
            if (select && newInput) {
                newInput.style.display = select.value === '__new__' ? 'block' : 'none';
            }
        }

        // Êñ∞Ë¶èÊû∂ÈõªËÄÖËøΩÂä†
        function addNewCaller() {
            const input = document.getElementById('newCallerName');
            if (input && input.value.trim()) {
                addCaller(input.value.trim());
                const select = document.getElementById('callerSelect');
                select.innerHTML = `
                    <option value="">ÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>
                    ${callers.map(c => `<option value="${c}">${c}</option>`).join('')}
                    <option value="__new__">+ Êñ∞Ë¶èËøΩÂä†</option>
                `;
                select.value = input.value.trim();
                document.getElementById('newCallerInput').style.display = 'none';
                input.value = '';
            }
        }

        // ÁèæÂú®„ÅÆÊû∂Èõª„Éá„Éº„Çø„ÇíÂèñÂæó
        function getCurrentCallData() {
            const callerSelect = document.getElementById('callerSelect');
            const companyName = document.getElementById('companyName');
            const phoneNumber = document.getElementById('phoneNumber');

            if (!callerSelect || !companyName) return null;

            return {
                caller: callerSelect.value === '__new__' ? '' : callerSelect.value,
                company: companyName.value.trim(),
                phone: phoneNumber ? phoneNumber.value.trim() : ''
            };
        }

        // „Ç¢„ÉùÁç≤ÂæóÁî®ËøΩÂä†„Éï„Ç©„Éº„É†
        function generateSuccessForm() {
            return `
                <div class="call-start-form" style="margin-top: 1rem;">
                    <h3>üìù „Ç¢„ÉùÊÉÖÂ†±„ÇíÂÖ•Âäõ</h3>
                    <div class="form-row">
                        <label class="form-label">ÊãÖÂΩìËÄÖÂêç<span class="required">*</span></label>
                        <input type="text" class="form-input" id="contactName" placeholder="‰æãÔºöÂ±±Áî∞Â§™ÈÉé">
                    </div>
                    <div class="form-row">
                        <label class="form-label">Êê∫Â∏ØÁï™Âè∑Ôºà‰ªªÊÑèÔºâ</label>
                        <input type="tel" class="form-input" id="mobileNumber" placeholder="‰æãÔºö090-1234-5678">
                    </div>
                    <div class="form-row">
                        <label class="form-label">Ê°àÂÜÖÂÜÖÂÆπ</label>
                        <div class="form-checkbox-group">
                            <label class="form-checkbox-label">
                                <input type="checkbox" id="serviceElectric"> ÈõªÊ∞ó
                            </label>
                            <label class="form-checkbox-label">
                                <input type="checkbox" id="serviceNet"> „Éç„ÉÉ„Éà
                            </label>
                            <label class="form-checkbox-label">
                                <input type="checkbox" id="servicePhone"> ÈõªË©±ÂõûÁ∑ö
                            </label>
                        </div>
                    </div>
                    <div class="form-row">
                        <label class="form-label">ÊòéÁ¥∞Á®ÆÈ°û</label>
                        <div class="form-checkbox-group">
                            <label class="form-checkbox-label">
                                <input type="radio" name="receiptType" value="paper"> Á¥ôÊòéÁ¥∞
                            </label>
                            <label class="form-checkbox-label">
                                <input type="radio" name="receiptType" value="web"> WEBÊòéÁ¥∞
                            </label>
                        </div>
                    </div>
                    <div class="form-row">
                        <label class="form-label">ÊíÆÂΩ±Â∏åÊúõ</label>
                        <div class="form-checkbox-group">
                            <label class="form-checkbox-label">
                                <input type="radio" name="photoWanted" value="yes"> „ÅÇ„Çä
                            </label>
                            <label class="form-checkbox-label">
                                <input type="radio" name="photoWanted" value="no"> „Å™„ÅóÔºàCBÊ°àÂÜÖÔºâ
                            </label>
                        </div>
                    </div>
                    <div class="form-row">
                        <label class="form-label">„É°„É¢</label>
                        <textarea class="form-input" id="successMemo" rows="3" placeholder="ÂÇôËÄÉ„Åå„ÅÇ„Çå„Å∞ÂÖ•Âäõ"></textarea>
                    </div>
                    <button class="choice-btn success" onclick="saveSuccessLog()" style="width: 100%; margin-top: 1rem;">
                        üíæ „É≠„Ç∞„Çí‰øùÂ≠ò„Åó„Å¶ÂÆå‰∫Ü
                    </button>
                </div>
            `;
        }

        // ÂÜçÊû∂Èõª„ÉªÂØæË±°Â§ñÁî®„Éï„Ç©„Éº„É†
        function generateEndForm(endType) {
            const isRecall = endType === 'recall' || endType === 'recallScheduled';
            return `
                <div class="call-start-form" style="margin-top: 1rem;">
                    <h3>üìù ÁµÇ‰∫ÜÊÉÖÂ†±„ÇíÂÖ•Âäõ</h3>
                    <div class="form-row">
                        <label class="form-label">ÁµÇ‰∫ÜÁêÜÁî±</label>
                        <select class="form-input" id="endReason">
                            <option value="‰∏çÂú®">‰∏çÂú®</option>
                            <option value="ÂØæË±°Â§ñ">ÂØæË±°Â§ñ</option>
                            <option value="ÊãíÂê¶">ÊãíÂê¶</option>
                            <option value="„Åù„ÅÆ‰ªñ">„Åù„ÅÆ‰ªñ</option>
                        </select>
                    </div>
                    ${isRecall ? `
                    <div class="form-row">
                        <label class="form-label">ÂÜçÊû∂Èõª‰∫àÂÆöÊó•ÊôÇ</label>
                        <input type="datetime-local" class="form-input" id="recallDateTime">
                    </div>
                    ` : ''}
                    <div class="form-row">
                        <label class="form-label">„É°„É¢</label>
                        <textarea class="form-input" id="endMemo" rows="3" placeholder="ÂÇôËÄÉ„Åå„ÅÇ„Çå„Å∞ÂÖ•Âäõ"></textarea>
                    </div>
                    <button class="choice-btn primary" onclick="saveEndLog('${endType}')" style="width: 100%; margin-top: 1rem;">
                        üíæ „É≠„Ç∞„Çí‰øùÂ≠ò
                    </button>
                </div>
            `;
        }

        // „Ç¢„ÉùÁç≤Âæó„É≠„Ç∞„Çí‰øùÂ≠ò
        function saveSuccessLog() {
            const callData = getCurrentCallData();
            if (!callData || !callData.caller || !callData.company) {
                alert('Êû∂ÈõªËÄÖÂêç„Å®‰ºöÁ§æÂêç„ÅØÂøÖÈ†à„Åß„Åô');
                return;
            }

            const contactName = document.getElementById('contactName');
            const mobileNumber = document.getElementById('mobileNumber');
            const successMemo = document.getElementById('successMemo');

            const services = [];
            if (document.getElementById('serviceElectric')?.checked) services.push('ÈõªÊ∞ó');
            if (document.getElementById('serviceNet')?.checked) services.push('„Éç„ÉÉ„Éà');
            if (document.getElementById('servicePhone')?.checked) services.push('ÈõªË©±ÂõûÁ∑ö');

            const receiptType = document.querySelector('input[name="receiptType"]:checked')?.value || '';
            const photoWanted = document.querySelector('input[name="photoWanted"]:checked')?.value || '';

            const log = {
                ...callData,
                result: 'success',
                resultLabel: '„Ç¢„ÉùÁç≤Âæó',
                contactName: contactName?.value.trim() || '',
                mobile: mobileNumber?.value.trim() || '',
                services: services,
                receiptType: receiptType,
                photoWanted: photoWanted,
                memo: successMemo?.value.trim() || ''
            };

            addLog(log);
            alert('„É≠„Ç∞„Çí‰øùÂ≠ò„Åó„Åæ„Åó„ÅüÔºÅ');
        }

        // ÁµÇ‰∫Ü„É≠„Ç∞„Çí‰øùÂ≠ò
        function saveEndLog(endType) {
            const callData = getCurrentCallData();
            if (!callData || !callData.caller || !callData.company) {
                alert('Êû∂ÈõªËÄÖÂêç„Å®‰ºöÁ§æÂêç„ÅØÂøÖÈ†à„Åß„Åô');
                return;
            }

            const endReason = document.getElementById('endReason');
            const recallDateTime = document.getElementById('recallDateTime');
            const endMemo = document.getElementById('endMemo');

            const resultMap = {
                'recall': { result: 'recall', label: 'ÂÜçÊû∂Èõª' },
                'recallScheduled': { result: 'recall', label: 'ÂÜçÊû∂Èõª‰∫àÁ¥Ñ' },
                'notTarget': { result: 'not-target', label: 'ÂØæË±°Â§ñ' }
            };

            const resultInfo = resultMap[endType] || { result: 'not-target', label: 'ÂØæË±°Â§ñ' };

            const log = {
                ...callData,
                result: resultInfo.result,
                resultLabel: resultInfo.label,
                endReason: endReason?.value || '',
                recallDateTime: recallDateTime?.value || '',
                memo: endMemo?.value.trim() || ''
            };

            addLog(log);
            alert('„É≠„Ç∞„Çí‰øùÂ≠ò„Åó„Åæ„Åó„ÅüÔºÅ');
        }

        // „É≠„Ç∞‰∏ÄË¶ßË°®Á§∫
        function showLogList() {
            renderLogList();
            document.getElementById('logListModal').classList.add('show');
        }

        function hideLogList() {
            document.getElementById('logListModal').classList.remove('show');
        }

        function getDateFilterRange(filterValue) {
            const now = new Date();
            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
            const yesterday = new Date(today);
            yesterday.setDate(yesterday.getDate() - 1);

            switch (filterValue) {
                case 'today':
                    return { start: today, end: now };
                case 'yesterday':
                    return { start: yesterday, end: today };
                case '3days':
                    const threeDaysAgo = new Date(today);
                    threeDaysAgo.setDate(threeDaysAgo.getDate() - 2);
                    return { start: threeDaysAgo, end: now };
                case 'week':
                    const weekAgo = new Date(today);
                    weekAgo.setDate(weekAgo.getDate() - 6);
                    return { start: weekAgo, end: now };
                default:
                    return null;
            }
        }

        function formatDateHeader(date) {
            const days = ['Êó•', 'Êúà', 'ÁÅ´', 'Ê∞¥', 'Êú®', 'Èáë', 'Âúü'];
            return `${date.getFullYear()}/${date.getMonth() + 1}/${date.getDate()}Ôºà${days[date.getDay()]}Ôºâ`;
        }

        function renderLogList() {
            const filterCaller = document.getElementById('logFilterCaller').value;
            const filterResult = document.getElementById('logFilterResult').value;
            const filterDate = document.getElementById('logFilterDate').value;

            let filteredLogs = [...callLogs].reverse();

            if (filterCaller) {
                filteredLogs = filteredLogs.filter(log => log.caller === filterCaller);
            }
            if (filterResult) {
                filteredLogs = filteredLogs.filter(log => log.result === filterResult);
            }

            const dateRange = getDateFilterRange(filterDate);
            if (dateRange) {
                filteredLogs = filteredLogs.filter(log => {
                    const logDate = new Date(log.createdAt);
                    return logDate >= dateRange.start && logDate <= dateRange.end;
                });
            }

            const body = document.getElementById('logListBody');

            if (filteredLogs.length === 0) {
                body.innerHTML = `
                    <div class="empty-logs">
                        <div class="icon">üì≠</div>
                        <p>„É≠„Ç∞„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</p>
                    </div>
                `;
                return;
            }

            // Êó•‰ªò„Åî„Å®„Å´„Ç∞„É´„Éº„ÉóÂåñ
            const grouped = {};
            filteredLogs.forEach(log => {
                const date = new Date(log.createdAt);
                const dateKey = `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()}`;
                if (!grouped[dateKey]) {
                    grouped[dateKey] = { date: date, logs: [], stats: { success: 0, recall: 0, notTarget: 0 } };
                }
                grouped[dateKey].logs.push(log);
                if (log.result === 'success') grouped[dateKey].stats.success++;
                else if (log.result === 'recall') grouped[dateKey].stats.recall++;
                else grouped[dateKey].stats.notTarget++;
            });

            let html = '';
            Object.keys(grouped).forEach(dateKey => {
                const group = grouped[dateKey];
                const stats = group.stats;
                const statsStr = `„Ç¢„Éù:${stats.success} / ÂÜçÊû∂Èõª:${stats.recall} / ÂØæË±°Â§ñ:${stats.notTarget}`;

                html += `<div class="log-date-header" style="background: var(--bg-main); padding: 0.75rem 1rem; margin: 0.5rem 0; border-radius: 8px; font-size: 0.85rem;">
                    <strong>${formatDateHeader(group.date)}</strong> - ${group.logs.length}‰ª∂
                    <div style="font-size: 0.75rem; color: var(--text-gray); margin-top: 0.25rem;">${statsStr}</div>
                </div>`;

                group.logs.forEach(log => {
                    const date = new Date(log.createdAt);
                    const timeStr = `${date.getHours()}:${String(date.getMinutes()).padStart(2, '0')}`;

                    html += `
                        <div class="log-item" onclick="showLogDetail(${log.id})">
                            <div class="log-item-header">
                                <span class="log-item-date">${timeStr}</span>
                                <span class="log-item-result ${log.result}">${log.resultLabel}</span>
                            </div>
                            <div class="log-item-company">${log.company}</div>
                            <div class="log-item-caller">Êû∂ÈõªËÄÖÔºö${log.caller}</div>
                        </div>
                    `;
                });
            });

            body.innerHTML = html;
        }

        // „É≠„Ç∞Ë©≥Á¥∞Ë°®Á§∫
        function showLogDetail(logId) {
            const log = callLogs.find(l => l.id === logId);
            if (!log) return;

            selectedLogIndex = logId;

            const date = new Date(log.createdAt);
            const dateStr = `${date.getFullYear()}/${date.getMonth() + 1}/${date.getDate()} ${date.getHours()}:${String(date.getMinutes()).padStart(2, '0')}`;

            let detailHtml = `
                <div class="log-detail-section">
                    <h4>Âü∫Êú¨ÊÉÖÂ†±</h4>
                    <div class="log-detail-row">
                        <span class="label">Êû∂ÈõªÊó•ÊôÇ</span>
                        <span class="value">${dateStr}</span>
                    </div>
                    <div class="log-detail-row">
                        <span class="label">Êû∂ÈõªËÄÖ</span>
                        <span class="value">${log.caller}</span>
                    </div>
                    <div class="log-detail-row">
                        <span class="label">‰ºöÁ§æÂêç</span>
                        <span class="value">${log.company}</span>
                    </div>
                    <div class="log-detail-row">
                        <span class="label">ÈõªË©±Áï™Âè∑</span>
                        <span class="value">${log.phone || '-'}</span>
                    </div>
                    <div class="log-detail-row">
                        <span class="label">ÁµêÊûú</span>
                        <span class="value">${log.resultLabel}</span>
                    </div>
                </div>
            `;

            if (log.result === 'success') {
                detailHtml += `
                    <div class="log-detail-section">
                        <h4>„Ç¢„ÉùÊÉÖÂ†±</h4>
                        <div class="log-detail-row">
                            <span class="label">ÊãÖÂΩìËÄÖÂêç</span>
                            <span class="value">${log.contactName || '-'}</span>
                        </div>
                        <div class="log-detail-row">
                            <span class="label">Êê∫Â∏ØÁï™Âè∑</span>
                            <span class="value">${log.mobile || '-'}</span>
                        </div>
                        <div class="log-detail-row">
                            <span class="label">Ê°àÂÜÖÂÜÖÂÆπ</span>
                            <span class="value">${log.services?.join(', ') || '-'}</span>
                        </div>
                        <div class="log-detail-row">
                            <span class="label">ÊòéÁ¥∞Á®ÆÈ°û</span>
                            <span class="value">${log.receiptType === 'paper' ? 'Á¥ôÊòéÁ¥∞' : log.receiptType === 'web' ? 'WEBÊòéÁ¥∞' : '-'}</span>
                        </div>
                        <div class="log-detail-row">
                            <span class="label">ÊíÆÂΩ±Â∏åÊúõ</span>
                            <span class="value">${log.photoWanted === 'yes' ? '„ÅÇ„Çä' : log.photoWanted === 'no' ? '„Å™„Åó' : '-'}</span>
                        </div>
                    </div>
                `;
            } else {
                detailHtml += `
                    <div class="log-detail-section">
                        <h4>ÁµÇ‰∫ÜÊÉÖÂ†±</h4>
                        <div class="log-detail-row">
                            <span class="label">ÁµÇ‰∫ÜÁêÜÁî±</span>
                            <span class="value">${log.endReason || '-'}</span>
                        </div>
                        ${log.recallDateTime ? `
                        <div class="log-detail-row">
                            <span class="label">ÂÜçÊû∂Èõª‰∫àÂÆö</span>
                            <span class="value">${log.recallDateTime.replace('T', ' ')}</span>
                        </div>
                        ` : ''}
                    </div>
                `;
            }

            if (log.memo) {
                detailHtml += `
                    <div class="log-detail-section">
                        <h4>„É°„É¢</h4>
                        <div class="log-detail-memo">${log.memo}</div>
                    </div>
                `;
            }

            detailHtml += `
                <div class="log-detail-actions">
                    <button class="log-detail-btn image" onclick="downloadLogImage(${log.id})">üì∑ ÁîªÂÉè‰øùÂ≠ò</button>
                    <button class="log-detail-btn delete" onclick="deleteLogConfirm(${log.id})">üóëÔ∏è ÂâäÈô§</button>
                </div>
            `;

            document.getElementById('logDetailContent').innerHTML = detailHtml;
            document.getElementById('logDetailModal').classList.add('show');
        }

        function hideLogDetail() {
            document.getElementById('logDetailModal').classList.remove('show');
        }

        function deleteLogConfirm(logId) {
            if (confirm('„Åì„ÅÆ„É≠„Ç∞„ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü')) {
                deleteLog(logId);
                hideLogDetail();
                renderLogList();
            }
        }

        // CSV„ÉÄ„Ç¶„É≥„É≠„Éº„ÉâÔºà„Éï„Ç£„É´„Çø„ÉºÂØæÂøúÔºâ
        function downloadCsv() {
            const filterCaller = document.getElementById('logFilterCaller').value;
            const filterResult = document.getElementById('logFilterResult').value;
            const filterDate = document.getElementById('logFilterDate').value;

            let logsToExport = [...callLogs];

            if (filterCaller) {
                logsToExport = logsToExport.filter(log => log.caller === filterCaller);
            }
            if (filterResult) {
                logsToExport = logsToExport.filter(log => log.result === filterResult);
            }

            const dateRange = getDateFilterRange(filterDate);
            if (dateRange) {
                logsToExport = logsToExport.filter(log => {
                    const logDate = new Date(log.createdAt);
                    return logDate >= dateRange.start && logDate <= dateRange.end;
                });
            }

            if (logsToExport.length === 0) {
                alert('„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„Åô„Çã„É≠„Ç∞„Åå„ÅÇ„Çä„Åæ„Åõ„Çì');
                return;
            }

            const headers = ['Êó•ÊôÇ', 'Êû∂ÈõªËÄÖ', '‰ºöÁ§æÂêç', 'ÈõªË©±Áï™Âè∑', 'ÁµêÊûú', 'ÊãÖÂΩìËÄÖÂêç', 'Êê∫Â∏ØÁï™Âè∑', 'Ê°àÂÜÖÂÜÖÂÆπ', 'ÊòéÁ¥∞Á®ÆÈ°û', 'ÊíÆÂΩ±Â∏åÊúõ', 'ÁµÇ‰∫ÜÁêÜÁî±', 'ÂÜçÊû∂Èõª‰∫àÂÆö', '„É°„É¢'];

            const rows = logsToExport.map(log => {
                const date = new Date(log.createdAt);
                const dateStr = `${date.getFullYear()}/${date.getMonth() + 1}/${date.getDate()} ${date.getHours()}:${String(date.getMinutes()).padStart(2, '0')}`;

                return [
                    dateStr,
                    log.caller || '',
                    log.company || '',
                    log.phone || '',
                    log.resultLabel || '',
                    log.contactName || '',
                    log.mobile || '',
                    log.services?.join('/') || '',
                    log.receiptType === 'paper' ? 'Á¥ô' : log.receiptType === 'web' ? 'WEB' : '',
                    log.photoWanted === 'yes' ? '„ÅÇ„Çä' : log.photoWanted === 'no' ? '„Å™„Åó' : '',
                    log.endReason || '',
                    log.recallDateTime ? log.recallDateTime.replace('T', ' ') : '',
                    log.memo || ''
                ].map(cell => `"${String(cell).replace(/"/g, '""')}"`).join(',');
            });

            const csvContent = '\uFEFF' + headers.join(',') + '\n' + rows.join('\n');
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });

            // „Éï„Ç°„Ç§„É´Âêç„Å´ÊúüÈñì„ÇíÂê´„ÇÅ„Çã
            const today = new Date();
            const formatDate = d => `${d.getFullYear()}${String(d.getMonth() + 1).padStart(2, '0')}${String(d.getDate()).padStart(2, '0')}`;
            let fileName;

            if (dateRange) {
                fileName = `Êû∂Èõª„É≠„Ç∞_${formatDate(dateRange.start)}_${formatDate(dateRange.end)}.csv`;
            } else {
                fileName = `Êû∂Èõª„É≠„Ç∞_ÂÖ®ÊúüÈñì_${formatDate(today)}.csv`;
            }

            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = fileName;
            link.click();
        }

        // ÁîªÂÉè„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ
        async function downloadLogImage(logId) {
            const log = callLogs.find(l => l.id === logId);
            if (!log) return;

            const date = new Date(log.createdAt);
            const dateStr = `${date.getFullYear()}/${date.getMonth() + 1}/${date.getDate()} ${date.getHours()}:${String(date.getMinutes()).padStart(2, '0')}`;

            document.getElementById('captureDate').textContent = dateStr;

            let bodyHtml = `
                <div class="log-capture-row"><span>Êû∂ÈõªËÄÖ</span><span>${log.caller}</span></div>
                <div class="log-capture-row"><span>‰ºöÁ§æÂêç</span><span>${log.company}</span></div>
                <div class="log-capture-row"><span>ÈõªË©±Áï™Âè∑</span><span>${log.phone || '-'}</span></div>
                <div class="log-capture-row"><span>ÁµêÊûú</span><span>${log.resultLabel}</span></div>
            `;

            if (log.result === 'success') {
                bodyHtml += `
                    <div class="log-capture-row"><span>ÊãÖÂΩìËÄÖÂêç</span><span>${log.contactName || '-'}</span></div>
                    <div class="log-capture-row"><span>Êê∫Â∏ØÁï™Âè∑</span><span>${log.mobile || '-'}</span></div>
                    <div class="log-capture-row"><span>Ê°àÂÜÖÂÜÖÂÆπ</span><span>${log.services?.join(', ') || '-'}</span></div>
                    <div class="log-capture-row"><span>ÊòéÁ¥∞Á®ÆÈ°û</span><span>${log.receiptType === 'paper' ? 'Á¥ôÊòéÁ¥∞' : log.receiptType === 'web' ? 'WEBÊòéÁ¥∞' : '-'}</span></div>
                    <div class="log-capture-row"><span>ÊíÆÂΩ±Â∏åÊúõ</span><span>${log.photoWanted === 'yes' ? '„ÅÇ„Çä' : log.photoWanted === 'no' ? '„Å™„Åó' : '-'}</span></div>
                `;
            } else {
                bodyHtml += `
                    <div class="log-capture-row"><span>ÁµÇ‰∫ÜÁêÜÁî±</span><span>${log.endReason || '-'}</span></div>
                `;
                if (log.recallDateTime) {
                    bodyHtml += `<div class="log-capture-row"><span>ÂÜçÊû∂Èõª‰∫àÂÆö</span><span>${log.recallDateTime.replace('T', ' ')}</span></div>`;
                }
            }

            if (log.memo) {
                bodyHtml += `<div class="log-capture-row" style="flex-direction: column; align-items: flex-start;"><span style="margin-bottom: 0.25rem;">„É°„É¢</span><span style="white-space: pre-wrap;">${log.memo}</span></div>`;
            }

            document.getElementById('captureBody').innerHTML = bodyHtml;

            // Move capture area into view for rendering
            const captureEl = document.getElementById('logCapture');
            captureEl.style.left = '0';

            try {
                const canvas = await html2canvas(captureEl, {
                    backgroundColor: '#ffffff',
                    scale: 2
                });

                captureEl.style.left = '-9999px';

                const link = document.createElement('a');
                link.download = `Êû∂ÈõªË®òÈå≤_${log.company}_${date.getMonth() + 1}${date.getDate()}.png`;
                link.href = canvas.toDataURL('image/png');
                link.click();
            } catch (err) {
                captureEl.style.left = '-9999px';
                alert('ÁîªÂÉè„ÅÆÁîüÊàê„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
                console.error(err);
            }
        }

        // renderStep„ÇíÊã°Âºµ„Åó„Å¶„Éï„Ç©„Éº„É†„ÇíËøΩÂä†
        const originalRenderStep = renderStep;
        renderStep = function(stepId) {
            originalRenderStep(stepId);

            const step = STEPS[stepId];
            if (!step) return;

            const mainContent = document.getElementById('mainContent');

            // step1„ÅÆÂ†¥Âêà„ÄÅÊû∂ÈõªÈñãÂßã„Éï„Ç©„Éº„É†„ÇíËøΩÂä†
            if (stepId === 'step1') {
                mainContent.innerHTML = generateCallStartForm() + mainContent.innerHTML;
                // „Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº„ÇíËøΩÂä†
                setTimeout(() => {
                    const select = document.getElementById('callerSelect');
                    if (select) {
                        select.addEventListener('change', onCallerSelectChange);
                    }
                }, 0);
            }

            // ÁµÇ‰∫ÜÁîªÈù¢„ÅÆÂ†¥Âêà„ÄÅÈÅ©Âàá„Å™„Éï„Ç©„Éº„É†„ÇíËøΩÂä†
            if (step.isEnd) {
                if (step.endType === 'success') {
                    mainContent.innerHTML += generateSuccessForm();
                } else if (step.endType === 'recall' || step.endType === 'recallScheduled' || step.endType === 'notTarget') {
                    mainContent.innerHTML += generateEndForm(step.endType);
                }
            }
        };

        // „É≠„Ç∞Èñ¢ÈÄ£„Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº
        document.getElementById('logBtn').addEventListener('click', showLogList);
        document.getElementById('logListClose').addEventListener('click', hideLogList);
        document.getElementById('logDetailClose').addEventListener('click', hideLogDetail);
        document.getElementById('logDownloadCsv').addEventListener('click', downloadCsv);
        document.getElementById('logDeleteAll').addEventListener('click', deleteAllLogs);
        document.getElementById('logFilterCaller').addEventListener('change', renderLogList);
        document.getElementById('logFilterResult').addEventListener('change', renderLogList);
        document.getElementById('logFilterDate').addEventListener('change', renderLogList);

        document.getElementById('logListModal').addEventListener('click', (e) => {
            if (e.target.id === 'logListModal') hideLogList();
        });
        document.getElementById('logDetailModal').addEventListener('click', (e) => {
            if (e.target.id === 'logDetailModal') hideLogDetail();
        });

        // „É≠„Ç∞„Ç∑„Çπ„ÉÜ„É†ÂàùÊúüÂåñ
        initLogSystem();
    </script>
</body>
</html>
